<v-app id="inspire">
	<v-toolbar color="teal" dark fixed app clipped-right>
		<v-toolbar-side-icon @click.stop="left = !left">
		</v-toolbar-side-icon>
		<v-toolbar-title style="margin-right: 3em;">{{ appName }}</v-toolbar-title>
		<v-flex xs2 class="ma-2">
			<v-select label="Dataset 1" :items="datasets" v-model="selectedDataset" :menu-props="{ maxHeight: '400' }"
				box v-on:change="updateDataset()">
			</v-select>
		</v-flex>
		<v-flex xs2 class="ma-2" v-if="selectedMode == 'Diff'">
			<v-select label="Dataset 2" :items="datasets" v-model="selectedDataset2" :menu-props="{ maxHeight: '400' }"
				box v-on:change="updateDataset()">
			</v-select>
		</v-flex>
		<v-flex xs2 class="ma-2">
			<v-select label="Graph to visualize" :items="formats" v-model="selectedFormat"
				:menu-props="{ maxHeight: '400' }" box v-on:change="updateFormat()">
			</v-select>
		</v-flex>
		<v-spacer></v-spacer>
		<v-spacer></v-spacer>
		<v-flex xs2>
			<v-select label="Analysis Mode" :items="modes" v-model="selectedMode" box :menu-props="{ maxHeight: '400' }"
				v-on:change="updateMode()"></v-select>
		</v-flex>

	</v-toolbar>

	<v-navigation-drawer v-model="left" temporary fixed>
		<v-btn slot="activator" color="primary" dark>Open Dialog</v-btn>
		<v-card flex fill-height id="control-panel">
			<v-layout row wrap>
				<v-btn icon>
					<v-icon v-on:click="reset()">refresh</v-icon>
				</v-btn>
				<v-flex xs12 class="ma-1">
					<v-select label="Color By" :items="colorBy" v-model="selectedColorBy"
						:menu-props="{ maxHeight: '200' }" persistent-hint v-on:change="updateColorBy()">
					</v-select>
				</v-flex>
				<v-flex xs12 class="ma-1">
					<v-select label="Group By" :items="groupBy" v-model="selectedGroupBy"
						:menu-props="{ maxHeight: '200' }" persistent-hint v-on:change="updateGroupBy()">
					</v-select>
				</v-flex>
				<v-flex xs12 class="ma-1">
					<v-select label="Filter By" :items="filterBy" v-model="selectedFilterBy"
						:menu-props="{ maxHeight: '200' }" persistent-hint v-on:change="updateFilterBy()">
					</v-select>
				</v-flex>
				<v-flex xs12 class="ma-1">
					<v-text-field label="Filter Threshold" v-model="selectedIncTime" class="mt-0" type="number"
						@change="updateFilterIncTime"></v-text-field>
					<vue-slider id="frequency-slider" :width="200" :process="true" v-model="selectedFilterPerc"
						:order="false" @change="updateFilterPerc" style="">
						<template #prepend>
							<v-text-field v-model="filterPercRange[[0, selectedFilterPerc]]" class="pt-0 mt-0"
								hide-details single-line type="number" style="width: 30px">
							</v-text-field>
						</template>
					</vue-slider>
				</v-flex>
				<v-flex xs12 class="ma-1">
					<v-text-field label="Number of bins in Histogram" class="mt-0" type="number"
						v-model="selectedBinCount" :menu-props="{ maxHeight: '200' }" persistent-hint
						v-on:change="updateBinCount()">
					</v-text-field>
				</v-flex>
				<v-flex xs12 class="ma-1">
					<v-select label="Color Map" :items="colorMap" v-model="selectedColorMap"
						:menu-props="{ maxHeight: '200' }" persistent-hint v-on:change="updateColor()">
					</v-select>
				</v-flex>
				<v-flex xs12 class="ma-1">
						<v-text-field label="Color points (3-9)" class="mt-0" type="number"
						v-model="selectedColorPoint" :menu-props="{ maxHeight: '200' }" persistent-hint
						v-on:change="updateColor()">
					</v-text-field>
				</v-flex>

				<v-spacer></v-spacer>
			</v-layout>
		</v-card>
	</v-navigation-drawer>

	<v-content class="pt-auto" fill-height id="dashboard">
		<v-flex>
			<v-container fluid fill-height class="pa-0">
				<v-layout justify-center align-center>
					<v-flex xs3 fill-height class="pa-0" v-if="selectedFormat == 'Callgraph'">
						<Histogram ref="Histogram" v-bind:selected-color-by="selectedColorBy"
							v-if="selectedFormat=='Callgraph'" />
						<Icicle ref="Icicle" v-if="selectedFormat=='Callgraph'" />
					</v-flex>
					<v-flex xs9 fill-height class="pa-0" id="vis"
						v-if="selectedMode == 'Single' && selectedFormat =='Callgraph' ">
						<Callgraph ref="Callgraph" v-if="selectedFormat == 'Callgraph'" />
					</v-flex>
					<v-flex xs12 fill-height class="pa-0" id="cct_vis"
						v-if="selectedMode == 'Single' && selectedFormat == 'CCT'">
						<CCT ref="CCT" v-bind:selected-color-by="selected-color-by" v-if="selectedFormat == 'CCT'" />
					</v-flex>
					<v-flex xs9 fill-height class="pa-0" id="diff_vis" v-if="selectedMode == 'Diff'">
						<Diffgraph ref="Diffgraph" />
					</v-flex>
				</v-layout>
			</v-container>
		</v-flex>

	</v-content>
	<v-footer color="teal" class="white--text" app>
		<span> Lawrence Livermore National Laboratory and VIDi Labs, University of California, Davis </span>
		<v-spacer></v-spacer>
		<span>&copy; 2019</span>
	</v-footer>
</v-app>