<!--
/** 
 * Copyright 2017-2020 Lawrence Livermore National Security, LLC and other
 * CallFlow Project Developers. See the top-level LICENSE file for details.
 * 
 * SPDX-License-Identifier: MIT
 */
-->
<v-layout row wrap :id="id">
    <v-chip class="chip" chips color="teal" label outlined clearable> {{ message }} 
        
    </v-chip>
    <v-spacer></v-spacer>
    <span class="component-info">
        <p> </p>
    </span>

    <v-layout row wrap v-if="isCallsiteSelected == true">
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" @click="clickCallsite">
            Reveal
        </v-btn>
    </v-layout>

    <v-layout row wrap v-if="isModuleSelected == true">
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" :class="isEntryFunctionSelected"
            @click="showEntryFunctions">
            Entry call sites
        </v-btn>
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" :class="isCalleeSelected"
            @click="showExitFunctions">
            Callees
        </v-btn>
        <v-spacer></v-spacer>
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" v-if="showSplitButton == 'true'"
            @click="split">
            Split
        </v-btn>
    </v-layout>

    <span class="component-data">
        <p class="subtitle-2"> {{numberOfIntersectionCallsites}} call sites.</p>
    </span>
    <v-container class="auxiliary-node" v-for="callsite in intersectionCallsites" :id="getID(callsite.id)">
        <v-layout row wrap>
            <v-flex md1>
                <template>
                    <v-card width="25px" class="mx-auto" tile outlined>
                        <v-tooltip bottom>
                            <template v-slot:activator="{ on }">
                                <v-flex text-xs-center
                                :id="callsite.name"  
                                v-on="on" 
                                :class="selectClassName[callsite.name]"
                                    @click="changeSelectedClassName">
                                    {{formatNumberOfHops(callsite.component_level)}}
                                </v-flex>
                            </template>
                            <span>
                                Callsite depth:{{callsite.component_level}}
                            </span> 
                        </v-tooltip>
                    </v-card>
                </template>
            </v-flex>

            <v-flex md11>
                <template>
                    <v-tooltip bottom>
                        <template v-slot:activator="{ on }">
                            <v-flex class="pl-2 subtitle-2 font-weight-black" v-on="on">
                                {{formatName(callsite.name)}}
                            </v-flex>
                        </template>
                        <span>{{callsite.name}}</span>
                    </v-tooltip>
                </template>
            </v-flex>
        </v-layout>

        <template>
            <v-layout row wrap>
                <div class="subtitle-2">
                   Module: {{formatModule(callsite.module)}}
                </div>
            </v-layout>
            <v-layout row wrap>
                <div class="subtitle-2">
                    Inc. runtime : {{targetMeans[callsite.name]}}
                </div>
                <v-spacer></v-spacer>
            </v-layout>
            <v-layout row wrap>
                <div class="subtitle-2">
                    Exc. runtime : {{targetMeans[callsite.name]}}
                </div>
            </v-layout>
        </template>

        <template>
            <BoxPlot :ref="callsite.id" :callsite="callsite" />
        </template>
        
    </v-container>
</v-layout>