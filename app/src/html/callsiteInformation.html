<!--
/*******************************************************************************
 * Copyright (c) 2020, Lawrence Livermore National Security, LLC.
 * Produced at the Lawrence Livermore National Laboratory.
 *
 * Written by Suraj Kesavan <spkesavan@ucdavis.edu>.
 *
 * LLNL-CODE-740862. All rights reserved.
 *
 * This file is part of CallFlow. For details, see:
 * https://github.com/LLNL/CallFlow
 * Please also read the LICENSE file for the MIT License notice.
 ******************************************************************************/
-->
<v-layout row wrap :id="id">
    <v-chip class="chip" chips color="teal" label outlined clearable> {{ message }} </v-chip>
    <v-spacer></v-spacer>
    <span class="component-info">
        <p> </p>
    </span>

    <v-layout row wrap v-if="isCallsiteSelected == true">
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" @click="clickCallsite">
            Reveal
        </v-btn>
    </v-layout>

    <v-layout row wrap v-if="isModuleSelected == true">
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" :class="isEntryFunctionSelected"
            @click="showEntryFunctions">
            Entry call sites
        </v-btn>
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" :class="isCalleeSelected"
            @click="showExitFunctions">
            Callees
        </v-btn>
        <v-spacer></v-spacer>
        <v-btn class="ma-1 reveal-button" small tile outlined color="white" v-if="showSplitButton == 'true'"
            @click="split">
            Split
        </v-btn>
    </v-layout>

    <span class="component-data">
        <p class="subtitle-2"> {{numberOfIntersectionCallsites}} call sites.</p>
    </span>
    <v-container class="auxiliary-node" v-for="callsite in intersectionCallsites" :id="getID(callsite.id)">
        <v-layout row wrap>
            <v-flex md1>
                <v-card width="20px" class="mx-auto" tile outlined>
                    <v-flex :id="callsite.name" text-xs-center :class="selectClassName[callsite.name]"
                        @click="changeSelectedClassName">
                        {{formatNumberOfHops(callsite.component_level)}}
                    </v-flex>
                </v-card>
            </v-flex>
            <v-flex md9>
                <template>
                    <v-tooltip bottom>
                        <template v-slot:activator="{ on }">
                            <v-flex class="pl-2 subtitle-2 font-weight-black" v-on="on">
                                {{formatModule(callsite.module)}}={{formatName(callsite.name)}}
                            </v-flex>
                        </template>
                        <span>{{callsite.module}}={{callsite.name}}</span>
                    </v-tooltip>
                </template>
            </v-flex>
            <v-flex md2>
                <v-btn :id="callsite.name" icon color=" lighten-2" v-if="callsite.reveal == false"
                    @click=showIntersectionBoxPlot>
                    <v-icon>keyboard_arrow_down</v-icon>
                </v-btn>
                <v-btn :id="callsite.name" icon color="lighten-2" v-if="callsite.reveal == true"
                    @click=hideIntersectionBoxPlot>
                    <v-icon>keyboard_arrow_up</v-icon>
                </v-btn>
            </v-flex>
        </v-layout>

        <template v-if="callsite.reveal == false">
            <v-layout row wrap>
                <div class="subtitle-2" :style="'color: ' + targetColor">
                    Mean : {{targetMeans[callsite.name]}}
                </div>
                <v-spacer></v-spacer>
                <div class="subtitle-2" :style="'color: ' + targetColor">Std. Dev. :
                    {{targetStandardDeviation[callsite.name]}}
                </div>
            </v-layout>
        </template>

        <template>
            <BoxPlot :ref="callsite.id" :callsite="callsite" showTarget=false />
        </template>
        
    </v-container>
</v-layout>