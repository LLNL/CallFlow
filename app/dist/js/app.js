(function(t){function e(e){for(var s,r,n=e[0],l=e[1],d=e[2],h=0,f=[];h<n.length;h++)r=n[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(f.length)f.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,n=1;n<i.length;n++){var l=i[n];0!==a[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},a={app:0},o=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var c=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0491":function(t,e,i){"use strict";var s=i("34e8"),a=i.n(s);a.a},1037:function(t,e,i){"use strict";var s=i("49b3"),a=i.n(s);a.a},2115:function(t,e,i){"use strict";var s=i("6083"),a=i.n(s);a.a},"34a2":function(t,e,i){"use strict";var s=i("8646"),a=i.n(s);a.a},"34e8":function(t,e,i){},"40de":function(t,e,i){},"49b3":function(t,e,i){},"4cca":function(t,e,i){"use strict";var s=i("40de"),a=i.n(s);a.a},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),a=i("8c4f"),o=i("5f5b"),r=i("43f9"),n=i.n(r),l=(i("51def"),i("e094"),i("bf40"),i("d1e7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-app-bar",{attrs:{color:"teal",id:"toolbar",app:""}},[i("div",{staticClass:"toolbar-title"},[t._v(" CallFlow ")]),i("v-btn",{staticClass:"mr-md-4"},[i("router-link",{attrs:{to:"/cct",replace:""}},[t._v("CCT")])],1),i("v-btn",{staticClass:"mr-md-4"},[i("router-link",{attrs:{to:"/super_graph",replace:""}},[t._v("Super Graph")])],1),t.profiles.length>1?i("v-btn",{staticClass:"mr-md-4"},[i("router-link",{attrs:{to:"/ensemble_super_graph",replace:""}},[t._v("Ensemble Super Graph")])],1):t._e()],1),i("v-main",[i("router-view")],1),i("Footer",{ref:"Footer",attrs:{text:t.footerText,year:t.year}})],1)}),d=[],c=i("2f62"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-footer",{attrs:{id:"footer",color:"teal",app:""}},[t._v(" "+t._s(t.text)+" "),i("v-spacer"),i("span",[t._v("Â© "+t._s(t.year))])],1)},f=[],p={name:"Footer",props:["text","year"]},u=p,m=(i("5919"),i("2877")),g=i("6544"),b=i.n(g),x=i("553a"),y=i("2fa4"),v=Object(m["a"])(u,h,f,!1,null,"1d7f7982",null),C=v.exports;b()(v,{VFooter:x["a"],VSpacer:y["a"]});var S={name:"App",components:{Footer:C},data:()=>({footerText:"Lawrence Livermore National Laboratory and VIDi Labs, University of California, Davis",year:"2021",isDataReady:!1}),mounted(){document.title="CallFlow",this.setViewDimensions()},computed:{...Object(c["c"])({profiles:"getProfiles"})},methods:{setViewDimensions(){console.log("[App] Set view dimensions.");let t=0;null!=document.getElementById("toolbar")&&(t=document.getElementById("toolbar").clientHeight);let e=0;null!=document.getElementById("footer")&&(e=document.getElementById("footer").clientHeight),this.$store.viewWidth=window.innerWidth,this.$store.viewHeight=window.innerHeight-t-e}}},_=S,M=(i("9993"),i("7496")),w=i("40dc"),k=i("8336"),T=i("f6c4"),$=Object(m["a"])(_,l,d,!1,null,null,null),P=$.exports;b()($,{VApp:M["a"],VAppBar:w["a"],VBtn:k["a"],VMain:T["a"]});var R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-flex",[i("v-row",{attrs:{id:"top-half"}},[i("v-col",{attrs:{cols:"5"}},[i("ConfigInformation")],1),i("v-col",{attrs:{cols:"7"}},[i("ProfileInformation")],1)],1),i("v-row",[i("TimeSeries")],1)],1)},O=[],D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","v-if":t.data}},[i("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[i("v-card-title",{staticClass:"pa-4 pb-2"},[t._v(" Configuration ")]),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v("Experiment: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(t.data.experiment)+" ")])],1),i("v-divider"),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v("Number of Runs: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(t.runs.length)+" ")])],1),i("v-divider"),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v("Profile format: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(t.data.profile_format_summary))])],1),i("v-divider"),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v("Number of nodes: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(Object.keys(t.data.module_callsite_map).length+" modules, "+(Object.keys(t.data.callsite_module_map).length-1)+" callsites")+" ")])],1),i("v-divider"),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v("Data path: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(t.data.data_path))])],1),i("v-divider"),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v(".callflow save path: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(t.data.save_path))])],1),i("v-divider"),i("v-row",{staticClass:"ma-0 pa-0 pb-0 mb-0"},[i("v-col",{attrs:{cols:"5"}},[i("b",[t._v("Metric columns: ")])]),i("v-col",{attrs:{cols:"7"}},[t._v(t._s(t.data.time_columns))])],1)],1)],1)},E=[],A={name:"ConfigInformation",beforeCreate(){this.$store.dispatch("fetchConfig")},computed:{...Object(c["c"])({data:"getConfig",runs:"getRuns"})}},H=A,B=(i("0491"),i("b0af")),I=i("99d9"),G=i("62ad"),z=i("a523"),N=i("ce7e"),L=i("0fd9"),j=Object(m["a"])(H,D,E,!1,null,"063bcdce",null),V=j.exports;b()(j,{VCard:B["a"],VCardTitle:I["a"],VCol:G["a"],VContainer:z["a"],VDivider:N["a"],VRow:L["a"]});var W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:""}},[i("v-card",{attrs:{tile:""}},[i("v-card-title",[t._v("Summary")]),i("v-data-table",{attrs:{dense:"",headers:t.headers,items:t.data,loading:t.isLoading,"footer-props":t.footerProps,"loading-text":"Loading... Please wait",options:t.pagination,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:options":function(e){t.pagination=e},"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",[i("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.run))]),i("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.meantime))]),i("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.nranks))]),i("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.ncallsites))]),i("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.nedges))])])]}}])})],1)],1)},F=[],q={name:"Summary",data:()=>({headers:[{text:"Run",value:"run"},{text:"Mean runtime",value:"meantime"},{text:"Number of ranks",value:"nranks"},{text:"Number of call sites",value:"ncallsites"},{text:"Number of calls",value:"nedges"}],isLoading:!1,sortBy:"meantime",sortDesc:!0,footerProps:{"items-per-page-options":[5,10,20,50,-1]},pagination:{rowsPerPage:7,page:1}}),computed:{...Object(c["c"])({data:"getProfiles"})}},Y=q,X=(i("2115"),i("8fea")),U=Object(m["a"])(Y,W,F,!1,null,"28a3c386",null),Q=U.exports;b()(U,{VCard:B["a"],VCardTitle:I["a"],VContainer:z["a"],VDataTable:X["a"]});var K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:""}},[i("v-card",{attrs:{tile:""}},[i("v-row",{attrs:{id:"settings"}},[i("v-col",{attrs:{cols:"2"}},[i("v-card-title",{staticClass:"pa-2 pt-0"},[t._v(" Timeline View ")])],1),i("v-col",{attrs:{cols:"2"}}),i("v-col",{attrs:{cols:"2"}},[i("v-select",{attrs:{dense:"",label:"Chart Type",items:t.chartTypes,"menu-props":{maxHeight:"200"},"persistent-hint":""},model:{value:t.selectedChartType,callback:function(e){t.selectedChartType=e},expression:"selectedChartType"}})],1),i("v-col",{attrs:{cols:"2"}},[i("v-select",{attrs:{dense:"",label:"Y axis bandwidth",items:t.seriesTypes,"menu-props":{maxHeight:"200"},"persistent-hint":""},model:{value:t.selectedSeriesType,callback:function(e){t.selectedSeriesType=e},expression:"selectedSeriesType"}})],1),i("v-col",{attrs:{cols:"2"}},[i("v-select",{attrs:{dense:"",label:"Metric",items:t.metrics,"menu-props":{maxHeight:"200"},"persistent-hint":""},model:{value:t.selectedMetric,callback:function(e){t.selectedMetric=e},expression:"selectedMetric"}})],1),i("v-col",{attrs:{cols:"2"}},[i("v-text-field",{attrs:{dense:"",label:"Top N-callsites",type:"number","menu-props":{maxHeight:"200"},"persistent-hint":""},model:{value:t.selectedTopCallsiteCount,callback:function(e){t.selectedTopCallsiteCount=e},expression:"selectedTopCallsiteCount"}})],1)],1),i("v-row",{staticClass:"ml-3"},[i("svg",{attrs:{id:t.id,width:t.width,height:t.height,"pointer-events":"all"}})])],1)],1)},Z=[],J=i("5698");function tt(t){if(t.length<20)return t;let e=t.trunc(20);return e}function et(t){if(0==t)return t;let e=J["i"](".3");return e(t)}function it(t){return 1==t?t+" run":t+" runs"}function st(t){let e=J["i"](".3");return e(t)}function at(t,e=0){let i=J["i"](".3"),s=i(t);if(0==s)return[0,0,e];let a=0,o=0,r=0;if(-1==s.indexOf("e"))return[s,0,0];{let t=s.toString().split("e");a=parseInt(t[1].split("+")[1]),o=parseInt(a)-e,r=parseFloat(t[0])}return[r.toFixed(3),a,e]}function ot(t){let e=J["i"](".3"),i=e(t),s=i;return s=-1!=i.indexOf("e")?parseInt(i.toString().split("e")[1].split("+")[1]):0,s}function rt(t,e){return t.length>e?t.substr(0,e-1)+"...":t}function nt(t,e){const i=J["y"]("#"+t).append("svg");i.append("text").attrs({x:-99999,y:-99999}).text(t=>e);const s=i.node().getBBox();return i.remove(),{width:s.width,height:s.height}}function lt(t,e){if(!t||0===t.length)return{height:0,width:0};const i=J["y"]("body").append("svg").attr("class","dummy");i.append("text").attrs({x:-1e3,y:-1e3}).text(t).call(dt,e);const s=i.node().getBBox();return i.remove(),{height:s.height,width:s.width}}function dt(t,e){let i,s=t.text().split(/\s+/).reverse(),a=[],o=0,r=1.2,n=0,l=t.text(null).append("tspan").attr("dy",n+"em"),d=t.attr("x"),c=t.attr("y");while(i=s.pop())a.push(i),l.text(a.join(" ")),l.node().getComputedTextLength()>e&&(a.pop(),l.text(a.join(" ")),a=[i],l=t.append("tspan").attr("x",d).attr("y",c).attr("dy",++o*r+n+"em").text(i))}function ct(t,e){return t["modules"][e]}function ht(t,e){const i=(t,e)=>t+e,s=1*t.reduce(i)/t.length,a=1*e.reduce(i)/e.length,o=t.map((function(t){return Math.pow(t-s,2)})).reduce(i),r=e.map((function(t){return Math.pow(t-a,2)})).reduce(i),n=t.map((function(t,i){return(t-s)*(e[i]-a)})).reduce(i),l=n/o,d=a-s*l,c=Math.pow(n,2)/(o*r);return[l,d,c]}function ft(t){const e=parseFloat(Math.min(...t)),i=parseFloat(Math.max(...t));return[e,i]}function pt(t){let e=0,i=0;for(let s of t)e=parseFloat(Math.min(e,Math.min(...s))),i=parseFloat(Math.max(i,Math.max(...s)));return[e,i]}String.prototype.trunc=String.prototype.trunc||function(t){return this.length>t?this.substr(0,t-1)+"...":this},Array.prototype.SumArray=function(t){var e=[];if(null!=t&&this.length==t.length)for(var i=0;i<t.length;i++)e.push(this[i]+t[i]);return e},Array.prototype.remove=function(){var t,e,i=arguments,s=i.length;while(s&&this.length){t=i[--s];while(-1!==(e=this.indexOf(t)))this.splice(e,1)}return this};var ut={name:"TimeSeries",data:()=>({id:"timeline-overview",data:[],nodes:[],height:0,width:0,yMin:0,yMax:0,padding:{top:10,bottom:40,left:20,right:20},dimension:{chartTitle:20,xAxis:20,yAxis:20,xTitle:20,yTitle:20},chartTypes:["bar","area","line"],selectedChartType:"bar",chartXAttr:"datasets",seriesTypes:["stacked","normalized"],selectedSeriesType:"normalized",metrics:["time","time (inc)"],selectedMetric:"time (inc)",selectedTopCallsiteCount:5,selectedXDomain:"normal",selectedntype:"module",ntypes:["module","callsite"]}),computed:{...Object(c["c"])({timeline:"getTimeline"})},watch:{timeline:function(t){console.log("[Timeline] data:",t),this.nodes=t.nodes,this.data=Object.values(t.d).map(t=>t),this.visualize()},selectedTopCallsiteCount(){this.clear(),this.$store.dispatch("fetchTimeline",{ntype:this.selectedntype,ncount:this.selectedTopCallsiteCount,metric:this.selectedMetric})},selectedMetric(){this.clear(),this.$store.dispatch("fetchTimeline",{ntype:this.selectedntype,ncount:this.selectedTopCallsiteCount,metric:this.selectedMetric})},selectedSeriesType(){this.clear(),this.$store.dispatch("fetchTimeline",{ntype:this.selectedntype,ncount:this.selectedTopCallsiteCount,metric:this.selectedMetric})},selectedChartType(){this.clear(),this.$store.dispatch("fetchTimeline",{ntype:this.selectedntype,ncount:this.selectedTopCallsiteCount,metric:this.selectedMetric})}},mounted(){this.$store.dispatch("fetchTimeline",{ntype:this.selectedntype,ncount:this.selectedTopCallsiteCount,metric:this.selectedMetric})},methods:{visualize(){this.width=this.$store.viewWidth-this.padding.left-this.padding.right;const t=document.getElementById("settings").clientHeight,e=document.getElementById("top-half").clientHeight,i=this.$store.viewHeight-t-e;i<.5*this.$store.viewHeight?this.height=400:this.height=i,this.svg=J["y"]("#"+this.id);const s=100,a=0;this.mainSvg=this.svg.append("g").attrs({id:"container",transform:`translate(${s}, ${a})`}),this.plot(),this.axis(),this.label(),this.colorMap()},plot(){let t=null,e=[];"stacked"==this.selectedSeriesType?(t=J["A"]().keys(this.nodes)(this.data).map(t=>(t.forEach(e=>e.key=t.key),t)),e=[J["n"](t,t=>J["n"](t,t=>t[1])),J["m"](t,t=>J["m"](t,t=>t[1]))]):"normalized"==this.selectedSeriesType&&(t=J["A"]().keys(this.nodes).offset(J["B"])(this.data).map(t=>(t.forEach(e=>e.key=t.key),t)),e=[0,1]),this.data.reverse(),this.color=J["u"]().domain(t.map(t=>t.key)).range(J["x"][t.length]).unknown("#ccc"),"normal"==this.selectedXDomain?this.x=J["r"]().domain(this.data.map(t=>t.name)).range([0,this.width-2*(this.padding.right+this.padding.left)]):"time"==this.selectedXDomain&&(this.x=J["v"]().domain(J["h"](this.data,t=>t[this.chartXAttr])).range([0,this.width-2*(this.padding.right+this.padding.left)])),this.y=J["s"]().domain(e).nice(5).range([this.height-2*this.padding.bottom,2*this.padding.top]),"bar"==this.selectedChartType?this.barChart(t,e):"area"==this.selectedChartType?this.areaChart(t,e):"line"==this.selectedChartType&&this.lineChart(t,e)},barChart(t){this.mainSvg.append("g").selectAll("g").data(t).join("g").attr("fill",t=>this.color(t.key)).selectAll("rect").data(t=>t).join("rect").attr("x",t=>this.x(t.data.name)).attr("y",t=>this.y(t[1])).attr("height",t=>this.y(t[0])-this.y(t[1])).attr("width",this.x.bandwidth()).append("title").text(t=>`[${t.data.name}] ${t.key} - ${st(t.data[t.key])}`)},areaChart(t){const e=J["a"]().x(t=>this.x(t.data.name)+this.x.bandwidth()/2).y0(t=>this.y(t[0])).y1(t=>this.y(t[1]));this.mainSvg.append("g").selectAll("path").data(t).join("path").attr("stroke",({key:t})=>this.color(t)).attr("fill",({key:t})=>this.color(t)).attr("stroke-width",5).attr("d",e).append("title").text(({key:t})=>t)},lineChart(t){const e=J["l"]().x(t=>this.x(t.data.name)+this.x.bandwidth()/2).y(t=>this.y(t[0]));this.mainSvg.append("g").selectAll("path").data(t).join("path").attr("stroke",({key:t})=>this.color(t)).attr("fill","transparent").attr("stroke-width",2.5).attr("d",e).append("title").text((t,e)=>`[${t[e].data.name}] ${t[e].key} - ${st(t[e].data[t[e].key])}`),this.mainSvg.append("g").data(t).append("circle").attr("fill","transparent").attr("stroke","red").attr("cx",(t,e)=>this.x(t[e].data.name)).attr("cy",(t,e)=>this.y(t[e][1])).attr("r",4)},axis(){this.xAxis=J["c"](this.x).tickPadding(10).tickFormat((t,e)=>""+t),this.yAxis=J["d"](this.y).tickPadding(10).tickFormat((t,e)=>""+st(t)),this.xAxisSVG=this.mainSvg.append("g").attrs({transform:`translate(0, ${this.height-2*this.padding.bottom})`,class:"x-axis","stroke-width":"1.5px"}).call(this.xAxis),this.yAxisSVG=this.mainSvg.append("g").attrs({transform:"translate(0, 0)",class:"y-axis","stroke-width":"1.5px"}).call(this.yAxis)},label(){this.isLabelled=!0,this.svg.append("text").attrs({class:"axis-labels",transform:`translate(${this.width-2*this.padding.left}, ${this.height-this.padding.top})`}).style("text-anchor","middle").text(this.chartXAttr),this.svg.append("text").attrs({class:"axis-labels",transform:`translate(15, ${this.height/2}) rotate(-90)`}).style("text-anchor","middle").text((t,e)=>this.selectedMetric)},colorMap(){let t=this.width,e=this.nodes.length,i=this.height,s=10,a=10,o=3*s+a,r=t/e;J["y"](".colorMapSVG").remove();let n=this.svg.append("g").attrs({transform:`translate(20, ${-2*this.padding.top})`,width:this.width,height:o,class:"colorMapSVG"});n.selectAll("circle").data(this.nodes).enter().append("circle").style("stroke","gray").style("fill",(t,e)=>this.color(this.nodes[e])).attrs({r:s,cx:(t,e)=>e*r+s,cy:s+i}),n.selectAll("text").data(this.nodes).enter().append("text").text((t,e)=>this.nodes[e]).attrs({x:(t,e)=>e*r+2*s+a,y:.5*s+a+i,"font-family":"sans-serif","font-size":1.5*s+"px",fill:"black"})},clear(){J["z"]("#container").remove(),J["z"](".axis-labels").remove()}}},mt=ut,gt=i("b974"),bt=i("8654"),xt=Object(m["a"])(mt,K,Z,!1,null,null,null),yt=xt.exports;b()(xt,{VCard:B["a"],VCardTitle:I["a"],VCol:G["a"],VContainer:z["a"],VRow:L["a"],VSelect:gt["a"],VTextField:bt["a"]});var vt={name:"Summary",components:{ConfigInformation:V,ProfileInformation:Q,TimeSeries:yt},computed:{...Object(c["c"])({summary:"getSummary",runs:"getRuns",profiles:"getProfiles"})},beforeCreate(){this.$store.dispatch("fetchSummary")}},Ct=vt,St=i("0e8f"),_t=Object(m["a"])(Ct,R,O,!1,null,null,null),Mt=_t.exports;b()(_t,{VCol:G["a"],VFlex:St["a"],VRow:L["a"]});var wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"inspire"}},[Object.keys(t.metricTimeMap).length>0?i("Toolbar",{attrs:{isSettingsOpen:t.isSettingsOpen},on:{"update:isSettingsOpen":function(e){t.isSettingsOpen=e},"update:is-settings-open":function(e){t.isSettingsOpen=e}}}):t._e(),i("v-navigation-drawer",{attrs:{fixed:""},model:{value:t.isSettingsOpen,callback:function(e){t.isSettingsOpen=e},expression:"isSettingsOpen"}},[i("v-card",{attrs:{"fill-height":""}},[i("v-col",[i("v-row",[i("v-icon",{attrs:{color:"teal"}},[t._v("settings")]),i("v-col",{staticClass:"center teal--text",attrs:{cols:"9"}},[t._v("SETTINGS")]),i("v-btn",{attrs:{icon:""}},[i("v-icon",{on:{click:function(e){return t.closeSettings()}}},[t._v("close")])],1)],1),i("v-row",{attrs:{align:"center",justify:"space-around"}},[i("v-btn",{staticClass:"mx-0",attrs:{icon:""}},[t._v(" Reload "),i("v-icon",{on:{click:function(e){return t.reset()}}},[t._v("refresh")])],1)],1)],1)],1),i("Settings",{ref:"Settings"})],1),i("v-main",{staticClass:"pt-0"},[i("splitpanes",{attrs:{id:"cct-dashboard"}},[i("splitpanes",{attrs:{horizontal:"","splitpanes-size":t.isComparisonMode?50:100}},[i("NodeLink",{ref:"CCT1"})],1)],1)],1)],1)},kt=[],Tt=i("512e"),$t=i.n(Tt),Pt=(i("c1ea"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-col",[i("v-row",[i("v-col",{attrs:{cols:"4"}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}})],1),i("v-col",{attrs:{cols:"8"}},[i("ColorMap",{ref:"ColorMap"})],1),i("Loader",{attrs:{isDataReady:t.isDataReady}}),i("svg",{attrs:{id:t.id,width:t.width,height:t.height,left:t.margin.left,top:t.margin.top}},[i("g",{attrs:{id:"container"}}),i("ToolTip",{ref:"ToolTip"})],1)],1)],1)}),Rt=[],Ot=i("8701"),Dt=i.n(Ot);const Et=new s["default"];var At=Et,Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{staticClass:"ml-1 mt-2"},[i("v-col",{attrs:{cols:"auto"}},[i("v-chip",{staticClass:"pa-1 chip",attrs:{chips:"",color:"teal",label:"",clearable:""}},[i("span",{staticClass:"ma-2"},[t._v(" "+t._s(t.title)+" ")]),i("v-tooltip",{attrs:{bottom:"","max-width":"300"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"white",dark:""}},s),[t._v("info")])]}}])},[i("span",{staticClass:"chip-summary"},[t._v(" "+t._s(t.summary)+" ")])])],1)],1),t.info?i("v-col",{staticClass:"chip-info",attrs:{cols:"auto"}},[t._v(" "+t._s(t.info)+" ")]):t._e()],1)},Bt=[],It={name:"InfoChip",props:["title","summary","info"]},Gt=It,zt=(i("4cca"),i("cc20")),Nt=i("132d"),Lt=i("3a2f"),jt=Object(m["a"])(Gt,Ht,Bt,!1,null,"dc1a50d4",null),Vt=jt.exports;b()(jt,{VChip:zt["a"],VCol:G["a"],VIcon:Nt["a"],VRow:L["a"],VTooltip:Lt["a"]});var Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isDataReady?t._e():i("v-container",{attrs:{"fill-height":"",fluid:""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{align:"center"}},[i("v-progress-circular",{attrs:{indeterminate:"",color:"teal"}})],1)],1)],1)},Ft=[],qt={name:"Loader",props:["isDataReady"]},Yt=qt,Xt=i("490a"),Ut=Object(m["a"])(Yt,Wt,Ft,!1,null,null,null),Qt=Ut.exports;b()(Ut,{VCol:G["a"],VContainer:z["a"],VProgressCircular:Xt["a"],VRow:L["a"]});var Kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{id:t.id,width:t.containerWidth,height:t.containerHeight}})},Zt=[],Jt=(i("883e"),{name:"ColorMap",components:{},data:()=>({id:"ensemble-supergraph-panel",transitionDuration:1e3,width:230,containerWidth:660,height:20,containerHeight:100,colorMin:0,colorMax:0,offset:30,padding:{top:0,bottom:30,right:0}}),computed:{...Object(c["c"])({showTarget:"getShowTarget",comparisonMode:"getComparisonMode",generalColors:"getGeneralColors",selectedColorPoint:"getColorPoint"})},methods:{init(t){this.color=t,this.colorMin=this.color.getDomain()[0],this.colorMax=this.color.getDomain()[1],this.svg=J["y"]("#"+this.id).append("g").attrs({id:"Colormap"}),this.render()},render(){this._legends(),this._color_map()},_legends(){this.clearLegends(),"ESG"==this.selectedMode&&(this.showTarget&&!this.comparisonMode&&this.drawLegend("Target run",this.padding.right,4*this.padding.bottom,this.generalColors.target),this.drawLegend("Ensemble of runs",this.padding.right,3*this.padding.bottom,this.generalColors.intermediate))},_color_map(){this.clearColorMap();let t="",e=1;"time"==this.color.metric||"time (inc)"==this.color.metric?t=this.color.metric:"MeanGradients"==this.color.metric?(t="Distribution colormap",e=2):"MeanDiff"==this.color.metric?(t="Mean Difference colormap",e=2):"RankDiff"==this.color.metric&&(t="Rank Difference colormap",e=2),"MeanGradients"!==this.color.metric?(this.colorMinText=et(this.colorMin),this.colorMaxText=et(this.colorMax)):(this.colorMinText=this.colorMin,this.colorMaxText=this.colorMax),this.drawColorMap(t,this.containerWidth/2-this.padding.right,this.padding.bottom*e)},drawLegend(t,e,i,s){this.svg.append("circle").attrs({r:10,cx:10,cy:10,class:"legend",transform:`translate(${e}, ${i})`,fill:s}),this.svg.append("text").attrs({x:30,y:15,class:"legend-text",transform:`translate(${e}, ${i})`}).text(t).style("font-size",14).style("fill","#444444")},drawColorMap(t,e,i){let s=this.selectedColorPoint,a=(this.colorMax-this.colorMin)/(s-1);for(let o=0;o<s;o+=1){let t=this.colorMin+a*(s-1-o);this.svg.append("rect").attrs({width:this.width/s,height:this.height,x:(s-o-1)*(this.width/s),class:"colormap",transform:`translate(${e}, ${i})`,fill:this.color.getColorByValue(t)})}this.svg.append("text").style("fill","black").style("font-size","14px").attrs({dy:".35em",y:10,x:-165,"text-anchor":"middle",class:"colormap-text",transform:`translate(${e}, ${i})`}).text(t),this.svg.append("text").style("fill","black").style("font-size","14px").attrs({dy:".35em","text-anchor":"middle",y:10,x:-40,class:"colormap-text",transform:`translate(${e}, ${i})`}).text(this.colorMinText),this.svg.append("text").style("fill","black").style("font-size","14px").attrs({dy:".35em","text-anchor":"middle",y:10,x:40,class:"colormap-text",transform:`translate(${e+this.width}, ${i})`}).text(this.colorMaxText)},clearColorMap(){J["z"]("#colormap").remove()},clear(){J["z"](".colormap-text").remove(),J["z"](".colormap").remove()},clearTargetLegends(){J["z"](".target-circle-legend").remove(),J["z"](".target-circle-legend-text").remove()},clearLegends(){J["z"](".legend").remove(),J["z"](".legend-text").remove()},update(t,e,i,s){this.clear(),this.colorMin=i,this.colorMax=s,"MeanDiff"!=t&&"RankDiff"!=t||(this.colorMin=-1*Math.max(Math.abs(i),Math.abs(s)),this.colorMax=1*Math.max(Math.abs(i),Math.abs(s))),this.color=e,this.render()}}}),te=Jt,ee=Object(m["a"])(te,Kt,Zt,!1,null,null,null),ie=ee.exports,se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:"tooltip"}})},ae=[],oe={template:"",name:"ToolTip",computed:{...Object(c["c"])({summary:"getSummary",selectedTargetRun:"getSelectedTargetRun"})},data:()=>({id:"node-tooltip",textCount:0,textxOffset:20,textyOffset:20,textPadding:15,margin:35,mousePosX:0,mousePosY:0,prevMousePosX:void 0,prevMousePosY:void 0}),methods:{init(t){this.id=t;const e=J["y"]("#"+this.id);this.toolTipG=e.append("g")},positionX(){let t=0;return this.mousePosX>=this.$store.viewWidth/2&&(t=this.mousePosX+this.textxOffset),t=this.mousePosX-this.textxOffset,t},positionY(){let t=0;return this.mousePosY>=this.$store.viewHeight/2&&(t=this.mousePosY+this.textyOffset),t=this.mousePosY-this.textyOffset,t},visualize(t){this.mousePos=J["o"](J["y"]("#"+this.id).node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.clear(),this.render(t),this.prevMousePosX=this.mousePosX,this.prevMousePosY=this.mousePosY},render(t){this.xOffset=this.positionX()+40,this.yOffset=this.positionY()+40;const e=J["s"]().domain([2,11]).range([50,150]);this.toolTipG.attr("height",e(10)+"px"),this.toolTipRect=this.toolTipG.append("rect").attrs({class:"tooltip-container",fill:"#fff",stroke:"black",rx:"10px","fill-opacity":1,width:325,height:100}).attrs({x:this.xOffset,y:this.yOffset}),this.runtimeInformation(t)},addText(t){let e=350;this.textCount+=1,this.toolTipText=this.toolTipG.append("text").style("font-family","sans-serif").style("font-size","").attrs({class:"tooltip-content",x:()=>this.xOffset+this.margin,y:()=>this.yOffset+this.textyOffset+this.textPadding*this.textCount+"px"}).text(t).call(dt,e)},runtimeInformation(t){this.addText("Name: "+rt(t.id,40)),this.addText("Module: "+this.summary[this.selectedTargetRun].modules[t.module]),this.addText("Inclusive Time: "+et(t["time (inc)"])),this.addText("Exclusive Time: "+et(t["time"]))},clear(){this.textCount=0,J["z"](".tooltip-container").remove(),J["z"](".tooltip-content").remove()}}},re=oe,ne=Object(m["a"])(re,se,ae,!1,null,null,null),le=ne.exports,de={name:"NodeLink",components:{InfoChip:Vt,Loader:Qt,ColorMap:ie,ToolTip:le},data:()=>({id:"cct-overview",margin:{top:20,right:20,bottom:20,left:20},width:0,height:0,zoom:null,HAS_DATA_COLUMNS:["module"],has_data_map:{},title:"CCT view",infoSummary:"CCT view visualizes the unique call paths of a sampled profile. Each call site is colored based on the selected metric (use settings to change the metric). On click, each node's callers (green) and callees (purple) are highlighted using the links.",info:"",b_node_height:50,s_node_height:30,isDataReady:!1,firstRender:!0}),mounted(){let t=this;At.$on("reset-cct",()=>{console.log("[CCT] Resetting dataset to :",this.selectedTargetRun),t.clear(),t.isDataReady=!1,t.$store.dispatch("fetchCCT",{dataset:this.selectedTargetRun})})},computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",data:"getCCT"})},watch:{data:function(t){this.visualize(t)}},methods:{init(t){this.$store.dispatch("fetchCCT",{dataset:t})},visualize(){this.isDataReady=!0,this.width=this.$store.viewWidth-this.margin.right,this.height=this.$store.viewHeight-this.margin.bottom,this.svg=J["y"]("#"+this.id),this.info="Selected metric : "+this.selectedMetric,this.g=this.createGraph(),this.setHasDataMap(),this.nodes(this.data.nodes),this.edges(this.data.links);const t=this.svg.select("#container"),e=new Dt.a.render;this.zoom=J["D"]().on("zoom",(function(){t.attr("transform",J["g"].transform)})),this.svg.call(this.zoom),e(t,this.g),this.zoomTranslate();let i=this;this.svg.selectAll("g.node").on("click",(function(s){i.node_click_action(s),e(t,i.g),i.zoomTranslate()})),this.$refs.ColorMap.init(this.$store.runtimeColor),this.$refs.ToolTip.init(this.id),this.svg.selectAll(".cct-node").on("mouseover",(function(t,e){i.$refs.ToolTip.visualize(i.data.nodes[e])})),t.selectAll("g.node").attr("title",(function(t){return t}))},createGraph(){const t=new Dt.a.graphlib.Graph({directed:!0,multigraph:!1,compound:!0});return t.setGraph({rankDir:"TD",rankSep:50,marginx:30,marginy:30}),t},setCallsiteName(t){return void 0==t.name?t.id:t.name},setCallsiteColor(t){const e=this.$store.runtimeColor.getColor(t,this.selectedMetric),i=this.$store.runtimeColor.rgbArrayToHex(e),s=this.$store.runtimeColor.setContrast(i);return{node:i,text:s}},setCallsiteHTML(t,e){let i=t.name;i=tt(i.replace("<","").replace(">",""));const s="#fff"===e["text"]?"white-text":"black-text";let a=`<div><span class=${s} > ${i} </span> </div>`;if(this.has_data_map["module"]&&t.id!=t.name){let e=ct(this.$store,t.module);a+=`<br/><span class= ${s}><b>Module :</b>`+e+"</span> </div>"}return a},nodes(t){t.forEach((t,e)=>{const i=this.setCallsiteName(t),s=this.setCallsiteColor(t),a=this.setCallsiteHTML(t,s),o={...t,class:"cct-node",labelType:"html",label:a,fillColor:s["node"]};this.g.setNode(i,o)});let e=this;this.g.nodes().forEach((function(t){let i=e.g.node(t);void 0!=i&&(i.style=`fill: ${i.fillColor}; color: "#f00";`,i.rx=i.ry=8,i.id=i.name)}))},edges(t){for(let i=0;i<t.length;i+=1){let e="";e=1!=t[i]["count"]?""+t[i]["count"]:"",this.g.setEdge(t[i]["source"],t[i]["target"],{label:e,arrowhead:"vee"})}let e=this;this.g.edges().forEach(t=>{const i=e.g.edge(t);i.class="cct-edge",e.g.edge(t).style="fill: rgba(255,255,255, 0); stroke: #686868; stroke-width: 2.5px;"})},node_click_action(t){const e="fill: rgba(255,255,255, 0); stroke: #d5d5d5; stroke-width: 1.5px;",i="fill: #c5c5c5; stroke: #c5c5c5; stroke-width:4px;",s="fill: rgba(255,255,255, 0); stroke: #800080; stroke-width: 4px;",a="fill: #800080; stroke: #800080; stroke-width:1.5px;",o="fill: rgba(255,255,255, 0); stroke: #32CD32; stroke-width: 4px;",r="fill: #32CD32; stroke: #32CD32; stroke-width:1.5px;";let n=this.g.node(t).class,l=this;-1!=n.indexOf("highLight")?(this.g.node(t).class=n.toString().replace("highLight"," ").trim(),this.g.edges().forEach((function(t,s,a){let o=l.g.edge(t);o.style=e,o.arrowhead="vee",o.arrowheadStyle=i}))):(this.g.nodes().forEach((function(t){let e=l.g.node(t);n=e.class,"cct-node"!==n&&(e.class=n.replace("highLight"," ").trim())})),this.g.edges().forEach((function(n,d,c){let h=l.g.edge(n);h.style=e,h.arrowhead="vee",h.arrowheadStyle=i,n.v==t?(h.style=s,h.arrowhead="vee",h.arrowheadStyle=a):n.w==t&&(h.style=o,h.arrowhead="vee",h.arrowheadStyle=r)})),this.g.node(t).class+=" highLight")},zoomTranslate(){const t=this.g.graph().width,e=this.g.graph().height;let i=Math.min(this.width/t,this.height/e);i>1.4&&(i-=.1);const s=[.5*(this.width-t*i),.5*(this.height-e*i)];this.svg.call(this.zoom.transform,J["E"].translate(s[0],s[1]).scale(i))},setHasDataMap(){this.has_data_map={};for(let t=0;t<this.HAS_DATA_COLUMNS.length;t+=1){let e=this.HAS_DATA_COLUMNS[t];Object.keys(this.data["nodes"][0]).includes(e)?this.has_data_map[e]=!0:this.has_data_map[e]=!1}},clear(){J["z"](".cct-node").remove(),J["z"](".cct-edge").remove(),this.$refs.ColorMap.clear()}}},ce=de,he=(i("fe18"),Object(m["a"])(ce,Pt,Rt,!1,null,null,null)),fe=he.exports;b()(he,{VCol:G["a"],VRow:L["a"]});var pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0"},[i("v-app-bar",{attrs:{id:"toolbar",color:"teal",fixed:""}},[i("div",{attrs:{"align-left":""},on:{click:function(e){return e.stopPropagation(),t.openSettings()}}},[i("v-icon",{attrs:{color:"white"}},[t._v("settings")])],1),i("router-link",{attrs:{to:"/"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.navigate;return[i("a",{on:{click:function(t){return s.bind(t)}}},[t._t("default"),i("div",{staticClass:"toolbar-title"},[t._v(" CallFlow ")])],2)]}}],null,!0)}),i("RunSelection")],1)],1)},ue=[],me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"4"}},[i("v-select",{staticClass:"pt-8 pl-2",attrs:{dark:"",label:t.targetLabel,items:t.datasets,"menu-props":{maxHeight:"400"}},on:{input:t.updateTargetRun},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;return[t._v(" "+t._s(t.datasets.indexOf(i)+1)+". "+t._s(i)+" ")]}},{key:"item",fn:function(e){var i=e.item;return[t._v(" "+t._s(t.datasets.indexOf(i)+1)+". "+t._s(i)+" - "+t._s(t.formatRuntimeWithoutUnits(t.metricTimeMap[i]))+" ")]}}]),model:{value:t.targetRun,callback:function(e){t.targetRun=e},expression:"targetRun"}})],1),i("v-col",{attrs:{cols:"4"}},[i("v-select",{staticClass:"pt-8 pl-2",attrs:{disabled:!("ESG"===t.selectedMode),dark:"",label:t.compareLabel,items:t.datasetsWNoRun,"menu-props":{maxHeight:"400"}},on:{input:t.updateCompareRun},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;return[t._v(" "+t._s(t.datasets.indexOf(i)+1)+". "+t._s(i)+" - "+t._s(t.formatRuntimeWithoutUnits(t.metricTimeMap[i]))+" ")]}},{key:"item",fn:function(e){var i=e.item;return[t._v(" "+t._s(t.datasets.indexOf(i)+1)+". "+t._s(i)+" - "+t._s(t.formatRuntimeWithoutUnits(t.metricTimeMap[i]))+" ")]}}]),model:{value:t.compareRun,callback:function(e){t.compareRun=e},expression:"compareRun"}})],1)],1)},ge=[],be={data:()=>({name:"RunSelection",datasets:[],datasetsWNoRun:[],targetLabel:"",compareLabel:""}),mounted(){this.datasets=Object.keys(this.metricTimeMap),this.datasetsWNoRun=[...this.datasets,NaN],this.targetLabel="Select Target run (Sorted by "+this.selectedMetric+")",this.compareLabel="Select Compare run (Sorted by "+this.selectedMetric+")"},computed:{...Object(c["c"])({runs:"getRuns",metricTimeMap:"getMetricTimeMap",targetRun:"getSelectedTargetRun",compareRun:"getSelectedCompareRun",selectedMetric:"getSelectedMetric",selectedMode:"getSelectedMode",isComparisonMode:"getComparisonMode"})},methods:{formatRuntimeWithoutUnits(t){if(void 0==t)return"";let e=J["i"](".2"),i=e(t);return i},updateTargetRun(t){this.$store.commit("setSelectedTargetRun",t),this.$store.dispatch("reset")},updateCompareRun(t){0==t.length?(console.log("Disable comparison"),this.$store.commit("setComparisonMode",!1),this.$store.commit("setSelectedCompareRun",""),this.$store.dispatch("reset")):(console.log("Enable comparison"),this.$store.commit("setComparisonMode",!0),this.$store.commit("setSelectedCompareRun",t),this.$store.dispatch("updateNodeEncoding"))}}},xe=be,ye=Object(m["a"])(xe,me,ge,!1,null,null,null),ve=ye.exports;b()(ye,{VCol:G["a"],VRow:L["a"],VSelect:gt["a"]});var Ce={name:"Toolbar",components:{RunSelection:ve},props:["isSettingsOpen"],data:()=>({appName:"CallFlow"}),methods:{openSettings(){this.$emit("update:isSettingsOpen",!this.isSettingsOpen)}}},Se=Ce,_e=(i("fca0"),Object(m["a"])(Se,pe,ue,!1,null,"f2ba42a0",null)),Me=_e.exports;b()(_e,{VAppBar:w["a"],VContainer:z["a"],VIcon:Nt["a"]});var we=i("6149");const ke={0:[.31,.48,.65],1:[.94,.56,.22],2:[.87,.35,.36],3:[.47,.72,.7],4:[.36,.63,.32],5:[.93,.78,.33],6:[.69,.48,.63],7:[.99,.62,.66],8:[.61,.46,.38],9:[.73,.69,.67],blue:[.31,.48,.65],orange:[.94,.56,.22],red:[.87,.35,.36],teal:[.47,.72,.7],green:[.36,.63,.32],yellow:[.93,.78,.33],purple:[.69,.48,.63],pink:[.99,.62,.66],brown:[.61,.46,.38],gray:[.73,.69,.67]},Te={coolwarm:[[.33479085,.28308437,.75649522],[.33899903,.290177126,.762712568],[.343207654,.297250671,.768868416],[.347417048,.304305324,.774961783],[.351627529,.311341308,.780991701],[.355839407,.31835875,.786957213],[.36005298,.325357701,.792857371],[.364268538,.332338134,.798691243],[.368486361,.339299959,.804457904],[.372706719,.346243025,.810156445],[.376929872,.353167127,.815785967],[.381156069,.360072011,.821345583],[.385385551,.366957379,.826834419],[.389618546,.373822891,.832251614],[.393855272,.380668171,.837596318],[.398095935,.387492809,.842867695],[.402340732,.394296365,.848064921],[.406589846,.401078368,.853187185],[.410843451,.407838324,.85823369],[.415101708,.414575715,.863203651],[.419364766,.42129,.868096298],[.423632761,.42798062,.872910872],[.42790582,.434646997,.877646629],[.432184055,.441288536,.882302838],[.436467566,.447904626,.886878783],[.440756441,.454494645,.891373761],[.445050754,.461057956,.895787081],[.449350569,.46759391,.900118069],[.453655933,.474101849,.904366064],[.457966884,.480581104,.908530419],[.462283444,.487030998,.912610501],[.466605623,.493450846,.916605692],[.470933417,.499839955,.920515388],[.475266811,.506197626,.924339],[.479605773,.512523155,.928075953],[.483950261,.51881583,.931725687],[.488300218,.525074937,.935287658],[.492655572,.531299757,.938761334],[.497016241,.537489567,.9421462],[.501382127,.543643642,.945441756],[.505753118,.549761254,.948647516],[.510129092,.555841671,.951763009],[.514509909,.561884161,.954787781],[.51889542,.56788799,.957721391],[.52328546,.573852423,.960563413],[.527679851,.579776725,.96331344],[.532078401,.58566016,.965971076],[.536480908,.591501991,.968535941],[.540887154,.597301482,.971007674],[.545296909,.603057899,.973385925],[.54970993,.608770507,.975670362],[.554125961,.614438572,.977860667],[.558544733,.620061363,.97995654],[.562965965,.625638149,.981957693],[.567389365,.631168202,.983863856],[.571814625,.636650795,.985674775],[.576241429,.642085204,.987390209],[.580669445,.647470707,.989009935],[.585098332,.652806586,.990533745],[.589527737,.658092124,.991961445],[.593957293,.663326609,.99329286],[.598386625,.668509332,.994527827],[.602815344,.673639585,.995666201],[.607243051,.678716668,.996707851],[.611669336,.683739881,.997652664],[.61609378,.688708529,.998500538],[.620515949,.693621923,.999251393],[.624935404,.698479377,.999905158],[.629351691,.70328021,1.000461782],[.633764351,.708023743,1.000921227],[.63817291,.712709307,1.001283473],[.64257689,.717336232,1.001548513],[.646975798,.721903859,1.001716355],[.651369136,.726411529,1.001787026],[.655756395,.730858592,1.001760564],[.660137059,.735244402,1.001637025],[.664510601,.739568319,1.00141648],[.668876488,.743829708,1.001099013],[.673234178,.74802794,1.000684725],[.67758312,.752162394,1.000173733],[.681922758,.756232453,.999566166],[.686252527,.760237507,.998862171],[.690571854,.764176951,.998061908],[.69488016,.76805019,.997165552],[.699176859,.771856631,.996173293],[.703461358,.775595691,.995085337],[.707733059,.779266794,.993901902],[.711991357,.782869367,.992623222],[.71623564,.786402849,.991249546],[.720465291,.789866684,.989781136],[.724679689,.793260321,.98821827],[.728878207,.79658322,.986561237],[.73306021,.799834846,.984810343],[.737225063,.803014673,.982965908],[.741372122,.806122181,.981028263],[.745500742,.80915686,.978997757],[.749610271,.812118205,.97687475],[.753700055,.81500572,.974659614],[.757769435,.817818918,.972352739],[.76181775,.820557319,.969954524],[.765844332,.823220451,.967465384],[.769848514,.825807851,.964885746],[.773829624,.828319063,.962216051],[.777786987,.83075364,.95945675],[.781719925,.833111145,.956608311],[.78562776,.835391146,.953671211],[.789509808,.837593223,.950645941],[.793365387,.839716962,.947533006],[.79719381,.84176196,.944332919],[.80099439,.843727822,.94104621],[.804766438,.84561416,.937673417],[.808509264,.847420597,.934215092],[.812222176,.849146765,.930671799],[.815904482,.850792304,.927044111],[.81955549,.852356864,.923332614],[.823174505,.853840103,.919537906],[.826760834,.855241688,.915660596],[.830313782,.856561298,.911701301],[.833832656,.857798619,.907660652],[.837316761,.858953345,.903539289],[.840765403,.860025183,.899337864],[.844177889,.861013847,.895057037],[.847553526,.861919061,.89069748],[.850891622,.862740559,.886259872],[.854191486,.863478084,.881744906],[.857452428,.864131388,.877153282],[.860673759,.864700235,.872485708],[.863854792,.865184396,.867742904],[.867330172,.864540194,.862606204],[.871070379,.862768866,.857104915],[.874730228,.860914529,.851568855],[.878309568,.858977443,.845998954],[.881808244,.856957876,.840396142],[.885226105,.854856108,.834761348],[.888562998,.852672423,.829095499],[.89181877,.850407119,.823399519],[.894993269,.848060498,.817674334],[.898086346,.845632873,.811920864],[.901097852,.843124565,.80614003],[.90402764,.840535903,.800332749],[.906875564,.837867225,.794499937],[.909641483,.835118874,.788642506],[.912325257,.832291206,.782761367],[.914926747,.829384579,.776857427],[.917445821,.826399364,.770931591],[.919882348,.823335935,.76498476],[.9222362,.820194675,.759017834],[.924507255,.816975975,.753031706],[.926695392,.813680232,.74702727],[.928800497,.810307851,.741005413],[.930822459,.806859241,.73496702],[.932761172,.803334821,.728912971],[.934616533,.799735013,.722844143],[.936388447,.796060247,.71676141],[.938076822,.792310959,.71066564],[.939681571,.78848759,.704557696],[.941202613,.784590588,.69843844],[.942639873,.780620404,.692308727],[.943993281,.776577495,.686169407],[.945262772,.772462324,.680021326],[.94644829,.768275358,.673865327],[.947549782,.764017068,.667702244],[.948567201,.75968793,.66153291],[.949500509,.755288422,.65535815],[.950349672,.750819028,.649178786],[.951114665,.746280235,.642995633],[.951795465,.741672531,.636809501],[.952392062,.736996408,.630621194],[.952904448,.732252362,.624431512],[.953332623,.727440889,.618241248],[.953676597,.722562488,.612051188],[.953936383,.717617658,.605862116],[.954112003,.7126069,.599674805],[.954203486,.707530716,.593490026],[.95421087,.702389608,.587308543],[.954134199,.697184077,.581131111],[.953973524,.691914624,.574958483],[.953728904,.686581749,.568791403],[.953400406,.68118595,.562630608],[.952988106,.675727722,.556476831],[.952492085,.670207559,.550330796],[.951912435,.664625951,.544193222],[.951249252,.658983382,.538064822],[.950502644,.653280336,.531946299],[.949672726,.647517287,.525838353],[.948759618,.641694704,.519741675],[.947763452,.635813053,.51365695],[.946684367,.629872786,.507584854],[.94552251,.623874352,.50152606],[.944278035,.617818187,.495481231],[.942951107,.611704718,.489451023],[.941541896,.60553436,.483436086],[.940050585,.599307515,.477437063],[.938477361,.593024572,.471454589],[.936822421,.586685904,.465489292],[.935085971,.580291867,.459541794],[.933268225,.573842799,.453612707],[.931369406,.567339019,.44770264],[.929389745,.560780821,.44181219],[.927329482,.554168481,.43594195],[.925188866,.547502243,.430092505],[.922968152,.540782329,.424264432],[.920667608,.534008926,.418458302],[.918287506,.52718219,.412674678],[.915828131,.520302242,.406914115],[.913289773,.513369162,.401177161],[.910672733,.506382987,.395464359],[.90797732,.499343711,.389776241],[.905203852,.492251274,.384113335],[.902352654,.485105562,.37847616],[.899424062,.477906402,.372865229],[.89641842,.470653555,.367281047],[.893336079,.463346707,.361724112],[.890177401,.455985471,.356194915],[.886942755,.448569368,.35069394],[.88363252,.441097828,.345221665],[.880247082,.433570174,.339778559],[.876786838,.425985617,.334365086],[.87325219,.418343238,.328981703],[.869643553,.410641979,.32362886],[.865961348,.402880625,.318306999],[.862206003,.395057791,.313016558],[.858377959,.387171894,.307757966],[.854477661,.379221139,.302531647],[.850505566,.371203487,.29733802],[.846462136,.363116629,.292177494],[.842347845,.354957949,.287050476],[.838163173,.346724482,.281957365],[.83390861,.338412871,.276898554],[.829584652,.330019309,.27187443],[.825191806,.321539471,.266885377],[.820730585,.312968442,.26193177],[.816201511,.304300615,.257013981],[.811605116,.295529586,.252132377],[.806941937,.286648013,.247287319],[.802212521,.277647446,.242479163],[.797417423,.268518124,.237708261],[.792557206,.259248713,.232974961],[.787632439,.249825977,.228279608],[.782643702,.24023436,.223622539],[.77759158,.230455444,.219004091],[.772476668,.220467236,.214424597],[.767299568,.210243209,.209884384],[.762060889,.199751005,.20538378],[.756761248,.188950611,.200923108],[.75140127,.177791763,.196502688],[.745981587,.166210104,.192122839],[.740502838,.154121318,.187783878],[.734965671,.14141175,.183486121],[.729370739,.127922592,.179229881],[.723718704,.113421308,.175015472],[.718010235,.097545076,.170843206],[.712246006,.079673653,.166713395],[.7064267,.058582625,.162626353],[.700553008,.031592475,.158582393],[.694625625,.00296461,.154581828]],viridis:[[.282364553,0,.331010194],[.284420163,0,.337034427],[.286408722,0,.34299986],[.288328018,0,.348901425],[.290179378,.002654874,.35473812],[.291960279,.007927574,.360508963],[.29367257,.013523701,.366210869],[.295314593,.019446928,.371841938],[.296885699,.025709273,.377402605],[.298386438,.032320043,.382889257],[.299815971,.039284989,.388299074],[.301173065,.046263605,.393633812],[.302457462,.052924483,.398887738],[.303669591,.059347679,.404062513],[.304807765,.065576775,.409154501],[.305872694,.071646986,.414162002],[.306863542,.077587483,.419085269],[.307780278,.083417867,.423919761],[.308622494,.08915478,.428667953],[.309390937,.094810863,.433324403],[.310084053,.100399347,.437890473],[.310702155,.105925447,.442362838],[.311245178,.111398995,.446741648],[.31171373,.116826841,.451025994],[.312107495,.122211059,.455213669],[.312426421,.12756,.45930581],[.312671026,.132871715,.463299323],[.312842848,.13815391,.467195234],[.312939857,.143406419,.470990554],[.312964756,.148633022,.474688209],[.312917276,.153833244,.478285325],[.31279806,.159008292,.481781833],[.312607967,.164161309,.485179603],[.312347642,.169291531,.488475883],[.312018787,.174399964,.491673367],[.311623294,.179485609,.494771427],[.311159847,.184551638,.497770623],[.310631264,.189595869,.500670447],[.310038598,.194617768,.503473667],[.309383825,.199620123,.50617997],[.308668394,.204599571,.508789973],[.307893026,.209558887,.511307017],[.30705867,.214494832,.513728818],[.306169637,.219410015,.516060621],[.305226907,.224301183,.518300247],[.304230908,.229169665,.520452297],[.303184327,.23401591,.522516303],[.30208911,.238838555,.52449521],[.300947275,.243638109,.526391045],[.299761321,.248411187,.528204854],[.298533409,.253162399,.529940558],[.297264904,.257887398,.531597292],[.295957559,.262587449,.533178503],[.294613881,.267263788,.534687595],[.293235389,.271914152,.536124789],[.29182587,.276539894,.537493845],[.29038714,.281137685,.538796077],[.288919537,.285713038,.540035142],[.287426163,.290260619,.541210432],[.285909075,.294782589,.542327277],[.284368457,.299280222,.54338595],[.282808854,.30375224,.544389916],[.281231181,.308198925,.545340709],[.279638204,.312619061,.546240852],[.278029366,.317014946,.54709281],[.276408749,.321385415,.547898161],[.2747762,.325731625,.548659129],[.273133607,.330054743,.549376904],[.271483073,.334352558,.550054129],[.269825453,.338628329,.55069316],[.268162615,.3428799,.551295679],[.266495079,.347108488,.551861999],[.264824946,.351315001,.552395838],[.263152656,.355499532,.552898352],[.261479291,.359663188,.553370667],[.2598069,.363804861,.553815549],[.258135127,.367926736,.554233229],[.256465488,.372027779,.554624491],[.254796664,.376110092,.554991545],[.253131545,.380173687,.5553352],[.251468935,.38421961,.555657646],[.249809319,.388246886,.555958715],[.248154519,.392256574,.556239496],[.246502819,.396250722,.556502059],[.244855438,.400228368,.556746262],[.243211275,.404191591,.556972229],[.241572085,.40813939,.557181851],[.239935321,.412073822,.557375231],[.238302445,.415993928,.557553271],[.236672664,.419901774,.557716013],[.235044688,.423797366,.557863499],[.233418402,.42768078,.557996644],[.23179415,.43155403,.558115514],[.23017062,.435415152,.558221055],[.228545837,.439268241,.558311286],[.226921796,.443110292,.558388185],[.225295059,.446944385,.558450748],[.223665357,.450770477,.5585],[.222033173,.454587707,.558533891],[.220395682,.458399026,.558554442],[.218753476,.462202555,.558559625],[.217103794,.466001277,.55854943],[.2154464,.469793276,.55852386],[.213781237,.473579536,.558482909],[.212104356,.477363125,.558424526],[.210416546,.481140084,.558348751],[.208715672,.48491544,.558254507],[.207002655,.488686237,.558142856],[.205274058,.492454453,.558011716],[.203529732,.496219216,.557860134],[.201769075,.499981516,.557687063],[.199990512,.503743321,.557493446],[.198194207,.507501758,.557276358],[.196378932,.511260752,.557037681],[.19454391,.515016431,.556773514],[.192687798,.518772751,.556483695],[.190809699,.522527822,.556167356],[.188910106,.52628262,.555823406],[.186988225,.530037105,.555450744],[.185044047,.533791419,.555048516],[.183076504,.537546494,.554614502],[.181087511,.541301431,.554148901],[.17907907,.54505611,.553651486],[.177048511,.548811719,.553119441],[.174998106,.552566177,.55255165],[.172927152,.556323508,.551946906],[.170840345,.560079758,.551305519],[.168735186,.563836905,.550623112],[.166617897,.56759401,.549902026],[.164486938,.571352034,.549137847],[.162350105,.575110037,.54833296],[.160206983,.57886796,.547482915],[.158062641,.582625896,.54658912],[.15592085,.58638281,.545648332],[.153785246,.590140667,.544660266],[.151663046,.593897574,.543623383],[.149559345,.597654419,.542537144],[.147481636,.601409324,.541399051],[.145437381,.605164162,.540210518],[.14343467,.60891604,.538969112],[.141480867,.61266593,.537672481],[.139587165,.616415793,.536320242],[.137763667,.620161689,.534912064],[.136020919,.623906545,.533446178],[.13437266,.627646426,.531922315],[.132832383,.631384239,.530339651],[.131410838,.635118107,.528695928],[.130125622,.638846942,.526990734],[.128989086,.642572693,.52522357],[.128017628,.646291446,.523393293],[.127225586,.650007125,.521497893],[.126630843,.653714779,.519538336],[.126246801,.657418325,.517512535],[.126089944,.661112834,.515420512],[.126172637,.664801273,.513260659],[.126511086,.668481527,.511032406],[.127114669,.672153753,.508734767],[.127995817,.675817772,.506367566],[.129165005,.679470699,.503930954],[.130626887,.683115418,.501421577],[.132387924,.686749032,.49884169],[.134452914,.690371463,.49618857],[.136822787,.693983608,.493462472],[.13949652,.697582617,.490662686],[.142474978,.7011703,.487788732],[.145750228,.70474282,.484838975],[.149321849,.708302973,.481813842],[.153179377,.711847929,.478713792],[.157318564,.715378589,.475536944],[.161730716,.718893812,.472282406],[.166406002,.722391787,.468951725],[.171338542,.725874284,.465543101],[.17651572,.729337518,.462055133],[.181930053,.732785241,.458487921],[.187571031,.736211639,.454843239],[.193429649,.739619614,.451117964],[.199499186,.743008988,.447313047],[.205767887,.746376001,.443429285],[.212229375,.749723376,.439463504],[.218873428,.753047369,.435417594],[.22569701,.756349669,.431288292],[.232688469,.759628568,.427078537],[.239843791,.7628837,.422786019],[.247153668,.766113396,.418412723],[.254613428,.769318467,.413957329],[.262218889,.772498701,.409418458],[.269962666,.77565145,.404798189],[.277841418,.778778314,.400092862],[.285848026,.781875674,.395303604],[.29398231,.784946086,.39042969],[.302235095,.787985957,.385473325],[.310604419,.790996053,.380432913],[.319087196,.793977129,.375305722],[.327678425,.796925609,.370097109],[.336377071,.799844013,.36480084],[.34517577,.80272881,.359421265],[.354076535,.805582464,.353955096],[.363072889,.808400495,.348402578],[.37216392,.811184613,.342763768],[.381347905,.813934495,.337037614],[.390618224,.816648721,.331226329],[.399976821,.81932765,.325327258],[.409415973,.821969907,.319342572],[.418938096,.824574796,.313270474],[.428536113,.82714301,.307110897],[.438211485,.829672159,.300864482],[.447961789,.832162866,.294529459],[.457781391,.83461486,.288106667],[.467672971,.837028362,.281594598],[.477628958,.839401127,.274993962],[.487651997,.841734348,.268301762],[.497733674,.844025807,.261523769],[.507875022,.846277099,.254656114],[.518075249,.848488769,.247698899],[.528325832,.850658669,.240654148],[.538630828,.852786888,.233517501],[.548980458,.854874335,.226295687],[.559378838,.856921058,.218982461],[.569817428,.858926,.211583929],[.580294553,.860889673,.204097969],[.590811638,.862813564,.196522789],[.601358084,.864696671,.188865211],[.611937091,.866539951,.181121292],[.622540157,.868342445,.173298674],[.633168288,.870107082,.165394846],[.643812988,.87183295,.15741903],[.654472815,.873520492,.149372194],[.665146187,.875172136,.141258413],[.675825719,.87678702,.133091913],[.686511527,.878367982,.12487704],[.697194143,.879914204,.116633111],[.707874818,.881428483,.108373929],[.718543932,.882912056,.100128072],[.729204,.884365666,.091925366],[.739843331,.885790592,.083809287],[.750462567,.887190215,.075839053],[.761059494,.888563872,.068090072],[.771623442,.889914889,.060669955],[.782157864,.891244958,.053711966],[.792653349,.892555409,.047401118],[.803110167,.893848926,.04195436],[.81352,.895126859,.03764563],[.823881496,.896391553,.034852646],[.834195319,.897645338,.033642701],[.844452225,.898889585,.034045498],[.854655562,.900125934,.036085859],[.864796013,.901357784,.039789107],[.874876944,.902585761,.044954025],[.884885947,.903815287,.051230115],[.894826973,.905044656,.058381191],[.90470253,.906278205,.066205641],[.91450577,.907515306,.074534887],[.924239732,.908759607,.083251002],[.933898589,.910011479,.092251508],[.943486439,.911272564,.101473717],[.952999453,.912545233,.110858769]],inferno:[[.002810891,239715e-9,.013984976],[.004019847,978214e-9,.018722507],[.005535928,.00187858,.024433316],[.007352275,.002928594,.031151042],[.009463158,.004122023,.038856908],[.011875164,.00544392,.047160074],[.014598821,.006882989,.05549261],[.017636359,.008432151,.063833581],[.021017968,.010065827,.072260641],[.024743935,.011784159,.080708378],[.028837804,.013566889,.089219815],[.033326247,.015396259,.097809251],[.038216424,.017268324,.106440143],[.043430971,.019154971,.115162139],[.048693764,.021040888,.123967748],[.054003412,.022919329,.132833018],[.05937446,.024767653,.141775321],[.064826084,.026549139,.150830309],[.070349827,.028263587,.159955322],[.075950411,.029888422,.169148722],[.081637827,.031404016,.17841319],[.087425459,.032773279,.187768133],[.093315577,.033979154,.197195807],[.099307652,.035007297,.206679544],[.105402262,.035836467,.216206467],[.11160571,.036444525,.225770396],[.117916762,.036813662,.235353395],[.124336908,.036927557,.244940257],[.130861794,.036773825,.254505012],[.137489231,.036346007,.264028401],[.144209431,.035642023,.273476467],[.151015433,.034667062,.28281847],[.157897349,.03343447,.292023612],[.164837843,.031964803,.301050012],[.171827177,.030285889,.309867094],[.178846632,.028428459,.318436221],[.185883931,.026431189,.326727546],[.192913861,.024349971,.334701716],[.199922206,.022233669,.342332673],[.206896794,.020130048,.349604188],[.213821188,.018085948,.356495421],[.220686239,.01614765,.36300284],[.227481223,.014355535,.369119105],[.234203612,.012742013,.374850293],[.240846275,.011335284,.380200563],[.247409605,.010157358,.385183383],[.25389244,.00922676,.389814002],[.260296425,.008548931,.394106082],[.26662827,.008128897,.398079916],[.272888184,.007967771,.401752554],[.279082984,.008062521,.405141928],[.285215144,.008411444,.408265426],[.291290587,.009006962,.411140969],[.297313415,.009846182,.41378732],[.303287625,.010914426,.416217169],[.309220747,.012204296,.418446847],[.31511472,.013704677,.420488274],[.320976396,.015407335,.422354544],[.32680655,.017302461,.42405678],[.33261022,.019380479,.425606502],[.33839282,.021633451,.427012121],[.344153787,.024052574,.428282941],[.349898892,.026629309,.429426665],[.35562785,.029355256,.43044874],[.361346591,.032224413,.431358727],[.367053482,.035230654,.432159193],[.372752567,.038365761,.4328564],[.3784468,.041595697,.433455535],[.384135533,.044788621,.433960296],[.389822923,.047944779,.434373977],[.395506485,.051063276,.434700381],[.401189511,.054146112,.434943693],[.4068728,.057192222,.435104814],[.412556166,.060199931,.435185819],[.418243957,.063171283,.435188731],[.423933314,.06610722,.435114544],[.429627404,.069008639,.434966249],[.435324174,.071876171,.434743925],[.441027491,.074713043,.43444847],[.446733669,.077518064,.434082054],[.452446383,.080294305,.433643485],[.458162952,.083041445,.433136016],[.463885774,.085763765,.432560539],[.469615152,.088460854,.431914896],[.475348183,.09113465,.431200416],[.481089526,.093787482,.430415748],[.486835457,.096418645,.429563306],[.49258791,.099031404,.428642651],[.498344739,.101627493,.427653271],[.504107463,.104208064,.426595937],[.50987656,.106775461,.425470369],[.515649029,.109331131,.424277141],[.521426769,.111875723,.423014653],[.527208676,.114410574,.421683562],[.532994806,.116939588,.42028318],[.538784144,.119462794,.418815247],[.544575216,.121981175,.417278404],[.550371412,.124498872,.415673254],[.556167707,.127014924,.41399861],[.561966129,.129532943,.412254628],[.567764629,.132053983,.410442205],[.573565191,.134579443,.408560423],[.579363842,.137111442,.40661025],[.585160178,.139651746,.404592207],[.590957491,.142202192,.40250478],[.596749843,.144763781,.400348019],[.602540203,.147339963,.398121837],[.608324672,.149931559,.395828373],[.614106177,.152539886,.393466468],[.619878803,.155167953,.39103732],[.62564502,.157816339,.388541343],[.631405276,.16048786,.385977888],[.637153672,.163184363,.383348244],[.642895026,.165908225,.380651089],[.648622504,.168659106,.377887791],[.654340024,.171441466,.375058945],[.660042722,.174255929,.372166993],[.665730985,.17710425,.369210216],[.671404338,.179990219,.366189835],[.677058916,.182912273,.363108386],[.682697502,.185876068,.359964293],[.688315275,.188880002,.356760156],[.693913094,.19192974,.353495316],[.699488019,.195022636,.350170452],[.705038579,.198163531,.346787702],[.710566106,.20135422,.343346184],[.716066836,.204595038,.339850629],[.721539555,.207888681,.336298229],[.726982448,.21123646,.332693775],[.73239625,.214641094,.329035403],[.737776233,.2181018,.325326951],[.743124048,.221622403,.32156649],[.748435031,.225202042,.317758905],[.75370943,.228844711,.313903188],[.75894657,.232551318,.309999301],[.764142757,.236320958,.306051185],[.769298574,.240158638,.302057753],[.774410361,.24406134,.298021999],[.77947869,.248033102,.293943781],[.784498961,.252072896,.289827098],[.789472323,.256183813,.28567083],[.794397096,.260364835,.281476823],[.799269603,.264617985,.277247087],[.804091318,.26894337,.27298138],[.808857686,.273339856,.26868175],[.813569116,.277811732,.264349842],[.818223052,.282355751,.259985752],[.822818703,.286973061,.255592213],[.82735609,.291664924,.251166929],[.831830811,.296431042,.246713936],[.836244108,.301270823,.242231798],[.840591599,.306183914,.237722542],[.844875422,.311171845,.23318565],[.849092282,.316232129,.228623159],[.853241223,.321365084,.224035636],[.857322167,.326571094,.21942059],[.861331902,.331848603,.21478101],[.865271396,.337198333,.210114175],[.869138558,.342616591,.205424062],[.872933212,.34810625,.200705817],[.876653352,.353663534,.195963343],[.88029782,.359288934,.191192908],[.883868435,.364982926,.18639468],[.887360283,.37074069,.181568458],[.890776984,.376566224,.176712017],[.894114775,.382452576,.171827069],[.897374185,.388403856,.166908161],[.900554463,.39441505,.161956811],[.903654355,.400486745,.156970616],[.90667454,.406618534,.151946006],[.909613336,.41280737,.146884076],[.91247216,.419054438,.141779605],[.915247473,.425354607,.136631311],[.917941576,.431711138,.13143639],[.920553003,.438118822,.126193019],[.92308235,.444578324,.12089804],[.925528158,.451090351,.115545644],[.927890089,.457649617,.11013577],[.930168274,.464258499,.104662026],[.932363432,.470912662,.099122862],[.934473651,.477613532,.093511016],[.936498751,.484357723,.087826678],[.93844068,.491146702,.082060883],[.940296388,.497977037,.076213354],[.942067334,.504847466,.070277474],[.943752836,.511760795,.06424713],[.945353009,.518710501,.058120676],[.946867593,.525700159,.051891455],[.948295769,.532725216,.04556084],[.949638198,.53978828,.039112476],[.950894169,.546884747,.032903658],[.952063015,.55401443,.027232246],[.953145915,.561180175,.0221163],[.954141311,.568376334,.017577226],[.955049698,.575605576,.01363671],[.955869597,.582863221,.010318691],[.956603366,.590152978,.007647565],[.957247693,.597469118,.005653645],[.957804685,.604814517,.004365192],[.958272553,.612188026,.003815359],[.958651994,.619586903,.004038404],[.958943236,.627013907,.005072597],[.959145208,.63446323,.00695773],[.95925702,.641938676,.009736864],[.959279647,.649436413,.013456641],[.959213225,.656956325,.018166728],[.959055721,.664501335,.023921376],[.958809389,.672064551,.030777952],[.958472175,.679649817,.038798466],[.958045344,.687253245,.047545867],[.957527869,.694876673,.05639001],[.956920137,.702516187,.065327227],[.956222221,.710172696,.074362977],[.955435128,.717847108,.083500802],[.954558502,.725534474,.092742519],[.953590125,.733238676,.102098349],[.952533796,.740954728,.111570461],[.95138945,.748682482,.121171091],[.950157939,.756419958,.130904998],[.948841532,.764165035,.140781309],[.947441335,.771919616,.150814361],[.945959663,.779676661,.161005763],[.944398407,.787439028,.171373044],[.942762103,.795200653,.181921587],[.941049699,.802964391,.192669999],[.939264076,.810723142,.203627758],[.937415841,.818475746,.214804757],[.935510862,.826217989,.226217167],[.933559455,.833942752,.237872127],[.93156307,.8416528,.249795364],[.929529596,.849338965,.262001658],[.927483114,.856994896,.274501251],[.925440807,.864610442,.287299789],[.923403333,.872186154,.300442835],[.921409474,.879705858,.31392195],[.919490918,.887156115,.327744186],[.917656842,.894536376,.341960845],[.915969564,.901820516,.35653516],[.914460404,.908999767,.37149754],[.913185926,.916052067,.386828249],[.912202301,.922961588,.402519028],[.911571271,.929705491,.418535415],[.911358961,.936266305,.434834633],[.911626842,.942626533,.451364946],[.912435288,.948769029,.468038546],[.913828005,.954687153,.484787691],[.915840127,.960372411,.501502204],[.91848121,.965832199,.51812067],[.921749977,.971070576,.534539304],[.925624725,.976102635,.550702793],[.930072492,.980946133,.566595441],[.9350529,.985618856,.58210261],[.940520965,.990140356,.597269626],[.946429162,.994525842,.612080146],[.952736995,.998796066,.626535043],[.959399507,1.002963285,.640626478]],cividis:[[0,.1262,.3015],[0,.1292,.3077],[0,.1321,.3142],[0,.135,.3205],[0,.1379,.3269],[0,.1408,.3334],[0,.1437,.34],[0,.1465,.3467],[0,.1492,.3537],[0,.1519,.3606],[0,.1546,.3676],[0,.1574,.3746],[0,.1601,.3817],[0,.1629,.3888],[0,.1657,.396],[0,.1685,.4031],[0,.1714,.4102],[0,.1743,.4172],[0,.1773,.4241],[0,.1798,.4307],[0,.1817,.4347],[0,.1834,.4363],[0,.1852,.4368],[0,.1872,.4368],[0,.1901,.4365],[0,.193,.4361],[0,.1958,.4356],[0,.1987,.4349],[0,.2015,.4343],[0,.2044,.4336],[0,.2073,.4329],[.0055,.2101,.4322],[.0236,.213,.4314],[.0416,.2158,.4308],[.0576,.2187,.4301],[.071,.2215,.4293],[.0827,.2244,.4287],[.0932,.2272,.428],[.103,.23,.4274],[.112,.2329,.4268],[.1204,.2357,.4262],[.1283,.2385,.4256],[.1359,.2414,.4251],[.1431,.2442,.4245],[.15,.247,.4241],[.1566,.2498,.4236],[.163,.2526,.4232],[.1692,.2555,.4228],[.1752,.2583,.4224],[.1811,.2611,.422],[.1868,.2639,.4217],[.1923,.2667,.4214],[.1977,.2695,.4212],[.203,.2723,.4209],[.2082,.2751,.4207],[.2133,.278,.4205],[.2183,.2808,.4204],[.2232,.2836,.4203],[.2281,.2864,.4202],[.2328,.2892,.4201],[.2375,.292,.42],[.2421,.2948,.42],[.2466,.2976,.42],[.2511,.3004,.4201],[.2556,.3032,.4201],[.2599,.306,.4202],[.2643,.3088,.4203],[.2686,.3116,.4205],[.2728,.3144,.4206],[.277,.3172,.4208],[.2811,.32,.421],[.2853,.3228,.4212],[.2894,.3256,.4215],[.2934,.3284,.4218],[.2974,.3312,.4221],[.3014,.334,.4224],[.3054,.3368,.4227],[.3093,.3396,.4231],[.3132,.3424,.4236],[.317,.3453,.424],[.3209,.3481,.4244],[.3247,.3509,.4249],[.3285,.3537,.4254],[.3323,.3565,.4259],[.3361,.3593,.4264],[.3398,.3622,.427],[.3435,.365,.4276],[.3472,.3678,.4282],[.3509,.3706,.4288],[.3546,.3734,.4294],[.3582,.3763,.4302],[.3619,.3791,.4308],[.3655,.3819,.4316],[.3691,.3848,.4322],[.3727,.3876,.4331],[.3763,.3904,.4338],[.3798,.3933,.4346],[.3834,.3961,.4355],[.3869,.399,.4364],[.3905,.4018,.4372],[.394,.4047,.4381],[.3975,.4075,.439],[.401,.4104,.44],[.4045,.4132,.4409],[.408,.4161,.4419],[.4114,.4189,.443],[.4149,.4218,.444],[.4183,.4247,.445],[.4218,.4275,.4462],[.4252,.4304,.4473],[.4286,.4333,.4485],[.432,.4362,.4496],[.4354,.439,.4508],[.4388,.4419,.4521],[.4422,.4448,.4534],[.4456,.4477,.4547],[.4489,.4506,.4561],[.4523,.4535,.4575],[.4556,.4564,.4589],[.4589,.4593,.4604],[.4622,.4622,.462],[.4656,.4651,.4635],[.4689,.468,.465],[.4722,.4709,.4665],[.4756,.4738,.4679],[.479,.4767,.4691],[.4825,.4797,.4701],[.4861,.4826,.4707],[.4897,.4856,.4714],[.4934,.4886,.4719],[.4971,.4915,.4723],[.5008,.4945,.4727],[.5045,.4975,.473],[.5083,.5005,.4732],[.5121,.5035,.4734],[.5158,.5065,.4736],[.5196,.5095,.4737],[.5234,.5125,.4738],[.5272,.5155,.4739],[.531,.5186,.4739],[.5349,.5216,.4738],[.5387,.5246,.4739],[.5425,.5277,.4738],[.5464,.5307,.4736],[.5502,.5338,.4735],[.5541,.5368,.4733],[.5579,.5399,.4732],[.5618,.543,.4729],[.5657,.5461,.4727],[.5696,.5491,.4723],[.5735,.5522,.472],[.5774,.5553,.4717],[.5813,.5584,.4714],[.5852,.5615,.4709],[.5892,.5646,.4705],[.5931,.5678,.4701],[.597,.5709,.4696],[.601,.574,.4691],[.605,.5772,.4685],[.6089,.5803,.468],[.6129,.5835,.4673],[.6168,.5866,.4668],[.6208,.5898,.4662],[.6248,.5929,.4655],[.6288,.5961,.4649],[.6328,.5993,.4641],[.6368,.6025,.4632],[.6408,.6057,.4625],[.6449,.6089,.4617],[.6489,.6121,.4609],[.6529,.6153,.46],[.657,.6185,.4591],[.661,.6217,.4583],[.6651,.625,.4573],[.6691,.6282,.4562],[.6732,.6315,.4553],[.6773,.6347,.4543],[.6813,.638,.4532],[.6854,.6412,.4521],[.6895,.6445,.4511],[.6936,.6478,.4499],[.6977,.6511,.4487],[.7018,.6544,.4475],[.706,.6577,.4463],[.7101,.661,.445],[.7142,.6643,.4437],[.7184,.6676,.4424],[.7225,.671,.4409],[.7267,.6743,.4396],[.7308,.6776,.4382],[.735,.681,.4368],[.7392,.6844,.4352],[.7434,.6877,.4338],[.7476,.6911,.4322],[.7518,.6945,.4307],[.756,.6979,.429],[.7602,.7013,.4273],[.7644,.7047,.4258],[.7686,.7081,.4241],[.7729,.7115,.4223],[.7771,.715,.4205],[.7814,.7184,.4188],[.7856,.7218,.4168],[.7899,.7253,.415],[.7942,.7288,.4129],[.7985,.7322,.4111],[.8027,.7357,.409],[.807,.7392,.407],[.8114,.7427,.4049],[.8157,.7462,.4028],[.82,.7497,.4007],[.8243,.7532,.3984],[.8287,.7568,.3961],[.833,.7603,.3938],[.8374,.7639,.3915],[.8417,.7674,.3892],[.8461,.771,.3869],[.8505,.7745,.3843],[.8548,.7781,.3818],[.8592,.7817,.3793],[.8636,.7853,.3766],[.8681,.7889,.3739],[.8725,.7926,.3712],[.8769,.7962,.3684],[.8813,.7998,.3657],[.8858,.8035,.3627],[.8902,.8071,.3599],[.8947,.8108,.3569],[.8992,.8145,.3538],[.9037,.8182,.3507],[.9082,.8219,.3474],[.9127,.8256,.3442],[.9172,.8293,.3409],[.9217,.833,.3374],[.9262,.8367,.334],[.9308,.8405,.3306],[.9353,.8442,.3268],[.9399,.848,.3232],[.9444,.8518,.3195],[.949,.8556,.3155],[.9536,.8593,.3116],[.9582,.8632,.3076],[.9628,.867,.3034],[.9674,.8708,.299],[.9721,.8746,.2947],[.9767,.8785,.2901],[.9814,.8823,.2856],[.986,.8862,.2807],[.9907,.8901,.2759],[.9954,.894,.2708],[1,.8979,.2655],[1,.9018,.26],[1,.9057,.2593],[1,.9094,.2634],[1,.9131,.268],[1,.9169,.2731]],green:[[.9686274509803922,.9882352941176471,.9607843137254902],[.9647058823529412,.9882352941176471,.9568627450980393],[.9647058823529412,.9882352941176471,.9568627450980393],[.9607843137254902,.984313725490196,.9529411764705882],[.9607843137254902,.984313725490196,.9490196078431372],[.9568627450980393,.984313725490196,.9490196078431372],[.9568627450980393,.984313725490196,.9450980392156862],[.9529411764705882,.9803921568627451,.9411764705882353],[.9490196078431372,.9803921568627451,.9411764705882353],[.9490196078431372,.9803921568627451,.9372549019607843],[.9450980392156862,.9803921568627451,.9333333333333333],[.9450980392156862,.9803921568627451,.9333333333333333],[.9411764705882353,.9764705882352941,.9294117647058824],[.9411764705882353,.9764705882352941,.9254901960784314],[.9372549019607843,.9764705882352941,.9254901960784314],[.9333333333333333,.9764705882352941,.9215686274509803],[.9333333333333333,.9725490196078431,.9176470588235294],[.9294117647058824,.9725490196078431,.9176470588235294],[.9254901960784314,.9725490196078431,.9137254901960784],[.9254901960784314,.9725490196078431,.9098039215686274],[.9215686274509803,.9686274509803922,.9058823529411765],[.9215686274509803,.9686274509803922,.9058823529411765],[.9176470588235294,.9686274509803922,.9019607843137255],[.9137254901960784,.9686274509803922,.8980392156862745],[.9137254901960784,.9647058823529412,.8941176470588236],[.9098039215686274,.9647058823529412,.8941176470588236],[.9058823529411765,.9647058823529412,.8901960784313725],[.9058823529411765,.9647058823529412,.8862745098039215],[.9019607843137255,.9607843137254902,.8823529411764706],[.8980392156862745,.9607843137254902,.8823529411764706],[.8941176470588236,.9607843137254902,.8784313725490196],[.8941176470588236,.9568627450980393,.8745098039215686],[.8901960784313725,.9568627450980393,.8705882352941177],[.8862745098039215,.9568627450980393,.8666666666666667],[.8823529411764706,.9568627450980393,.8627450980392157],[.8823529411764706,.9529411764705882,.8627450980392157],[.8784313725490196,.9529411764705882,.8588235294117647],[.8745098039215686,.9529411764705882,.8549019607843137],[.8705882352941177,.9490196078431372,.8509803921568627],[.8666666666666667,.9490196078431372,.8470588235294118],[.8666666666666667,.9490196078431372,.8431372549019608],[.8627450980392157,.9450980392156862,.8392156862745098],[.8588235294117647,.9450980392156862,.8352941176470589],[.8549019607843137,.9450980392156862,.8313725490196079],[.8509803921568627,.9411764705882353,.8274509803921568],[.8470588235294118,.9411764705882353,.8235294117647058],[.8431372549019608,.9372549019607843,.8196078431372549],[.8392156862745098,.9372549019607843,.8156862745098039],[.8352941176470589,.9372549019607843,.8117647058823529],[.8313725490196079,.9333333333333333,.807843137254902],[.8313725490196079,.9333333333333333,.807843137254902],[.8274509803921568,.9333333333333333,.803921568627451],[.8235294117647058,.9294117647058824,.796078431372549],[.8196078431372549,.9294117647058824,.792156862745098],[.8156862745098039,.9254901960784314,.788235294117647],[.8117647058823529,.9254901960784314,.7843137254901961],[.807843137254902,.9254901960784314,.7803921568627451],[.803921568627451,.9215686274509803,.7764705882352941],[.8,.9215686274509803,.7725490196078432],[.796078431372549,.9176470588235294,.7686274509803922],[.792156862745098,.9176470588235294,.7647058823529411],[.788235294117647,.9176470588235294,.7607843137254902],[.7843137254901961,.9137254901960784,.7568627450980392],[.7764705882352941,.9137254901960784,.7529411764705882],[.7725490196078432,.9098039215686274,.7490196078431373],[.7686274509803922,.9098039215686274,.7450980392156863],[.7647058823529411,.9058823529411765,.7411764705882353],[.7607843137254902,.9058823529411765,.7372549019607844],[.7568627450980392,.9019607843137255,.7333333333333333],[.7529411764705882,.9019607843137255,.7254901960784313],[.7490196078431373,.9019607843137255,.7215686274509804],[.7450980392156863,.8980392156862745,.7176470588235294],[.7411764705882353,.8980392156862745,.7137254901960784],[.7333333333333333,.8941176470588236,.7098039215686275],[.7294117647058823,.8941176470588236,.7058823529411765],[.7254901960784313,.8901960784313725,.7019607843137254],[.7215686274509804,.8901960784313725,.6980392156862745],[.7176470588235294,.8862745098039215,.6901960784313725],[.7137254901960784,.8862745098039215,.6862745098039216],[.7098039215686275,.8823529411764706,.6823529411764706],[.7019607843137254,.8823529411764706,.6784313725490196],[.6980392156862745,.8784313725490196,.6745098039215687],[.6941176470588235,.8784313725490196,.6705882352941176],[.6901960784313725,.8745098039215686,.6666666666666666],[.6823529411764706,.8745098039215686,.6588235294117647],[.6784313725490196,.8705882352941177,.6549019607843137],[.6745098039215687,.8705882352941177,.6509803921568628],[.6705882352941176,.8666666666666667,.6470588235294118],[.6666666666666666,.8627450980392157,.6431372549019608],[.6588235294117647,.8627450980392157,.6392156862745098],[.6549019607843137,.8588235294117647,.6352941176470588],[.6509803921568628,.8588235294117647,.6274509803921569],[.6470588235294118,.8549019607843137,.6235294117647059],[.6392156862745098,.8549019607843137,.6196078431372549],[.6352941176470588,.8509803921568627,.615686274509804],[.6313725490196078,.8509803921568627,.611764705882353],[.6235294117647059,.8470588235294118,.6078431372549019],[.6196078431372549,.8431372549019608,.6],[.615686274509804,.8431372549019608,.596078431372549],[.6078431372549019,.8392156862745098,.592156862745098],[.6039215686274509,.8392156862745098,.5882352941176471],[.6,.8352941176470589,.5843137254901961],[.592156862745098,.8313725490196079,.5803921568627451],[.5882352941176471,.8313725490196079,.5725490196078431],[.5843137254901961,.8274509803921568,.5686274509803921],[.5764705882352941,.8274509803921568,.5647058823529412],[.5725490196078431,.8235294117647058,.5607843137254902],[.5686274509803921,.8196078431372549,.5568627450980392],[.5607843137254902,.8196078431372549,.5529411764705883],[.5568627450980392,.8156862745098039,.5490196078431373],[.5490196078431373,.8117647058823529,.5411764705882353],[.5450980392156862,.8117647058823529,.5372549019607843],[.5411764705882353,.807843137254902,.5333333333333333],[.5333333333333333,.803921568627451,.5294117647058824],[.5294117647058824,.803921568627451,.5254901960784314],[.5215686274509804,.8,.5215686274509804],[.5176470588235295,.796078431372549,.5176470588235295],[.5098039215686274,.796078431372549,.5137254901960784],[.5058823529411764,.792156862745098,.5098039215686274],[.5019607843137255,.788235294117647,.5058823529411764],[.49411764705882355,.788235294117647,.5019607843137255],[.49019607843137253,.7843137254901961,.4980392156862745],[.4823529411764706,.7803921568627451,.49411764705882355],[.47843137254901963,.7803921568627451,.48627450980392156],[.47058823529411764,.7764705882352941,.4823529411764706],[.4666666666666667,.7725490196078432,.47843137254901963],[.4588235294117647,.7686274509803922,.4745098039215686],[.4549019607843137,.7686274509803922,.47058823529411764],[.4470588235294118,.7647058823529411,.47058823529411764],[.44313725490196076,.7607843137254902,.4666666666666667],[.43529411764705883,.7607843137254902,.4627450980392157],[.43137254901960786,.7568627450980392,.4588235294117647],[.4235294117647059,.7529411764705882,.4549019607843137],[.4196078431372549,.7490196078431373,.45098039215686275],[.4117647058823529,.7490196078431373,.4470588235294118],[.40784313725490196,.7450980392156863,.44313725490196076],[.4,.7411764705882353,.4392156862745098],[.396078431372549,.7372549019607844,.43529411764705883],[.38823529411764707,.7372549019607844,.43137254901960786],[.3843137254901961,.7333333333333333,.43137254901960786],[.3764705882352941,.7294117647058823,.42745098039215684],[.3686274509803922,.7254901960784313,.4235294117647059],[.36470588235294116,.7215686274509804,.4196078431372549],[.3568627450980392,.7215686274509804,.41568627450980394],[.35294117647058826,.7176470588235294,.4117647058823529],[.34509803921568627,.7137254901960784,.40784313725490196],[.3411764705882353,.7098039215686275,.40784313725490196],[.33725490196078434,.7058823529411765,.403921568627451],[.32941176470588235,.7058823529411765,.4],[.3254901960784314,.7019607843137254,.396078431372549],[.3176470588235294,.6980392156862745,.39215686274509803],[.3137254901960784,.6941176470588235,.39215686274509803],[.3058823529411765,.6901960784313725,.38823529411764707],[.30196078431372547,.6862745098039216,.3843137254901961],[.2980392156862745,.6862745098039216,.3803921568627451],[.2901960784313726,.6823529411764706,.3803921568627451],[.28627450980392155,.6784313725490196,.3764705882352941],[.2823529411764706,.6745098039215687,.37254901960784315],[.27450980392156865,.6705882352941176,.3686274509803922],[.27058823529411763,.6666666666666666,.36470588235294116],[.26666666666666666,.6627450980392157,.36470588235294116],[.25882352941176473,.6588235294117647,.3607843137254902],[.2549019607843137,.6549019607843137,.3568627450980392],[.25098039215686274,.6549019607843137,.35294117647058826],[.24705882352941178,.6509803921568628,.35294117647058826],[.24313725490196078,.6470588235294118,.34901960784313724],[.23529411764705882,.6431372549019608,.34509803921568627],[.23137254901960785,.6392156862745098,.3411764705882353],[.22745098039215686,.6352941176470588,.3411764705882353],[.2235294117647059,.6313725490196078,.33725490196078434],[.2196078431372549,.6274509803921569,.3333333333333333],[.21568627450980393,.6235294117647059,.32941176470588235],[.21176470588235294,.6196078431372549,.32941176470588235],[.20784313725490197,.615686274509804,.3254901960784314],[.20392156862745098,.611764705882353,.3215686274509804],[.2,.6078431372549019,.3176470588235294],[.19607843137254902,.6039215686274509,.3137254901960784],[.19215686274509805,.6,.3137254901960784],[.18823529411764706,.596078431372549,.30980392156862746],[.1843137254901961,.592156862745098,.3058823529411765],[.1803921568627451,.5882352941176471,.30196078431372547],[.17647058823529413,.5843137254901961,.30196078431372547],[.16862745098039217,.5803921568627451,.2980392156862745],[.16470588235294117,.5764705882352941,.29411764705882354],[.1607843137254902,.5725490196078431,.2901960784313726],[.1568627450980392,.5686274509803921,.2901960784313726],[.15294117647058825,.5647058823529412,.28627450980392155],[.14901960784313725,.5607843137254902,.2823529411764706],[.1450980392156863,.5607843137254902,.2784313725490196],[.1411764705882353,.5568627450980392,.2784313725490196],[.13725490196078433,.5529411764705883,.27450980392156865],[.13333333333333333,.5490196078431373,.27058823529411763],[.12941176470588237,.5450980392156862,.26666666666666666],[.12549019607843137,.5411764705882353,.2627450980392157],[.12156862745098039,.5372549019607843,.2627450980392157],[.11764705882352941,.5333333333333333,.25882352941176473],[.11372549019607843,.5294117647058824,.2549019607843137],[.10980392156862745,.5254901960784314,.25098039215686274],[.10588235294117647,.5215686274509804,.25098039215686274],[.10196078431372549,.5176470588235295,.24705882352941178],[.09803921568627451,.5137254901960784,.24313725490196078],[.09411764705882353,.5098039215686274,.23921568627450981],[.09019607843137255,.5058823529411764,.23921568627450981],[.08627450980392157,.5019607843137255,.23529411764705882],[.08235294117647059,.4980392156862745,.23137254901960785],[.0784313725490196,.49411764705882355,.22745098039215686],[.07450980392156863,.49019607843137253,.22745098039215686],[.07058823529411765,.48627450980392156,.2235294117647059],[.06666666666666667,.4823529411764706,.2196078431372549],[.06274509803921569,.47843137254901963,.21568627450980393],[.06274509803921569,.4745098039215686,.21568627450980393],[.058823529411764705,.47058823529411764,.21176470588235294],[.054901960784313725,.4666666666666667,.20784313725490197],[.050980392156862744,.4627450980392157,.20392156862745098],[.047058823529411764,.4588235294117647,.20392156862745098],[.043137254901960784,.4549019607843137,.2],[.043137254901960784,.45098039215686275,.19607843137254902],[.0392156862745098,.4470588235294118,.19607843137254902],[.03529411764705882,.44313725490196076,.19215686274509805],[.03137254901960784,.4392156862745098,.18823529411764706],[.03137254901960784,.43529411764705883,.1843137254901961],[.027450980392156862,.43137254901960786,.1843137254901961],[.023529411764705882,.4235294117647059,.1803921568627451],[.023529411764705882,.4196078431372549,.17647058823529413],[.0196078431372549,.41568627450980394,.17647058823529413],[.0196078431372549,.4117647058823529,.17254901960784313],[.01568627450980392,.40784313725490196,.16862745098039217],[.01568627450980392,.403921568627451,.16862745098039217],[.01568627450980392,.4,.16470588235294117],[.011764705882352941,.39215686274509803,.16470588235294117],[.011764705882352941,.38823529411764707,.1607843137254902],[.00784313725490196,.3843137254901961,.1568627450980392],[.00784313725490196,.3803921568627451,.1568627450980392],[.00784313725490196,.3764705882352941,.15294117647058825],[.00784313725490196,.3686274509803922,.15294117647058825],[.00392156862745098,.36470588235294116,.14901960784313725],[.00392156862745098,.3607843137254902,.1450980392156863],[.00392156862745098,.3568627450980392,.1450980392156863],[.00392156862745098,.35294117647058826,.1411764705882353],[.00392156862745098,.34509803921568627,.1411764705882353],[.00392156862745098,.3411764705882353,.13725490196078433],[0,.33725490196078434,.13725490196078433],[0,.3333333333333333,.13333333333333333],[0,.3254901960784314,.12941176470588237],[0,.3215686274509804,.12941176470588237],[0,.3176470588235294,.12549019607843137],[0,.3137254901960784,.12549019607843137],[0,.3058823529411765,.12156862745098039],[0,.30196078431372547,.12156862745098039],[0,.2980392156862745,.11764705882352941],[0,.2901960784313726,.11764705882352941],[0,.28627450980392155,.11372549019607843],[0,.2823529411764706,.11372549019607843],[0,.2784313725490196,.10980392156862745],[0,.27058823529411763,.10980392156862745],[0,.26666666666666666,.10588235294117647]],orange:[[1,.9607843137254902,.9215686274509803],[1,.9607843137254902,.9176470588235294],[1,.9568627450980393,.9137254901960784],[1,.9568627450980393,.9098039215686274],[1,.9529411764705882,.9058823529411765],[1,.9529411764705882,.9019607843137255],[1,.9490196078431372,.9019607843137255],[1,.9490196078431372,.8980392156862745],[1,.9450980392156862,.8941176470588236],[1,.9450980392156862,.8901960784313725],[1,.9411764705882353,.8862745098039215],[1,.9411764705882353,.8823529411764706],[1,.9372549019607843,.8784313725490196],[1,.9372549019607843,.8745098039215686],[1,.9333333333333333,.8705882352941177],[1,.9333333333333333,.8666666666666667],[.996078431372549,.9294117647058824,.8627450980392157],[.996078431372549,.9294117647058824,.8588235294117647],[.996078431372549,.9254901960784314,.8549019607843137],[.996078431372549,.9254901960784314,.8509803921568627],[.996078431372549,.9215686274509803,.8470588235294118],[.996078431372549,.9215686274509803,.8431372549019608],[.996078431372549,.9176470588235294,.8392156862745098],[.996078431372549,.9176470588235294,.8352941176470589],[.996078431372549,.9137254901960784,.8313725490196079],[.996078431372549,.9137254901960784,.8274509803921568],[.996078431372549,.9098039215686274,.8235294117647058],[.996078431372549,.9098039215686274,.8196078431372549],[.996078431372549,.9058823529411765,.8156862745098039],[.996078431372549,.9019607843137255,.8117647058823529],[.996078431372549,.9019607843137255,.807843137254902],[.996078431372549,.8980392156862745,.8],[.996078431372549,.8980392156862745,.796078431372549],[.996078431372549,.8941176470588236,.792156862745098],[.996078431372549,.8941176470588236,.788235294117647],[.996078431372549,.8901960784313725,.7843137254901961],[.996078431372549,.8862745098039215,.7803921568627451],[.996078431372549,.8862745098039215,.7725490196078432],[.996078431372549,.8823529411764706,.7686274509803922],[.996078431372549,.8823529411764706,.7647058823529411],[.996078431372549,.8784313725490196,.7607843137254902],[.996078431372549,.8745098039215686,.7529411764705882],[.996078431372549,.8745098039215686,.7490196078431373],[.996078431372549,.8705882352941177,.7450980392156863],[.996078431372549,.8666666666666667,.7411764705882353],[.996078431372549,.8666666666666667,.7333333333333333],[.996078431372549,.8627450980392157,.7294117647058823],[.996078431372549,.8588235294117647,.7254901960784313],[.996078431372549,.8549019607843137,.7176470588235294],[.9921568627450981,.8549019607843137,.7137254901960784],[.9921568627450981,.8509803921568627,.7058823529411765],[.9921568627450981,.8470588235294118,.7019607843137254],[.9921568627450981,.8470588235294118,.6980392156862745],[.9921568627450981,.8431372549019608,.6901960784313725],[.9921568627450981,.8392156862745098,.6862745098039216],[.9921568627450981,.8352941176470589,.6784313725490196],[.9921568627450981,.8313725490196079,.6745098039215687],[.9921568627450981,.8313725490196079,.6666666666666666],[.9921568627450981,.8274509803921568,.6627450980392157],[.9921568627450981,.8235294117647058,.6549019607843137],[.9921568627450981,.8196078431372549,.6509803921568628],[.9921568627450981,.8156862745098039,.6431372549019608],[.9921568627450981,.8156862745098039,.6392156862745098],[.9921568627450981,.8117647058823529,.6313725490196078],[.9921568627450981,.807843137254902,.6274509803921569],[.9921568627450981,.803921568627451,.6196078431372549],[.9921568627450981,.8,.615686274509804],[.9921568627450981,.796078431372549,.6078431372549019],[.9921568627450981,.792156862745098,.6],[.9921568627450981,.788235294117647,.596078431372549],[.9921568627450981,.7843137254901961,.5882352941176471],[.9921568627450981,.7803921568627451,.5843137254901961],[.9921568627450981,.7764705882352941,.5764705882352941],[.9921568627450981,.7725490196078432,.5686274509803921],[.9921568627450981,.7686274509803922,.5647058823529412],[.9921568627450981,.7647058823529411,.5568627450980392],[.9921568627450981,.7607843137254902,.5529411764705883],[.9921568627450981,.7568627450980392,.5450980392156862],[.9921568627450981,.7529411764705882,.5372549019607843],[.9921568627450981,.7490196078431373,.5333333333333333],[.9921568627450981,.7450980392156863,.5254901960784314],[.9921568627450981,.7411764705882353,.5176470588235295],[.9921568627450981,.7372549019607844,.5137254901960784],[.9921568627450981,.7333333333333333,.5058823529411764],[.9921568627450981,.7294117647058823,.4980392156862745],[.9921568627450981,.7254901960784313,.49411764705882355],[.9921568627450981,.7215686274509804,.48627450980392156],[.9921568627450981,.7176470588235294,.47843137254901963],[.9921568627450981,.7137254901960784,.4745098039215686],[.9921568627450981,.7098039215686275,.4666666666666667],[.9921568627450981,.7058823529411765,.4588235294117647],[.9921568627450981,.7019607843137254,.4549019607843137],[.9921568627450981,.6980392156862745,.4470588235294118],[.9921568627450981,.6941176470588235,.44313725490196076],[.9921568627450981,.6901960784313725,.43529411764705883],[.9921568627450981,.6862745098039216,.42745098039215684],[.9921568627450981,.6823529411764706,.4235294117647059],[.9921568627450981,.6784313725490196,.41568627450980394],[.9921568627450981,.6745098039215687,.4117647058823529],[.9921568627450981,.6705882352941176,.403921568627451],[.9921568627450981,.6666666666666666,.396078431372549],[.9921568627450981,.6627450980392157,.39215686274509803],[.9921568627450981,.6549019607843137,.3843137254901961],[.9921568627450981,.6509803921568628,.3803921568627451],[.9921568627450981,.6470588235294118,.37254901960784315],[.9921568627450981,.6431372549019608,.3686274509803922],[.9921568627450981,.6392156862745098,.3607843137254902],[.9921568627450981,.6352941176470588,.3568627450980392],[.9921568627450981,.6313725490196078,.34901960784313724],[.9921568627450981,.6274509803921569,.34509803921568627],[.9921568627450981,.6235294117647059,.33725490196078434],[.9921568627450981,.6196078431372549,.3333333333333333],[.9921568627450981,.615686274509804,.3254901960784314],[.9921568627450981,.611764705882353,.3215686274509804],[.9921568627450981,.6078431372549019,.3137254901960784],[.9921568627450981,.6039215686274509,.30980392156862746],[.9882352941176471,.6,.30196078431372547],[.9882352941176471,.596078431372549,.2980392156862745],[.9882352941176471,.592156862745098,.2901960784313726],[.9882352941176471,.5882352941176471,.28627450980392155],[.9882352941176471,.5843137254901961,.2823529411764706],[.9882352941176471,.5764705882352941,.27450980392156865],[.9882352941176471,.5725490196078431,.27058823529411763],[.9882352941176471,.5686274509803921,.2627450980392157],[.9882352941176471,.5647058823529412,.25882352941176473],[.984313725490196,.5607843137254902,.25098039215686274],[.984313725490196,.5568627450980392,.24705882352941178],[.984313725490196,.5529411764705883,.24313725490196078],[.984313725490196,.5490196078431373,.23529411764705882],[.984313725490196,.5450980392156862,.23137254901960785],[.9803921568627451,.5411764705882353,.22745098039215686],[.9803921568627451,.5372549019607843,.2196078431372549],[.9803921568627451,.5333333333333333,.21568627450980393],[.9803921568627451,.5294117647058824,.21176470588235294],[.9803921568627451,.5215686274509804,.20392156862745098],[.9764705882352941,.5176470588235295,.2],[.9764705882352941,.5137254901960784,.19607843137254902],[.9764705882352941,.5098039215686274,.18823529411764706],[.9725490196078431,.5058823529411764,.1843137254901961],[.9725490196078431,.5019607843137255,.1803921568627451],[.9725490196078431,.4980392156862745,.17254901960784313],[.9686274509803922,.49411764705882355,.16862745098039217],[.9686274509803922,.49019607843137253,.16470588235294117],[.9686274509803922,.4823529411764706,.1607843137254902],[.9647058823529412,.47843137254901963,.15294117647058825],[.9647058823529412,.4745098039215686,.14901960784313725],[.9607843137254902,.47058823529411764,.1450980392156863],[.9607843137254902,.4666666666666667,.1411764705882353],[.9607843137254902,.4627450980392157,.13725490196078433],[.9568627450980393,.4588235294117647,.13333333333333333],[.9568627450980393,.4549019607843137,.12549019607843137],[.9529411764705882,.45098039215686275,.12156862745098039],[.9529411764705882,.4470588235294118,.11764705882352941],[.9490196078431372,.4392156862745098,.11372549019607843],[.9490196078431372,.43529411764705883,.10980392156862745],[.9450980392156862,.43137254901960786,.10588235294117647],[.9450980392156862,.42745098039215684,.10196078431372549],[.9411764705882353,.4235294117647059,.09803921568627451],[.9411764705882353,.4196078431372549,.09411764705882353],[.9372549019607843,.41568627450980394,.09019607843137255],[.9372549019607843,.4117647058823529,.08627450980392157],[.9333333333333333,.40784313725490196,.08235294117647059],[.9294117647058824,.403921568627451,.0784313725490196],[.9294117647058824,.4,.0784313725490196],[.9254901960784314,.396078431372549,.07450980392156863],[.9254901960784314,.38823529411764707,.07058823529411765],[.9215686274509803,.3843137254901961,.06666666666666667],[.9176470588235294,.3803921568627451,.06274509803921569],[.9176470588235294,.3764705882352941,.06274509803921569],[.9137254901960784,.37254901960784315,.058823529411764705],[.9098039215686274,.3686274509803922,.054901960784313725],[.9098039215686274,.36470588235294116,.054901960784313725],[.9058823529411765,.3607843137254902,.050980392156862744],[.9019607843137255,.3568627450980392,.047058823529411764],[.8980392156862745,.35294117647058826,.047058823529411764],[.8941176470588236,.34901960784313724,.043137254901960784],[.8941176470588236,.34509803921568627,.043137254901960784],[.8901960784313725,.3411764705882353,.0392156862745098],[.8862745098039215,.33725490196078434,.03529411764705882],[.8823529411764706,.3333333333333333,.03529411764705882],[.8784313725490196,.32941176470588235,.03137254901960784],[.8745098039215686,.3254901960784314,.03137254901960784],[.8705882352941177,.3215686274509804,.03137254901960784],[.8666666666666667,.3215686274509804,.027450980392156862],[.8627450980392157,.3176470588235294,.027450980392156862],[.8588235294117647,.3137254901960784,.023529411764705882],[.8549019607843137,.30980392156862746,.023529411764705882],[.8509803921568627,.3058823529411765,.023529411764705882],[.8470588235294118,.30196078431372547,.0196078431372549],[.8431372549019608,.2980392156862745,.0196078431372549],[.8392156862745098,.2980392156862745,.0196078431372549],[.8352941176470589,.29411764705882354,.01568627450980392],[.8313725490196079,.2901960784313726,.01568627450980392],[.8235294117647058,.28627450980392155,.01568627450980392],[.8196078431372549,.2823529411764706,.01568627450980392],[.8156862745098039,.2823529411764706,.01568627450980392],[.8117647058823529,.2784313725490196,.011764705882352941],[.803921568627451,.27450980392156865,.011764705882352941],[.8,.27058823529411763,.011764705882352941],[.796078431372549,.27058823529411763,.011764705882352941],[.788235294117647,.26666666666666666,.011764705882352941],[.7843137254901961,.2627450980392157,.011764705882352941],[.7803921568627451,.2627450980392157,.011764705882352941],[.7725490196078432,.25882352941176473,.011764705882352941],[.7686274509803922,.2549019607843137,.011764705882352941],[.7607843137254902,.2549019607843137,.00784313725490196],[.7568627450980392,.25098039215686274,.00784313725490196],[.7490196078431373,.24705882352941178,.00784313725490196],[.7450980392156863,.24705882352941178,.00784313725490196],[.7411764705882353,.24313725490196078,.00784313725490196],[.7333333333333333,.24313725490196078,.00784313725490196],[.7294117647058823,.23921568627450981,.00784313725490196],[.7215686274509804,.23921568627450981,.00784313725490196],[.7176470588235294,.23529411764705882,.00784313725490196],[.7098039215686275,.23137254901960785,.00784313725490196],[.7058823529411765,.23137254901960785,.00784313725490196],[.6980392156862745,.22745098039215686,.011764705882352941],[.6941176470588235,.22745098039215686,.011764705882352941],[.6862745098039216,.2235294117647059,.011764705882352941],[.6823529411764706,.2235294117647059,.011764705882352941],[.6745098039215687,.2196078431372549,.011764705882352941],[.6705882352941176,.2196078431372549,.011764705882352941],[.6666666666666666,.21568627450980393,.011764705882352941],[.6588235294117647,.21568627450980393,.011764705882352941],[.6549019607843137,.21176470588235294,.011764705882352941],[.6470588235294118,.21176470588235294,.011764705882352941],[.6431372549019608,.20784313725490197,.011764705882352941],[.6392156862745098,.20784313725490197,.011764705882352941],[.6313725490196078,.20392156862745098,.011764705882352941],[.6274509803921569,.20392156862745098,.011764705882352941],[.6235294117647059,.2,.011764705882352941],[.615686274509804,.2,.011764705882352941],[.611764705882353,.19607843137254902,.011764705882352941],[.6078431372549019,.19607843137254902,.011764705882352941],[.6,.19215686274509805,.011764705882352941],[.596078431372549,.19215686274509805,.011764705882352941],[.592156862745098,.18823529411764706,.011764705882352941],[.5843137254901961,.18823529411764706,.011764705882352941],[.5803921568627451,.1843137254901961,.011764705882352941],[.5764705882352941,.1843137254901961,.011764705882352941],[.5725490196078431,.1803921568627451,.01568627450980392],[.5647058823529412,.1803921568627451,.01568627450980392],[.5607843137254902,.17647058823529413,.01568627450980392],[.5568627450980392,.17647058823529413,.01568627450980392],[.5529411764705883,.17254901960784313,.01568627450980392],[.5450980392156862,.17254901960784313,.01568627450980392],[.5411764705882353,.16862745098039217,.01568627450980392],[.5372549019607843,.16862745098039217,.01568627450980392],[.5333333333333333,.16470588235294117,.01568627450980392],[.5254901960784314,.16470588235294117,.01568627450980392],[.5215686274509804,.1607843137254902,.01568627450980392],[.5176470588235295,.1607843137254902,.01568627450980392],[.5137254901960784,.1568627450980392,.01568627450980392],[.5058823529411764,.1568627450980392,.01568627450980392],[.5019607843137255,.15294117647058825,.01568627450980392],[.4980392156862745,.15294117647058825,.01568627450980392]]},$e={OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},AntiSpectral:{3:["#99d594","#ffffbf","#fc8d59"],4:["#2b83ba","#abdda4","#fdae61","#d7191c"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#3288bd","#66c2a5","#abdda4","#ffffbf","#fee08b","#e6f598","#fdae61","#f46d43","#d53e4f"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};class Pe{constructor(t="time (inc)",e=0,i=0,s="OrRd",a="9"){this.catColors=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"],this.categoricalColors=ke,this.colorbrewer=$e,this.UniformColorMaps=Te,this.metric=t,this.colorMin=e,this.colorMax=i,this.colors=this.colorbrewer[s][a],this.colorPadding=this.setColorPadding(a),this.colorScale=this.setColorScale(),this.grey="#252525",this.highlight="#AF9B90","MeanGradients"==t&&(this.target="#4DAF4A",this.ensemble="#C0C0C0",this.compare="#043060")}getDomain(){return this.colorScale.domain()}getColor(t,e){let i=t[e];return Object.keys(t).includes("attr_dict")&&(i=t["attr_dict"][e]),this.colorScale(i)}getColorByValue(t){return this.rgbArrayToHex(this.colorScale(t))}setColorPadding(t){let e=[],i=1/t;for(let s=0;s<t;s+=1)e.push(s*i);return e.push(1),e}setColorScale(){let t=null;switch(this.metric){case"Module":t=J["u"](J["w"]);break;case"time (inc)":t=we["scale"](this.colors).padding([0,0]).gamma(.5).domain([this.colorMin,this.colorMax]);break;case"time":t=we["scale"](this.colors).padding([0,0]).gamma(.5).domain([this.colorMin,this.colorMax]);break;case"Imbalance":t=we["scale"](this.colors).domain([0,1]);break;case"MeanDiff":{let e=Math.max(Math.abs(this.colorMin),Math.abs(this.colorMax));t=we["scale"]("RdYlGn").padding([0,0]).domain([e,-e]);break}case"RankDiff":t=we["scale"](this.colors).gamma(.5).domain([this.colorMin,this.colorMax]);break;case"MeanGradients":t=we["scale"](this.colors).padding([0,0]).gamma(.5).domain([this.colorMin,this.colorMax]);break}return t}CYKToRGB(t){let e={},i=t[0],s=t[1],a=t[2],o=0;function r(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return e.r=1-Math.min(1,i*(1-o)+o),e.g=1-Math.min(1,s*(1-o)+o),e.b=1-Math.min(1,a*(1-o)+o),e.r=Math.round(255*e.r),e.g=Math.round(255*e.g),e.b=Math.round(255*e.b),"#"+r(e.r)+r(e.g)+r(e.b)}setContrast(t){const e=this.hexToRgb(t),i=Math.round((299*parseInt(e.r)+587*parseInt(e.g)+114*parseInt(e.b))/1e3);return i>128?"#000":"#fff"}getAllColors(){return Object.keys(this.colorbrewer)}getCatColor(t){return this.catColors[t]}hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}rgbToHex(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)}rgbArrayToHex(t){t=t._rgb;let e=Math.floor(t[0]),i=Math.floor(t[1]),s=Math.floor(t[2]);return"#"+((1<<24)+(e<<16)+(i<<8)+s).toString(16).slice(1)}valToPercentColor(t,e){const i=Math.min(Math.max(0,Math.round(t*e.length)),e.length-1);return e[i]}percentColToD3Rgb(t){const e=t.map(t=>Math.round(255*t));return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}valToD3Rgb(t,e){return this.percentColToD3Rgb(this.valToPercentColor(t,e))}}var Re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-col",{staticClass:"pa-0"},[i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-subheader",{staticClass:"teal lighten-4"},[t._v("SuperGraph Encoding")])],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-select",{attrs:{label:"Metric",items:t.metrics,value:t.selectedMetric,"menu-props":{maxHeight:"200"},"persistent-hint":""},on:{change:t.updateSelectedMetric}})],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-select",{attrs:{label:"Runtime Color Map",items:t.runtimeColorMap,value:t.selectedRuntimeColorMap,"menu-props":{maxHeight:"200"},"persistent-hint":""},on:{change:t.updateRuntimeColorMap}})],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-select",{attrs:{label:"Distribution Color Map",items:t.distributionColorMap,value:t.selectedDistributionColorMap,"menu-props":{maxHeight:"200"},"persistent-hint":"",disabled:"ESG"!==t.selectedMode},on:{change:t.updateDistributionColorMap}})],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-text-field",{staticClass:"mt-0",attrs:{label:"Color points (3-9)",type:"number",value:t.selectedColorPoint,"menu-props":{maxHeight:"200"},"persistent-hint":""},on:{change:t.updateSelectedColorPoint}})],1),[i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-subheader",{staticClass:"teal lighten-4"},[t._v("Runtime Encoding")])],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:"","v-show":"SG"==t.selectedMode}},[i("v-text-field",{staticClass:"mt-0",attrs:{label:"Number of bins for MPI Distribution",type:"number",value:t.selectedRankBinCount,"menu-props":{maxHeight:"200"},"persistent-hint":"",disabled:"SG"!=t.selectedMode},on:{change:t.updateRankBinCount}})],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-text-field",{staticClass:"mt-0",attrs:{label:"Number of bins for Run Distribution",type:"number",value:t.selectedRunBinCount,"menu-props":{maxHeight:"200"},"persistent-hint":"",disabled:"ESG"!==t.selectedMode},on:{change:t.updateRunBinCount}})],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-select",{attrs:{label:"Bin by attribute",items:t.props,value:t.selectedProp,"menu-props":{maxHeight:"200"},"persistent-hint":"",disabled:!0},on:{change:t.updateProp}})],1)],[i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-subheader",{staticClass:"teal lighten-4"},[t._v("Call site Variability")])],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-select",{attrs:{label:"Sort by",items:t.sortByModes,value:t.selectedRuntimeSortBy,"menu-props":{maxHeight:"200"},"persistent-hint":"",disabled:"ESG"!==t.selectedMode&&"SG"!=t.selectedMode},on:{change:t.updateRuntimeSortBy}})],1),i("v-flex",{staticClass:"ma-1",attrs:{xs12:""}},[i("v-text-field",{staticClass:"mt-0",attrs:{label:"IQR Factor",type:"float",value:t.selectedIQRFactor,"menu-props":{maxHeight:"200"},"persistent-hint":"",disabled:"ESG"!==t.selectedMode&&"SG"!=t.selectedMode},on:{change:t.updateIQRFactor}})],1)]],2)},Oe=[],De={name:"Settings",data:()=>({colorPoints:[3,4,5,6,7,8,9],metrics:["time","time (inc)"],runtimeColorMap:(new Pe).getAllColors(),distributionColorMap:(new Pe).getAllColors(),sortByModes:["min","mean","max","imb","var","kert","skew"],compareModes:["MEAN_DIFF","RANK_DIFF"],selectedCompareMode:"MEAN_DIFF",props:["name","rank","dataset"]}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",selectedRuntimeColorMap:"getRuntimeColorMap",selectedDistributionColorMap:"getDistributionColorMap",selectedColorPoint:"getColorPoint",selectedMode:"getSelectedMode",selectedRunBinCount:"getRunBinCount",selectedRankBinCount:"getRankBinCount",selectedRuntimeSortBy:"getRuntimeSortBy",selectedTargetColor:"getTargetColor",selectedIQRFactor:"getIQRFactor",selectedCompareRun:"getCompareRun",selectedProp:"getProp",targetColorMap:"getTargetColorMap"}),targetColors:function(){return Object.keys(this.targetColorMap)}},methods:{...Object(c["b"])(["updateSelectedMetric","updateRuntimeColorMap","updateSelectedColorPoint","updateDistributionColorMap","updateTargetColor","updateRankBinCount","updateRunBinCount","updateRuntimeSortBy","updateCompareRun","updateProp","updateIQRFactor"]),init(){this.runtimeColorMap=(new Pe).getAllColors(),this.distributionColorMap=(new Pe).getAllColors()},clear(){}}},Ee=De,Ae=i("e0c7"),He=Object(m["a"])(Ee,Re,Oe,!1,null,null,null),Be=He.exports;b()(He,{VCol:G["a"],VFlex:St["a"],VSelect:gt["a"],VSubheader:Ae["a"],VTextField:bt["a"]});var Ie={name:"CCT",components:{Splitpanes:$t.a,NodeLink:fe,Toolbar:Me,Settings:Be},data:()=>({id:"cct-overview",selectedFunctionsInCCT:70,isSettingsOpen:!1,selectedComponents:[]}),computed:{...Object(c["c"])({runs:"getRuns",summary:"getSummary",selectedTargetRun:"getSelectedTargetRun",selectedMetric:"getSelectedMetric",metricTimeMap:"getMetricTimeMap",runtimeColorMap:"getRuntimeColorMap",colorPoint:"getColorPoint",isComparisonMode:"getComparisonMode",selectedCompareRun:"getSelectedCompareRun",selectedMode:"getSelectedMode"})},beforeCreate(){this.$store.dispatch("fetchSummary"),this.$store.commit("setSelectedMode","CCT"),this.$store.commit("setEncoding","MEAN")},mounted(){let t=this;At.$on("reset-cct",()=>{t.reset()})},watch:{isSettingsOpen:function(t){this.$emit("update:isSettingsOpen",t)},summary:function(t){this.isDataReady=!0,this.init()}},methods:{init(){console.log("[CCT] Selected Target Run: ",this.selectedTargetRun),this.isComparisonMode&&console.log("[CCT] Selected Compare Run: ",this.selectedCompareRun),console.log("[CCT] Selected Mode: ",this.selectedMode),console.log("[CCT] Selected Metric: ",this.selectedMetric),this.currentComponents=this.setComponentMap(),this.setupColors(),this.initComponents(this.currentComponents)},setupColors(){const t=this.summary[this.selectedTargetRun][this.selectedMetric],[e,i]=ft(t),s="OrRd";this.$store.commit("setRuntimeColorMap",s),this.$store.runtimeColor=new Pe(this.selectedMetric,e,i,s,this.selectedColorPoint)},setComponentMap(){let t=[this.$refs.CCT1,this.$refs.Settings];return this.isComparisonMode&&t.push(this.$refs.CCT2),t},clear(){this.clearComponents(this.currentComponents)},reset(){this.clear(),this.init()},initComponents(t){this.$refs.CCT1.init(this.selectedTargetRun),this.isComparisonMode&&this.$refs.CCT2.init(this.selectedCompareRun),this.$refs.Settings.init()},clearComponents(t){for(let e=0;e<t.length;e++)t[e].clear()},closeSettings(){this.isSettingsOpen=!this.isSettingsOpen}}},Ge=Ie,ze=i("f774"),Ne=Object(m["a"])(Ge,wt,kt,!1,null,null,null),Le=Ne.exports;b()(Ne,{VBtn:k["a"],VCard:B["a"],VCol:G["a"],VIcon:Nt["a"],VMain:T["a"],VNavigationDrawer:ze["a"],VRow:L["a"]});var je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"inspire"}},[Object.keys(t.metricTimeMap).length>0?i("Toolbar",{ref:"ToolBar",attrs:{isSettingsOpen:t.isSettingsOpen},on:{"update:isSettingsOpen":function(e){t.isSettingsOpen=e},"update:is-settings-open":function(e){t.isSettingsOpen=e}}}):t._e(),i("v-navigation-drawer",{attrs:{fixed:""},model:{value:t.isSettingsOpen,callback:function(e){t.isSettingsOpen=e},expression:"isSettingsOpen"}},[i("v-card",{attrs:{"fill-height":""}},[i("v-col",[i("v-row",[i("v-icon",{attrs:{color:"teal"}},[t._v("settings")]),i("v-col",{staticClass:"center teal--text",attrs:{cols:"9"}},[t._v("SETTINGS")]),i("v-btn",{attrs:{icon:""}},[i("v-icon",{on:{click:function(e){return t.closeSettings()}}},[t._v("close")])],1)],1),i("v-row",{attrs:{align:"center",justify:"space-around"}},[i("v-btn",{staticClass:"mx-0",attrs:{icon:""}},[t._v(" Reload "),i("v-icon",{on:{click:function(e){return t.reset()}}},[t._v("refresh")])],1)],1)],1)],1),i("Settings",{ref:"Settings"})],1),i("v-row",{staticClass:"pa-0 ma-0"},[i("splitpanes",{staticClass:"default-theme",attrs:{id:"callgraph-dashboard"}},[i("splitpanes",{attrs:{horizontal:"","splitpanes-size":25}},[i("SingleHistogram",{ref:"SingleHistogram"}),i("SingleScatterplot",{ref:"SingleScatterplot"})],1),i("splitpanes",{attrs:{horizontal:"","splitpanes-size":55}},[i("Sankey",{ref:"Sankey"})],1),i("splitpanes",{attrs:{horizontal:"","splitpanes-size":20}},[i("CallsiteInformation",{ref:"CallsiteInformation"})],1)],1)],1)],1)},Ve=[],We=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{row:"",wrap:"",id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}}),i("svg",{attrs:{id:t.svgID}}),i("ToolTip",{ref:"ToolTip"})],1)},Fe=[],qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:"tooltip-histogram"}})},Ye=[],Xe={name:"ToolTip",components:{},props:[],data:()=>({id:"single-histogram-tooltip",textCount:0,textxOffset:20,textyOffset:20,textPadding:13,offset:15,fontSize:12}),methods:{init(t){this.parentID=t,this.toolTipDiv=J["y"]("#"+this.parentID).append("svg").attr("class","toolTipSVG"),this.toolTipG=this.toolTipDiv.append("g"),this.height=document.getElementById(this.parentID).clientHeight,this.halfWidth=document.getElementById(this.parentID).clientWidth/2},render(t,e){this.clear();const i=J["s"]().domain([2,11]).range([this.containerWidth,this.containerHeight]);this.mousePos=J["o"](J["y"]("#"+this.parentID).node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.toolTipG.attr("height",i(10)+"px"),this.node=e,this.data=t,this.addText(this.data)},addText(t){const e=150,i=lt(t,e);this.toolTipRect=this.toolTipG.append("rect").attrs({class:"toolTipContent",fill:"white",stroke:"black",rx:"10px","fill-opacity":1,width:i.width+30,height:i.height/1.5+this.offset/1.5}).attrs({x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.parentID).clientWidth?this.mousePosX-this.halfWidth+"px":this.mousePosX+"px",y:()=>this.mousePosY+"px"}).style("z-index",2),this.textCount+=1,this.toolTipText=this.toolTipG.append("text").style("font-family","sans-serif").style("font-size",this.fontSize).attrs({class:"toolTipContent",x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.parentID).clientWidth?this.mousePosX+this.offset-this.halfWidth+"px":this.mousePosX+this.offset+"px",y:()=>this.mousePosY+this.offset+"px"}).style("z-index",2).text(t).call(dt,e)},clear(){this.textCount=0,J["z"](".toolTipContent").remove()}}},Ue=Xe,Qe=Object(m["a"])(Ue,qe,Ye,!1,null,null,null),Ke=Qe.exports,Ze={name:"SingleScatterplot",components:{ToolTip:Ke,InfoChip:Vt},data:()=>({padding:{top:10,right:10,bottom:30,left:20},xData:[],yData:[],xMin:0,xMax:0,yMin:0,yMax:0,firstRender:!0,boxHeight:0,boxWidth:0,id:"scatterplot-view",svgID:"scatterplot-view-svg",boxOffset:20,superscript:"â°Â¹Â²Â³â´âµâ¶â·â¸â¹",paddingFactor:3.5,x_max_exponent:0,y_max_exponent:0,xAxisHeight:0,yAxisHeight:0,title:"MPI Runtime Scatterplot",infoSummary:"MPI Runtime Scatterplot view correlates between the inclusive and exclusive runtime metrics. Each dot or point in the view represents a process.",info:""}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",selectedNode:"getSelectedNode",data:"getSingleScatterplot",summary:"getSummary",generalColors:"getGeneralColors"})},watch:{data:function(){this.visualize()}},mounted(){let t=this;At.$on("reset-single-scatterplot",(function(){t.clear(),t.init()}))},methods:{init(){this.$store.dispatch("fetchSingleScatterplot",{dataset:this.selectedTargetRun,node:this.selectedNode["name"],ntype:this.selectedNode["type"],orientation:["time","time (inc)"]}),this.width=.25*this.$store.viewWidth,this.height=.5*this.$store.viewHeight,this.boxWidth=this.width-this.padding.right-this.padding.left,this.boxHeight=this.height-this.padding.top-this.padding.bottom,this.svg=J["y"]("#"+this.svgID).attr("width",this.boxWidth).attr("height",this.boxHeight-this.padding.top).attr("transform","translate("+this.padding.left+","+this.padding.top+")"),this.xAxisHeight=this.boxWidth-4*this.padding.left,this.yAxisHeight=this.boxHeight-4*this.padding.left},visualize(){this.xMin=this.data.xMin,this.yMin=this.data.yMin,this.xMax=this.data.xMax,this.yMax=this.data.yMax,this.xArray=this.data.x,this.yArray=this.data.y,this.ranks=this.data.ranks,this.xScale=J["s"]().domain([this.xMin,this.xMax]).nice(5).range([0,this.xAxisHeight]),this.yScale=J["s"]().domain([this.yMin,this.yMax]).nice(5).range([this.yAxisHeight,this.padding.top]),this.xAxis(),this.yAxis(),this.dots(),this.trendline(),this.$refs.ToolTip.init(this.svgID)},addxAxisLabel(){let t=this.xScale.domain()[1];this.x_max_exponent=ot(t);this.superscript[this.x_max_exponent];let e="(e+"+this.x_max_exponent+") Exclusive Runtime (Î¼s)";this.svg.append("text").attrs({class:"ss-axis-label",x:this.boxWidth-this.padding.right,y:this.yAxisHeight+3*this.padding.top}).style("text-anchor","end").style("font-size","12px").text(e)},xAxis(){let t=this;this.addxAxisLabel();const e=J["c"](this.xScale).ticks(5).tickFormat((e,i)=>{let s=at(e,t.x_max_exponent);return""+Math.round(100*s[0])/100});let i=this.svg.append("g").attrs({class:"axis",id:"xAxis",transform:"translate("+this.paddingFactor*this.padding.left+","+this.yAxisHeight+")"}).call(e);i.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),i.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px"),i.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")},addyAxisLabel(){let t=this.yScale.domain()[1];this.y_max_exponent=ot(t);this.superscript[this.y_max_exponent];let e="(e+"+this.y_max_exponent+") Inclusive Runtime (Î¼s)";this.svg.append("text").attrs({class:"ss-axis-label",transform:"rotate(-90)",x:-this.padding.top,y:.5*this.padding.left}).style("text-anchor","end").style("font-size","12px").text(e)},yAxis(){let t=this,e=5;this.addyAxisLabel();let i=J["d"](this.yScale).ticks(e).tickFormat((e,i)=>{let s=at(e,t.y_max_exponent);return s[0]});const s=this.svg.append("g").attr("id","yAxis").attr("class","axis").attr("transform","translate("+this.paddingFactor*this.padding.left+", 0)").call(i);s.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),s.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.5),s.selectAll("text").style("font-size","14px").style("font-family","sans-serif").style("font-weight","lighter")},trendline(){const t=ht(this.xArray,this.yArray);this.info="Correlation : "+Math.round(1e3*t[2])/1e3;var e=this.xMin,i=t[0]*this.xMin+t[1],s=this.xMax,a=t[0]*this.xMax+t[1],o=[[e,i,s,a]],r=this.svg.selectAll(".trendline").data(o);r.enter().append("line").attr("class","trendline").attr("x1",t=>this.xScale(t[0])).attr("y1",t=>this.yScale(t[1])).attr("x2",t=>this.xScale(t[2])).attr("y2",t=>this.yScale(t[3])).attr("stroke","red").attr("stroke-width",1).attr("transform","translate("+3*this.padding.left+","+this.padding.top+")")},dots(){let t=[];for(let i=0;i<this.yArray.length;i+=1)t.push({x:this.xArray[i],y:this.yArray[i],rank:this.ranks[i]});let e=this;this.svg.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("r",5).attr("cx",(t,e)=>this.xScale(this.xArray[e])+3*this.padding.left).attr("cy",(t,e)=>this.yScale(this.yArray[e])).style("fill",this.generalColors.intermediate).style("stroke","#202020").style("stroke-width",.5).on("mouseover",(function(t,i){J["z"](".dot").style("fill",e.generalColors.intermediate).style("stroke",e.generalColors.intermediate).style("fill-opacity",.1),J["y"](this).style("fill","orange").style("stroke","#202020").style("fill-opacity",1);const s="MPI rank: "+t.rank;e.$refs.ToolTip.render(s,t)})).on("mouseout",(function(t,i){J["z"](".dot").style("fill",e.generalColors.intermediate).style("stroke","#202020").style("fill-opacity",1),e.$refs.ToolTip.clear()}))},clear(){J["z"](".dot").remove(),J["z"](".axis").remove(),J["z"](".trendline").remove(),J["z"](".ss-axis-label").remove(),this.$refs.ToolTip.clear()}}},Je=Ze,ti=i("a722"),ei=Object(m["a"])(Je,We,Fe,!1,null,null,null),ii=ei.exports;b()(ei,{VLayout:ti["a"]});var si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{row:"",wrap:"",id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}}),i("svg",{attrs:{id:t.svgID}}),i("ToolTip",{ref:"ToolTip"})],1)},ai=[];class oi{constructor(){this.url="http://localhost:5000/"}timeoutPromise(t,e){return new Promise((i,s)=>{const a=setTimeout(()=>{s(new Error("Promise times out"))},t);e.then(t=>{clearTimeout(a),i(t)},t=>{clearTimeout(a),s(t)})})}POSTRequest(t="",e={}){const i=this.url+t;console.log("[POST Request]",i,"body: ",e);const s=fetch(i,{method:"POST",cache:"default",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>{switch(t.status){case 200:return t.json();case 401:return Promise.reject("unauthorized");case 500:return Promise.reject("not_allowed");default:return Promise.reject("unknown_error")}}).catch(t=>(console.error(t),Promise.reject(t)));return this.timeoutPromise(1e4,s)}GETRequest(t="",e={"Content-Type":"application/json"}){const i=this.url+t;console.debug("[GET Request]",i,e);const s=fetch(i,{method:"GET",headers:e,cache:"default"}).then(t=>{switch(t.status){case 200:return t.json();case 401:return Promise.reject("unauthorized");case 500:return Promise.reject("not_allowed");default:return Promise.reject("unknown_error")}}).catch(t=>(console.error(t),Promise.reject(t)));return this.timeoutPromise(1e4,s)}}var ri=new oi,ni={name:"SingleHistogram",components:{ToolTip:Ke,InfoChip:Vt},data:()=>({width:null,height:null,histogramHeight:null,histogramWidth:null,padding:{top:10,right:10,bottom:20,left:15},dataset_index:[],id:"single-histogram-view",svg:null,svgID:"single-histogram-view-svg",firstRender:!0,xVals:[],freq:[],selectedColorBy:"Inclusive",MPIcount:0,paddingFactor:3.5,bottomMargin:15,boxOffset:20,x_max_exponent:0,superscript:"â°Â¹Â²Â³â´âµâ¶â·â¸â¹",title:"MPI Runtime Distribution",infoSummary:"MPI runtime distribution view shows the sampled distribution of the process-based metrics for a selected node. To connect the processes (e.g., MPI ranks) to the physical domain, we use shadow lines to visualize the rank-to-bin mapping. Shadow lines map the bins in the histogram to the process/rank id laid out on an ordered line at the bottom of the histogram.",info:"",selectedProp:"rank",selectedScale:"Linear"}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",selectedMetric:"getSelectedMetric",selectedNode:"getSelectedNode",rankBinCount:"getRankBinCount",data:"getSingleHistogram",generalColors:"getGeneralColors",selectedRankBinCount:"getRankBinCount"})},watch:{data:function(t){this.visualize(t)}},mounted(){let t=this;At.$on("reset-single-histogram",(function(){t.clear(),t.init()}))},methods:{init(){this.$store.dispatch("fetchSingleHistogram",{dataset:this.selectedTargetRun,node:this.selectedNode["name"],ntype:this.selectedNode["type"],nbins:this.selectedRankBinCount}),this.width=.25*window.innerWidth,this.height=.5*this.$store.viewHeight,this.boxWidth=this.width-this.padding.right-this.padding.left,this.boxHeight=this.height-this.padding.top-this.padding.bottom,this.histogramOffset=Math.floor(this.boxHeight/4),this.histogramHeight=this.boxHeight-this.histogramOffset,this.histogramWidth=this.boxWidth,this.rankScaleHeight=this.boxHeight-this.histogramHeight,this.rankScaleWidth=this.histogramWidth,this.xAxisHeight=this.histogramWidth-(this.paddingFactor-1.5)*this.padding.left,this.yAxisHeight=this.histogramHeight-(this.paddingFactor-1.5)*this.padding.left,this.svg=J["y"]("#"+this.svgID).attrs({width:this.boxWidth,height:this.boxHeight,transform:"translate("+this.padding.left+","+this.padding.top+")"}).append("g")},visualize(){this.info=this.selectedNode["name"]+" ("+this.selectedNode["type"][0].toUpperCase()+")",this.setupScale(),this.bars(),this.xAxis(),this.yAxis(),this.rankLineScale(),this.brushes(),this.$refs.ToolTip.init(this.svgID)},setupScale(){const t=this.data[this.selectedMetric][this.selectedProp],e=this.data[this.selectedMetric]["d"];let i=this.dataProcess(t,e);this.xVals=i[0],this.freq=i[1],this.axis_x=i[2],this.binContainsProcID=i[3],this.logScaleBool=!1,this.xScale=J["r"]().domain(this.xVals).range([this.paddingFactor*this.padding.left,this.xAxisHeight]),"Linear"==this.selectedScale?(this.yScale=J["s"]().domain([0,J["m"](this.freq)]).range([this.yAxisHeight,this.padding.top]),this.logScaleBool=!1):"Log"==this.selectedScale&&(this.yScale=J["t"]().domain([1,J["m"](this.freq)]).range([this.yAxisHeight,this.padding.top]),this.logScaleBool=!0)},clear(){J["y"]("#"+this.svgID).select("g").remove(),J["z"](".single-histogram-bar").remove(),J["y"](".x-axis").remove(),J["y"](".y-axis").remove(),J["z"](".histogram-axis-label").remove(),J["z"](".binRank").remove(),J["z"](".lineRank").remove(),J["z"](".brush").remove(),J["z"](".histogram-rank-axis").remove(),this.$refs.ToolTip.clear()},array_unique(t){return t.filter((function(t,e,i){return i.indexOf(t)===e}))},dataProcess(t){let e=[],i=t["x_min"],s=t["x_max"];const a=(s-i)/(t["x"].length-1);for(let o=0;o<t["x"].length;o++)e.push(i+o*a);return[t["x"],t["y"],e,t["dig"]]},removeDuplicates(t){var e={};return t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}))},groupProcess(t){const e=t.slice();let i=0,s="[ ";const a=[];let o=!0;function r(t,s){t+1==e[s]?(t=e[s],s+=1,r(t,s)):n(i,s-1)}function n(t,s){l(t,s),s++,i=s;const a=e[s];s<e.length&&r(a,s+1)}function l(t,i){let r="";const n=[];t!=i?(r=`[${e[t]}-${e[i]}]`,n.push(e[t]),n.push(e[i])):(r=`[${e[t]}]`,n.push(e[t])),o||(s+=", "),s+=r,a.push(n),o=!1}return r(e[0],1),s+=" ]",{string:s,array:a}},sanitizeGroupProc(t){return t.replace(/\[/g,"").replace(/]/g,"")},bars(){let t=this;this.svg.selectAll(".single-histogram-bar").data(this.freq).enter().append("rect").attrs({class:"single-histogram-bar",x:(t,e)=>this.xScale(this.xVals[e]),y:(t,e)=>this.yScale(t),width:this.xScale.bandwidth(),height:t=>Math.abs(this.yAxisHeight-this.yScale(t)),fill:this.generalColors.intermediate,opacity:1,"stroke-width":"0.2px",stroke:"#202020"}).style("z-index",1).on("click",(function(e,i){J["y"](this).attr("fill","orange"),J["z"](".lineRank_"+i).style("fill","orange").style("fill-opacity",1);let s=t.groupProcess(t.binContainsProcID[i]).string;s="MPI ranks:"+t.sanitizeGroupProc(s),t.$refs.ToolTip.render(s,e)})).on("mouseover",(function(e,i){J["y"](this).attr("fill","orange"),J["z"](".lineRank").style("fill-opacity",.1),J["z"](".lineRank_"+i).style("fill","orange").style("fill-opacity",1);let s=t.groupProcess(t.binContainsProcID[i]).string;s=e+" MPI ranks:"+t.sanitizeGroupProc(s),t.$refs.ToolTip.render(s,e)})).on("mouseout",(function(e,i){J["y"](this).attr("fill",t.generalColors.intermediate),J["z"](".lineRank").style("fill","grey").style("fill-opacity",.4),t.$refs.ToolTip.clear()}))},addxAxisLabel(){let t=this.xScale.domain()[1];this.x_max_exponent=ot(t);this.superscript[this.x_max_exponent];let e="(e+"+this.x_max_exponent+") "+this.selectedMetric+" Runtime (Î¼s)";this.svg.append("text").attrs({class:"histogram-axis-label",x:this.histogramWidth-this.padding.left,y:this.yAxisHeight+3*this.padding.top}).style("font-size","12px").style("text-anchor","end").text(e)},xAxis(){this.addxAxisLabel();const t=J["c"](this.xScale).ticks(10).tickFormat((t,e)=>{if(e%3==0){let t=at(this.xVals[e],self.x_max_exponent);return""+t[0]}}),e=this.svg.append("g").attrs({class:"x-axis",transform:"translate(0,"+this.yAxisHeight+")"}).call(t);e.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),e.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.5),e.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")},yAxis(){const t=J["d"](this.yScale).ticks(10).tickFormat((t,e)=>{if(t%1==0)return t});this.svg.append("text").attrs({transform:"rotate(-90)",class:"histogram-axis-label",x:-this.padding.top,y:this.padding.left}).style("font-size","12px").style("text-anchor","end").text("Number of Processes");const e=this.svg.append("g").attrs({class:"y-axis",transform:"translate("+this.paddingFactor*this.padding.left+", 0)"}).call(t);e.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),e.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.2),e.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")},rankLineScale(){let t=this.data[this.selectedMetric].d.length;this.ranklinescale=J["s"]().domain([0,t]).range([this.paddingFactor*this.padding.left,this.xAxisHeight]),this.freq.forEach((e,i)=>{const s=this.binContainsProcID[i];if(s){const e=this.svg.append("g").attr("class","binRank bin_"+i).attr("data-name",i);s.sort((t,e)=>t-e);const a=this.groupProcess(s).array,o=this.xScale.bandwidth(),r=o/t,n=this.xScale(this.xVals[i]);let l=0;a.forEach(t=>{let s=0,a=0;1==t.length?(s=t[0],a=s+1):(s=t[0],a=t[1]+1);let d=l+n+r+o/4,c=l+(a-s+1)*r+n+o/4,h=this.ranklinescale(s),f=this.ranklinescale(a),p=this.boxHeight-this.histogramOffset+15,u=this.boxHeight;l+=(a-s+1)*r;const m="M"+d+" "+p+"L "+c+" "+p+"L "+f+" "+u+"L "+h+" "+u;e.append("path").attr("d",m).attr("class","lineRank lineRank_"+i).style("fill",t=>"grey").style("fill-opacity",.4).attr("transform",`translate(0,${-3*this.bottomMargin})`)})}});const e=J["c"](this.ranklinescale).ticks(10).tickFormat((t,e)=>{if(t%1==0)return t}),i=this.svg.append("g").attr("class","histogram-rank-axis").attr("id","rankAxis").attr("transform",`translate(0,${this.boxHeight-3*this.bottomMargin})`).call(e);i.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),i.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.5),i.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")},brushes(){this.brushdata=[],this.brushSVG=this.svg.append("svg"),this.brush=J["e"]().extent([[this.paddingFactor*this.padding.left,this.yAxisHeight],[this.paddingFactor*this.padding.left+this.xAxisHeight-this.paddingFactor*this.padding.left,this.yAxisHeight+this.rankScaleHeight]]).on("brush",this.brushing).on("end",this.brushend);let t=0;this.brushdata.push({id:t,brush:this.brush}),this.brushSVG.selectAll(".brush").data(this.brushdata).enter().insert("g",".brush").attr("class","brush").call(this.brush)},brushing(){const t=J["s"]().domain([this.xScale.domain()[0],this.xScale.domain()[this.xScale.domain().length-1]]).range(this.xScale.range());let e=J["g"].selection.map(t.invert)[0],i=J["g"].selection.map(t.invert)[1],s=this.xScale.domain().length,a=this.xScale.domain()[0],o=this.xScale.domain()[this.xScale.domain().length-1];this.localBrushStart=Math.floor((e-a)/(o-a)*s),this.localBrushEnd=Math.ceil((i-a)/(o-a)*s),this.svg.selectAll(".binRank").attr("opacity",.5);for(let r=this.localBrushStart;r<this.localBrushEnd;r++)this.svg.selectAll(".bin_"+r).attr("opacity",1);this.localBrushStart==this.localBrushEnd&&this.svg.selectAll(".binRank").attr("opacity",1)},async brushend(){let t=this;const e=[];for(let i=this.localBrushStart;i<this.localBrushEnd;i++)if(null!=t.binContainsProcID[i]){const s=t.binContainsProcID[i];s.forEach(t=>{e.push(t)})}await ri.POSTRequest("split_ranks",{dataset:this.$store.selectedTargetDataset,ranks:e,ntype:"callsite"})}}},li=ni,di=Object(m["a"])(li,si,ai,!1,null,null,null),ci=di.exports;b()(di,{VLayout:ti["a"]});var hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{row:"",wrap:"",id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}}),i("v-layout",{staticClass:"pl-8 pb-3",attrs:{row:"",wrap:""}},[i("v-btn",{staticClass:"reveal-button",class:t.isEntryFunctionSelected,attrs:{small:"",tile:"",outlined:""},on:{click:t.revealCallsite}},[t._v(" Reveal ")]),i("v-btn",{staticClass:"reveal-button",class:t.isEntryFunctionSelected,attrs:{small:"",tile:"",outlined:""},on:{click:t.showEntryFunctions}},[t._v(" Split caller ")]),i("v-btn",{staticClass:"reveal-button",class:t.isCalleeSelected,attrs:{small:"",tile:"",outlined:""},on:{click:t.showExitFunctions}},[t._v(" Split callee ")])],1),t._l(t.callsites,(function(e){return i("v-container",{key:t.getID(e.nid),staticClass:"ml-4 ci-node"},[i("v-row",[i("v-col",{attrs:{cols:"2"}},[i("v-card",{staticClass:"ma-2 ml-4",attrs:{tile:"",outlined:""}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[i("v-row",t._g({class:t.selectClassName[e.name],attrs:{align:"center",justify:"center",id:e.name},on:{click:t.changeSelectedClassName}},a),[t._v(" "+t._s(t.formatNumberOfHops(t.cpath[e.name]))+" ")])]}}],null,!0)},[i("span",[t._v(" Callsite path: "+t._s(t.formatPath(t.cpath[e.name][0]))+" ")])])],1)],1),i("v-col",{attrs:{cols:"10"}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[i("v-row",t._g({staticClass:"mt-0 pl-2 subtitle-2 font-weight-black"},a),[t._v(" "+t._s(t.formatName(e.name))+" ")])]}}],null,!0)},[i("span",[t._v(t._s(e.name))])])],1)],1),i("Statistics",{ref:"ci-Statistics",refInFor:!0,attrs:{tData:t.stats[e.name]}}),i("BoxPlot",{ref:"BoxPlot",refInFor:!0,attrs:{data:t.boxplot[e.name]},on:{"update:data":function(i){return t.$set(t.boxplot,e.name,i)}}})],1)}))],2)},fi=[],pi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"boxplot",attrs:{id:t.id,width:t.containerWidth,height:t.containerHeight}},[t.dataReady?i("Box",{ref:"Box",attrs:{nid:t.nid,tq:t.q,xScale:t.xScale,tColor:t.color,idPrefix:t.idPrefix}}):t._e(),t.dataReady?i("Markers",{ref:"Markers",attrs:{nid:t.nid,tq:t.q,xScale:t.xScale,tColor:t.color,idPrefix:t.idPrefix}}):t._e(),t.dataReady?i("Outliers",{ref:"Outliers",attrs:{nid:t.nid,tOutliers:t.outliers,xScale:t.xScale,tColor:t.color,idPrefix:t.idPrefix}}):t._e(),i("ToolTip",{ref:"ToolTip"})],1)},ui=[],mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"box"})},gi=[],bi={name:"Box",data:()=>({paddingTop:10,textOffset:40,fontSize:10,debug:!1,superscript:"â°Â¹Â²Â³â´âµâ¶â·â¸â¹"}),props:["nid","tq","bq","xScale","idPrefix","tColor","bColor"],mounted(){this.debug&&(console.log("Ensemble q: ",this.bq),console.log("Target q: ",this.tq)),this.svg=J["y"]("#"+this.idPrefix+this.nid),this.g=this.svg.select(".box").attrs({transform:"translate(0, "+this.$parent.boxPosition+")"}),this.bq&&(this.box(this.bq,this.bColor),this.centerLine(this.bq,this.bColor)),this.box(this.tq,this.tColor),this.axis(),this.centerLine(this.tq,this.tColor),this.$parent.$refs.ToolTip.init(this.idPrefix+this.nid)},methods:{box(t,e){let i=this;this.targetBoxSVG=this.g.append("rect").attr("class","box").attrs({y:0,x:this.xScale(t.q1),height:this.$parent.rectHeight,fill:e,width:e=>t.q1==t.q3?3:i.xScale(t.q3)-i.xScale(t.q1),stroke:"#202020","stroke-width":.5}).style("z-index",1).on("mouseover",()=>this.$parent.$refs.ToolTip.renderQ(t)).on("mouseout",()=>this.$parent.$refs.ToolTip.clear())},centerLine(t,e){this.centerLineSVG=this.g.insert("line","rect").attrs({class:"centerLine",y1:this.$parent.centerLinePosition,x1:this.xScale(t.min),y2:this.$parent.centerLinePosition,x2:this.xScale(t.max),stroke:e}).style("stroke-width","1.5").style("z-index",10)},addxAxisLabel(){let t=this.xScale.domain()[1];this.x_max_exponent=ot(t);this.superscript[this.x_max_exponent];let e="(e+"+this.x_max_exponent+") Exclusive Runtime (Î¼s)";this.g.append("text").attr("class","boxplot-axis-label").attr("x",this.$parent.boxWidth-20).attr("y",3.8*this.$parent.centerLinePosition).style("font-size","12px").style("text-anchor","end").text(e)},axis(){this.addxAxisLabel();const t=J["c"](this.xScale).ticks(5).tickFormat((t,e)=>{let i=at(t,1);return""+i[0]}),e=this.g.append("g").attrs({class:"boxplot-axis",transform:"translate(0,"+2.5*this.$parent.centerLinePosition+")"}).call(t);e.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),e.selectAll("line").style("fill","none").style("stroke","black").style("stroke-width","1px"),e.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")},clear(){this.g.selectAll(".box").remove(),this.g.selectAll(".centerLine").remove(),this.g.selectAll(".boxplot-axis-label").remove(),this.g.selectAll(".boxplot-axis").remove()}}},xi=bi,yi=Object(m["a"])(xi,mi,gi,!1,null,null,null),vi=yi.exports,Ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"marker"})},Si=[],_i={name:"Markers",data:()=>({paddingTop:10,textOffset:40,fontSize:10,topPosition:-.2,bottomPosition:.7,markerColor:"",textColor:""}),props:["tq","bq","xScale","nid","idPrefix"],computed:{...Object(c["c"])({generalColors:"getGeneralColors"})},mounted(){this.svg=J["y"]("#"+this.idPrefix+this.nid),this.g=this.svg.select(".marker").attrs({transform:"translate(0, "+this.$parent.boxPosition+")"}),this.markery1=this.$parent.centerLinePosition-this.$parent.rectHeight/2,this.markery2=this.$parent.centerLinePosition+this.$parent.rectHeight/2,this.markerColor=this.generalColors.darkGrey,this.textColor=this.generalColors.text,this.medianMarker(this.tq),this.extremeMarkers(this.tq),this.bq&&(this.medianMarker(this.bq),this.extremeMarkers(this.bq))},methods:{medianMarker(t){const e=this.$parent.centerLinePosition-this.$parent.rectHeight,i=this.$parent.centerLinePosition+this.$parent.rectHeight;this.medianLine=this.g.append("line").attrs({class:"median",y1:e,x1:this.xScale(t.q2),y2:i,x2:this.xScale(t.q2),stroke:"black"}).style("stroke-width","2").style("z-index",10)},extremeMarkers(t){this.minMaxTargetMarker(t)},minMaxTargetMarker(t){this.g.append("line").attrs({class:"whisker",y1:this.markery1,x1:this.xScale(t.min),y2:this.markery2,x2:this.xScale(t.min),stroke:this.markerColor}).style("stroke-width","1.5"),this.g.append("line").attrs({class:"whisker",y1:this.markery1,x1:this.xScale(t.max),y2:this.markery2,x2:this.xScale(t.max),stroke:this.markerColor}).style("stroke-width","1.5")},minText(t){this.g.append("text").attrs({class:"whiskerText body-1",x:.5*this.fontSize,y:this.$parent.containerHeight*this.topPosition,fill:J["q"](this.markerColor).darker(1)}).style("stroke-width","1").text("Min: "+st(t.min))},maxText(t){this.g.append("text").attrs({class:"whiskerText body-1",x:this.$parent.containerWidth-9*this.fontSize,y:this.$parent.containerHeight*this.topPosition,fill:J["q"](this.markerColor).darker(1)}).style("stroke-width","1").text("Max:"+st(t.max))},medianText(t){this.g.append("text").attrs({class:"whiskerText body-1",x:this.$parent.containerWidth/2-4.5*this.fontSize,y:this.$parent.containerHeight*this.topPosition,fill:J["q"](this.markerColor).darker(1)}).style("stroke-width","1").text("Med.:"+st(t.q2))},qTexts(){this.q1Text(),this.q3Text()},q1Text(t){this.g.append("text").attrs({class:"whiskerText",x:this.$parent.containerWidth/3,y:this.informationHeight*this.topPosition,fill:J["q"](this.fill).darker(1)}).style("stroke-width","2").text("q1: "+st(t.q1))},q3Text(t){this.g.append("text").attrs({class:"whiskerText",x:this.$parent.boxWidth/3*2,y:this.informationHeight*this.topPosition,fill:J["q"](this.fill).darker(1)}).style("stroke-width","1").text("q3: "+st(t.q3))},clear(){this.g.selectAll(".whiskerText").remove(),this.g.selectAll(".whisker").remove(),this.g.selectAll(".median").remove()}}},Mi=_i,wi=Object(m["a"])(Mi,Ci,Si,!1,null,null,null),ki=wi.exports,Ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"outlier"})},$i=[],Pi={name:"Outliers",data:()=>({paddingTop:10,textOffset:40,fontSize:10,outlierRadius:4,informationHeight:70}),props:["nid","tOutliers","bOutliers","xScale","idPrefix"],computed:{...Object(c["c"])({generalColors:"getGeneralColors"})},mounted(){this.svg=J["y"]("#"+this.idPrefix+this.nid),this.g=this.svg.select(".outlier").attrs({transform:"translate(0, "+this.paddingTop+")"}),this.height=this.$parent.containerHeight,this.width=this.$parent.containerWidth,this.boxHeight=this.height-this.paddingTop-this.informationHeight,this.boxWidth=this.width,this.outliers(this.tOutliers),this.bOutliers&&this.outliers(this.bOutliers),this.$parent.$refs.ToolTip.init(this.idPrefix+this.nid)},methods:{groupByBand(t,e){let i,s,a,o,r=[],n=0,l=0,d=0;for(let c=0;c<t.length;c+=1){let h=t[c];0==c&&(n=h.x,i=[],s=[],o=[]);let f=Math.abs(h.x-n);f<=e?(s.push(h.x),i.push(h.value),o.push(h.rank),l+=1):f>e&&(r.push({values:i,x:s,count:l,ranks:o}),l>d&&(d=l),i=[],s=[],a=[],o=[],i.push(h.value),s.push(h.x),o.push(h.rank),l=1,n=h.x),c==t.length-1&&(f>e?r.push({values:i,x:s,ranks:o,count:l}):f>e&&(i=[],s=[],a=[],o=[],i.push(h.value),s.push(h.x),o.push(h.rank),l=1,r.push({values:i,x:s,ranks:o,count:l})))}return{circles:r,max_count:d}},groupOutliers(t,e,i){const s=e**2,a=t.map(t=>({x:this.xScale(t.value),value:t.value,rank:t.rank})),o=.001;let r=null,n=null;function l(t,e){let i=r;while(i){if(s-o>(i.x-t)**2+(i.y-e)**2)return!0;i=i.next}return!1}for(const d of a){while(r&&r.x<d.x-s)r=r.next;if(l(d.x,d.y=0)){let t=r;d.y=1/0;do{let e=t.y+Math.sqrt(s-(t.x-d.x)**2);e<d.y&&!l(d.x,e)&&(d.y=e),t=t.next}while(t)}d.next=null,null===r?r=n=d:n=n.next=d}return a},cleanUpEmptyOutliers(t){let e=[];for(let i=0;i<t.length;i+=1)0!=t[i].count&&e.push(t[i]);return e},outliers(t){let e=this,i=[];for(let a=0;a<t["values"].length;a+=1)0!=t["values"][a]&&i.push({value:t["values"][a],rank:t["ranks"][a]});let s=this.groupOutliers(i,this.bandWidth,"target");s.sort((t,e)=>t.x-e.x),this.g.selectAll(".target-outlier").data(s).join("circle").attrs({r:t=>4,cx:t=>t.x,cy:t=>this.boxHeight/2-this.informationHeight/4,class:"target-outlier"}).style("opacity",1).style("fill",this.generalColors.intermediate).on("click",t=>{e.$parent.$parent.selectedOutlierRanks=t["ranks"].sort((t,e)=>t-e),e.$parent.$parent.selectedOutlierDatasets=t["datasets"].filter((t,e,i)=>i.indexOf(t)===e)}).on("mouseover",t=>this.$parent.$refs.ToolTip.renderOutliers(t)).on("mouseout",t=>this.$parent.$refs.ToolTip.clear())},clear(){this.g.selectAll(".ensemble-outlier").remove(),this.g.selectAll(".target-outlier").remove()}}},Ri=Pi,Oi=Object(m["a"])(Ri,Ti,$i,!1,null,null,null),Di=Oi.exports,Ei=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:"tooltip-auxiliary-function"}})},Ai=[],Hi={name:"ToolTip",components:{},data:()=>({textCount:0,textxOffset:20,textyOffset:20,textPadding:18,offset:10,fontSize:12}),methods:{init(t){this.toolTipDiv=J["y"]("#"+t),this.height=80,this.halfWidth=document.getElementById(t).clientWidth/2,this.halfHeight=document.getElementById(t).clientHeight/2},addText(t){this.toolTipText=this.toolTipDiv.append("text").style("font-family","sans-serif").style("font-size","").attrs({class:"toolTipContent",x:()=>this.mousePosX>this.halfWidth?this.mousePosX-this.halfWidth+this.textxOffset+"px":this.mousePosX+this.textxOffset+"px",y:()=>this.mousePosY>this.halfHeight?this.mousePosY+this.textyOffset+this.textPadding*this.textCount-this.halfHeight+"px":this.mousePosY+this.textyOffset+this.textPadding*this.textCount+"px"}).text(t),this.textCount+=1},quartiles(){this.addText("Q1: "+et(this.data.q1)),this.addText("Q3: "+et(this.data.q3))},outliers(){this.addText("Rank: "+this.data["rank"])},drawRect(t,e){this.clear(),this.width=t*this.fontSize;J["s"]().domain([2,11]).range([50,150]);this.mousePos=J["o"](this.toolTipDiv.node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.toolTipRect=this.toolTipDiv.append("rect").attrs({class:"toolTipContent",fill:"white",stroke:"black",rx:"10px","fill-opacity":1,width:this.width,height:e*this.fontSize,x:()=>this.mousePosX>this.halfWidth?this.mousePosX-this.halfWidth+"px":this.mousePosX+"px",y:()=>this.mousePosY>this.halfHeight?this.mousePosY-this.halfHeight+"px":this.mousePosY+"px"})},renderQ(t){this.data=t,this.drawRect(13,4),this.quartiles()},renderOutliers(t){this.data=t,this.drawRect(10,4),this.outliers()},clear(){this.textCount=0,J["z"](".toolTipContent").remove()}}},Bi=Hi,Ii=Object(m["a"])(Bi,Ei,Ai,!1,null,null,null),Gi=Ii.exports,zi={name:"BoxPlot",props:["data","showTarget"],data:()=>({id:"ci-boxplot",boxContainerID:"",markerContainerID:"",outlierContainerID:"",padding:{top:10,bottom:10,left:10,right:10},targetBoxWidth:0,targetBoxHeight:0,targetBoxFill:"",targetBoxX:0,targetBoxY:0,containerHeight:150,containerWidth:0,parentID:"",informationHeight:80,outlierHeight:20,rectHeight:0,centerLinePosition:0,boxHeight:0,boxWidth:0,dataReady:!1,idPrefix:"boxplot-"}),components:{Box:vi,Outliers:Di,Markers:ki,ToolTip:Gi},mounted(){this.init();let t=this;At.$emit("clear-boxplot",(function(){t.clear()}))},watch:{data:{immediate:!0,deep:!0,handler(t,e){this.dataReady?this.clear():this.init()}}},computed:{...Object(c["c"])({generalColors:"getGeneralColors"})},methods:{init(){this.containerHeight=150,this.containerWidth=this.$parent.boxplotWidth-2*this.padding.right-1*this.padding.left,this.boxHeight=this.containerHeight-this.informationHeight,this.boxWidth=this.containerWidth,this.boxPosition=this.informationHeight/2+this.outlierHeight/2,this.centerLinePosition=(this.boxHeight-this.informationHeight/4)/2,this.rectHeight=this.boxHeight-this.informationHeight/4-this.outlierHeight/4,this.q=this.qFormat(this.data["q"]),this.outliers=this.data["outliers"],this.nid=this.data["nid"],this.id=this.idPrefix+this.nid,this.color=this.generalColors.intermediate,this.svg=J["y"](this.id).attrs({class:"boxplot",width:this.containerWidth,height:this.containerHeight}),this.xScale=J["s"]().domain([this.q.min,this.q.max]).range([.05*this.containerWidth,this.containerWidth-.05*this.containerWidth]),this.dataReady=!0},clear(){this.dataReady=!1},qFormat(t){let e={min:t[0],q1:t[1],q2:t[2],q3:t[3],max:t[4]};return e}}},Ni=zi,Li=Object(m["a"])(Ni,pi,ui,!1,null,null,null),ji=Li.exports,Vi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",[i("v-col",{attrs:{cols:"6",wrap:""}},[i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Min : "+t._s(t.tData.min))]),i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Max : "+t._s(t.tData.max))]),i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Mean : "+t._s(t.tData.mean))]),i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Variance : "+t._s(t.tData.var))]),i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Imbalance : "+t._s(t.tData.imb))]),i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Kurtosis : "+t._s(t.tData.kurt))]),i("v-col",{staticClass:"pa-0 subtitle-2"},[t._v("Skewness : "+t._s(t.tData.skew))])],1),t.bData?i("v-col",{attrs:{cols:"6",wrap:""}},[i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Min : "+t._s(t.bData.min))]),i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Max : "+t._s(t.bData.max))]),i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Mean : "+t._s(t.bData.mean))]),i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Variance : "+t._s(t.bData.var))]),i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Imbalance : "+t._s(t.bData.imb))]),i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Kurtosis : "+t._s(t.bData.kurt))]),i("v-col",{staticClass:"pa-0 subtitle-2 green--text"},[t._v("Skewness : "+t._s(t.bData.skew))])],1):t._e()],1)},Wi=[],Fi={name:"Statistics",props:["bData","tData"],created(){this.id="statistics"+this.tData.nid}},qi=Fi,Yi=Object(m["a"])(qi,Vi,Wi,!1,null,null,null),Xi=Yi.exports;b()(Yi,{VCol:G["a"],VRow:L["a"]});var Ui={name:"CallsiteInformation",components:{BoxPlot:ji,InfoChip:Vt,Statistics:Xi},data:()=>({id:"ci-overview",title:"Call site Information",infoSummary:"Call site Information view provides an insight into the runtime distribution among its MPI ranks. Boxplots are calculated to represent the range of the distribution and outliers (dots) correspond to the ranks which are beyond the 1.5*IQR. Additionally, several statistical measures are also provided.",info:"",callsites:[],numberOfcallsites:0,firstRender:!0,padding:{top:0,right:10,bottom:0,left:10},textOffset:25,boxplotHeight:340,boxplotWidth:0,duration:300,outlierRadius:4,outlierList:{},callsiteIDMap:{},settings:[{title:"Sort by Inclusive runtime"},{title:"Sort by Exclusive Runtime"}],informationHeight:50,revealCallsites:[],isModuleSelected:!1,isCallsiteSelected:!0,isEntryFunctionSelected:"unselect-callsite",isCalleeSelected:"unselect-callsite",showSplitButton:"false",selectClassName:{},selectedOutlierRanks:{},selectedOutlierDatasets:{},boxplot:{},stats:{},cpath:{}}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",selectedNode:"getSelectedNode",selectedMetric:"getSelectedMetric",data:"getSingleBoxplots",summary:"getSummary",runtimeSortBy:"getRuntimeSortBy",iqrFactor:"getIQRFactor"})},watch:{data:function(){this.visualize()}},mounted(){let t=this;At.$on("reset-single-boxplots",()=>{t.clear(),t.init(),t.visualize()}),At.$on("single-select-module",e=>{this.isModuleSelected=!0,t.selectModule(e["module"])}),At.$on("callsite-information-sort",e=>{t.clear(),t.visualize()})},methods:{init(){const t=this.summary[this.selectedTargetRun];let e=[];if("module"==this.selectedNode["type"]){const i=this.selectedNode["name"],s=t["invmodules"][i];e=t["m2c"][s].map(e=>t["callsites"][e])}else"callsite"==this.selectedNode["type"]&&(e=[this.selectedNode["name"]]);this.$store.dispatch("fetchSingleBoxplots",{dataset:this.selectedTargetRun,metric:this.selectedMetric,callsites:e,ntype:"callsite",iqr:this.iqrFactor}),this.width=document.getElementById(this.id).clientWidth,this.boxplotWidth=this.width-this.padding.left-this.padding.right;let i="Ensemble"==this.$store.selectedMode?.66:1;this.height=i*this.$store.viewHeight,document.getElementById(this.id).style.maxHeight=this.height+"px"},visualize(){this.callsites=this.sortByAttribute(this.data,this.selectedMetric,this.runtimeSortBy,"tgt"),this.numberOfcallsites=Object.keys(this.callsites).length,this.info=this.numberOfcallsites+" call sites";for(let t in this.callsites){let e=this.callsites[t];this.stats[t]={min:st(e["min"]),max:st(e["max"]),mean:st(e["mean"]),var:st(e["var"]),imb:st(e["imb"]),kurt:st(e["kurt"]),skew:st(e["skew"])},this.boxplot[t]={q:e["q"],outliers:e["outliers"],nid:e["nid"]},this.cpath[t]=e["cpath"],this.selectClassName[t]="unselect-callsite",this.borderColorByMetric(e)}},getID(t){return"callsite-information-node-"+t},borderColorByMetric(t){const e="#callsite-information-node-"+t.nid,i=(t.mean,"#f00");J["y"](e).style("stroke",i)},sortByAttribute(t,e,i,s){let a=Object.keys(t).map((function(e){return[e,t[e][s]]}));return a=a.sort((t,s)=>s[1][e][i]-t[1][e][i]),t=a.reduce((function(t,i){return t[i[0]]=i[1][e],t}),{}),t},changeSelectedClassName(){event.stopPropagation();let t=event.currentTarget.id;"select-callsite"==this.selectClassName[t]?(this.revealCallsites.splice(this.revealCallsites.indexOf(t),1),event.target.className="flex text-xs-center unselect-callsite",this.selectClassName[t]="unselect-callsite"):(this.selectClassName[t]="select-callsite",event.target.className="flex text-xs-center select-callsite",this.revealCallsites.push(t)),0==this.revealCallsites.length?this.switchIsSelectedCallsite(!1):this.switchIsSelectedCallsite(!0)},switchIsSelectedCallsite(t){this.isCallsiteSelected=t},switchIsSelectedModule(t){this.isModuleSelected=t},selectedClassName(t){return this.selectClassName[t]},formatModule(t){const e=this.$store.summary[this.$store.selectedTargetDataset]["c2m"][t["name"]],i=15;return e.length<i?e:rt(e,i)},formatName(t){if(t.length<25)return t;let e=rt(t,25);return e},formatNumberOfHops(t){return t[0].length},formatRuntime(t){let e=J["i"](".2"),i=e(t)+" Î¼s";return i},formatPath(t){const e=this.summary[this.selectedTargetRun]["callsites"];let i=[];for(let s of t)i.push(e[s]);return i},clear(){At.$emit("clear-boxplot")},dataset(t){return this.labels[t]},revealCallsite(t){t.stopPropagation(),this.$socket.emit("reveal_callsite",{mode:this.$store.selectedMode,reveal_callsites:this.revealCallsites,dataset:this.$store.selectedTargetDataset}),At.$emit("reveal-callsite")},showEntryFunctions(t){t.stopPropagation(),"unselect-callsite"==this.isEntryFunctionSelected?(this.isEntryFunctionSelected="select-callsite",this.isCalleeSelected="unselect-callsite"):this.isEntryFunctionSelected="unselect-callsite",this.showSplitButton="true"},showExitFunctions(t){t.stopPropagation(),"unselect-callsite"==this.isCalleeSelected?(this.isCalleeSelected="select-callsite",this.isEntryFunctionSelected="unselect-callsite"):this.isCalleeSelected="unselect-callsite",this.showSplitButton="true"},selectModule(t){let e=this.$store.moduleCallsiteMap[this.$store.selectedTargetDataset][t];this.numberOfCallsites=Object.keys(e).length;for(let i in this.callsites)J["y"]("#callsite-information-"+i.id).style("display","none");this.callsites={},e.forEach(t=>{this.callsites[t]=this.$store.data_cs[this.$store.selectedTargetDataset][t],J["y"]("#callsite-information-"+this.callsites[t].id).style("display","block")})},selectCallsitesByModule(t){this.selectedModule=t,this.selectedCallsite="";let e=Object.keys(this.$store.data_cs[this.$store.selectedTargetDataset]),i=this.$store.data_cs["ensemble"];for(let a in e)i.hasOwnProperty(a)&&(document.getElementById(i[a].id).style.opacity=.2,document.getElementById(i[a].id).style.borderStyle="solid");let s=this.$store.moduleCallsiteMap[t];for(let a in s)i.hasOwnProperty(a)&&(document.getElementById(i[a].id).style.opacity=1,document.getElementById(i[a].id).style.borderStyle="dotted")},getSelectedOutlierRanks(t){return this.selectedOutlierRanks[t]},split(){"select-callsite"==this.isEntryFunctionSelected?(this.$socket.emit("split_by_entry_callsites",{selectedModule:this.$store.selectedModule,dataset:this.$store.selectedTargetDataset}),At.$emit("split-by-entry-callsites")):"select-callsite"==this.isCalleeSelected&&(this.$socket.emit("split_by_callees",{selectedModule:this.$store.selectedModule,dataset:this.$store.selectedTargetDataset}),At.$emit("split-by-callees"))}}},Qi=Ui,Ki=(i("1037"),Object(m["a"])(Qi,hi,fi,!1,null,null,null)),Zi=Ki.exports;b()(Ki,{VBtn:k["a"],VCard:B["a"],VCol:G["a"],VContainer:z["a"],VLayout:ti["a"],VRow:L["a"],VTooltip:Lt["a"]});var Ji=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",[i("v-col",{attrs:{cols:"4"}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}})],1),i("v-col",{attrs:{cols:"8"}},[i("ColorMap",{ref:"ColorMap"})],1)],1),i("v-layout",[i("svg",{attrs:{id:t.id}},[i("g",{attrs:{id:"container"}},[i("Edges",{ref:"Edges"}),i("Nodes",{ref:"Nodes"}),i("MiniHistograms",{ref:"MiniHistograms"})],1)])])],1)},ts=[],es=i("789b"),is=i("bc17");function ss(){var t={},e=24,i=8,s=[1,1],a=[],o=[],r=10,n=0,l=0,d=1,c={},h=[],f="";let p,u=0;function m(){let t=0;a.forEach((function(e){c[e.id]=e,t+=1})),o.forEach((function(e){void 0==c[e.source]&&(c[e.source]=t,t+=1),void 0==c[e.target]&&(c[e.target]=t,t+=1),e.source_data=c[e.source],e.target_data=c[e.target]}))}function g(){a.forEach((function(t){t.sourceLinks=[],t.targetLinks=[],t["maxLinkVal"]=0,t["minLinkVal"]=1e15})),o.forEach((function(t){t.source_data.sourceLinks.push(t),t.source_data.maxLinkVal=Math.max(t.source_data.maxLinkVal,t["attr_dict"]["weight"]),t.source_data.minLinkVal=Math.min(t.source_data.minLinkVal,t["attr_dict"]["weight"]),t.target_data.targetLinks.push(t),t.target_data.minLinkVal=Math.min(t.target_data.minLinkVal,t["attr_dict"]["weight"]),t.target_data.maxLinkVal=Math.max(t.target_data.maxLinkVal,t["attr_dict"]["weight"])})),a.forEach((function(t){let e=Math.max(t.sourceLinks.length,t.targetLinks.length);0==t.sourceLinks.length&&(e=t.targetLinks.length),t["maxLinks"]=e}))}function b(){a.forEach((function(t){let e=Object(is["i"])(t.sourceLinks,t=>t["attr_dict"].weight),i=Object(is["i"])(t.targetLinks,t=>t["attr_dict"].weight);Object(is["i"])(t.sourceLinks,t=>t.targetWeight),Object(is["i"])(t.targetLinks,t=>t.targetWeight);t.max_flow=Math.max(e,i),"intermediate"==t.type||(t.value=t["attr_dict"]["time (inc)"],t.type=t["attr_dict"]["type"],t.level=t["attr_dict"]["level"],t.targetValue=0)}))}function x(t){a.forEach((function(t){let e=p(t.level);t.x=e}))}function y(){let t=a,i=[],o=0,r=0;while(t.length)i=[],t.forEach((function(t){t.dx=e,t.sourceLinks.forEach((function(t){i.push(t.target_data)}))})),t=i,o+=1,r+=1;console.debug("[Compute node breadths] Number of levels: ",o),u=2*e,p=Object(es["a"])().domain([0,o]).range([u,s[0]]),x((s[0]-e)/d)}function v(){let t=Object(is["f"])(h,t=>{let e=0;return e=n>0?n:Object(is["i"])(t,t=>t.value),Math.abs(s[1]-(t.length-1)*i)/e});return t}function C(){let t=v(),e="Inclusive";h.forEach((function(i){"Minimal edge crossing"==e||i.sort((function(t,i){return"Inclusive"==e?i["attr_dict"]["time (inc)"]-t["attr_dict"]["time (inc)"]:"Exclusive"==e?i["attr_dict"]["time"]-t["attr_dict"]["time"]:void 0})),i.forEach((function(e,i){let s=0;o.forEach((function(t){t["target"]==e.id&&null!=t["source_data"]&&null!=t["source_data"]["y"]&&(s=Math.max(s,t["source_data"]["y"]))})),e.y=Math.max(s,i),e.parY=e.y,e.height=e.value*l*t,e.targetHeight=e.targetValue*l*t}))})),o.forEach((function(e){let i=e.target_data.value/e.target_data.max_flow;e.scaled_weight=e["attr_dict"].weight*i,e.height=e.scaled_weight*t;let s=e.source_data.targetValue/e.source_data.value;e.targetWeight=e["attr_dict"].weight*s,e.targetHeight=e.targetWeight*t;let a=e.targetHeight/e.height;a!=s&&console.log("Error: The target-ensemble link height ratio is incosistent with the link's value")}))}function S(t){function e(t){return $(t.source)*t["attr_dict"].weight}h.forEach((function(i,s){i.forEach((function(i){if(i.targetLinks.length){var s=J["C"](i.targetLinks,e)/J["C"](i.targetLinks,P);i.y+=(s-$(i))*t}}))}))}function _(t){function e(t){return $(t.target)*t["attr_dict"].weight}h.slice().reverse().forEach((function(i){i.forEach((function(i){if(i.sourceLinks.length){var s=J["C"](i.sourceLinks,e)/J["C"](i.sourceLinks,P);i.y+=(s+$(i))*t}}))}))}function M(){let t=0;return h.forEach((function(e){var a,o,r=0;for(a of(e.sort(w),e))o=r-a.y,o>0&&(a.y+=o),r=a.y+a.height+i;if(o=r-i-s[1],o>0){r=a.y-=o;for(let t=e.length-2;t>0;--t)a=e[t],o=a.y+a.height+i-r,o>0&&(a.y-=o),r=a.y}o=r-i-s[1],o>0&&(t=Math.max(o,t))})),t}function w(t,e){return t["y"]-e["y"]}function k(t){h=J["p"]().key((function(t){return t.attr_dict.level})).sortKeys(J["b"]).entries(a).map((function(t){let e=[];for(let i=0;i<t.values.length;i+=1){t.values[i];e.push(t.values[i])}return e})),C(),M();for(var e=0;e<t;++e){let i=Math.pow(.99,e),s=Math.max(1-i,(e+1)/t);_(i),M(s),S(i),M(s)}}function T(){function t(t,e){return console.log(t,e),t.attr_dict["weight"]-e.attr_dict["weight"]}function e(t,e){return e.attr_dict["weight"]-t.attr_dict["weight"]}a.forEach((function(i){i.sourceLinks.sort(e),i.targetLinks.sort(t)})),a.forEach((function(t){var e=0,i=0;t.sourceLinks.sort((function(t,e){return e.source_data.y-t.source_data.y})),t.targetLinks.sort((function(t,e){return t.target_data.y-e.target_data.y})),t.sourceLinks.forEach((function(t){"back_edge"!=t.type&&(t.sy=e,e+=t.height)})),t.targetLinks.forEach((function(t){"back_edge"!=t.type&&(t.ty=i,i+=t.height)}))}))}function $(t){return 0}function P(t){return t["attr_dict"].weight}return t.nodeWidth=function(i){return arguments.length?(e=+i,t):e},t.levelSpacing=function(e){return arguments.length?(r=+e,t):r},t.nodePadding=function(e){return arguments.length?(i=+e,t):i},t.nodes=function(e){return arguments.length?(a=e,t):a},t.links=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(s=e,t):s},t.maxLevel=function(e){return arguments.length?(d=e,t):d},t.targetDataset=function(e){return arguments.length?(f=e,t):f},t.layout=function(e){return m(),g(),console.debug("[Sankey] Computed Node links."),b(),console.debug("[Sankey] Computed node values."),y(),console.debug("[Sankey] Computed node breadths."),k(e),console.debug("[Sankey] Computed node depths"),T(),console.debug("[Sankey] Computed link depths."),t},t.relayout=function(){return T(),t},t.setMinNodeScale=function(e){return arguments.length?(l=+e,t):l},t.link=function(){var t=.4;function e(e){var i=e.source.x+e.source.height,s=e.target.x,a=J["k"](i,s),o=a(t),r=a(1-t),n=e.source.y+e.sy+e.source.height/2,l=e.target.y+e.ty+e.target.height/2;return"M"+i+","+n+"C"+o+","+n+" "+r+","+l+" "+s+","+l}return e.curvature=function(i){return arguments.length?(t=+i,e):t},e},t}var as=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}},[i("MeanGradients",{ref:"MeanGradients"}),i("Mean",{ref:"Mean"}),i("ToolTip",{ref:"ToolTip"}),i("Guides",{ref:"Guides"}),i("TargetLine",{ref:"TargetLine"}),i("MeanDiff",{ref:"MeanDiff"}),i("RankDiff",{ref:"RankDiff"})],1)},os=[],rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},ns=[],ls={name:"MeanGradients",data:()=>({id:"mean-gradients",intermediateStrokeWidth:1,defaultStrokeWidth:3,transitionDuration:100}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",distributionColorMap:"getDistributionColorMap",selectedTargetRun:"getSelectedTargetRun",targetColorMap:"getTargetColorMap",generalColors:"getGeneralColors"})},methods:{init(t,e){this.nodes=t,this.containerG=e,this.visualize()},visualize(){let t=this.containerG.selectAll("rect").data(this.nodes);t.transition().duration(this.transitionDuration).attrs({opacity:t=>"intermediate"==t.type?.4:1,stroke:t=>this.stroke_by_metric(t,this.selectedMetric),"stroke-width":t=>"intermediate"==t.type?this.intermediateStrokeWidth:this.defaultStrokeWidth,fill:t=>this.fill_with_gradients(t,this.selectedMetric,this.$store.distributionColor)})},stroke_by_metric(t,e){return"intermediate"==t.attr_dict.type?this.generalColors.intermediate:"callsite"==t.attr_dict.type||"module"==t.attr_dict.type?J["q"](this.$store.runtimeColor.getColor(t,e)):void 0},fill_with_gradients(t,e,i){if(void 0==t.attr_dict["gradients"])return"#000";let s=t.attr_dict.nid;const a=J["y"]("#"+this.id).append("defs"),o=a.append("linearGradient").attr("id","mean-gradient"+s).attr("class","mean-gradient");o.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");const r=t.attr_dict["gradients"][e]["hist"]["b"],n=t.attr_dict["gradients"][e]["hist"]["h"];for(let l=0;l<r.length;l+=1){let t=(l+.5)/r.length;o.append("stop").attr("offset",100*t+"%").attr("stop-color",i.getColorByValue(n[l]))}return"url(#mean-gradient"+s+")"},clear(){J["z"](".mean-gradient").remove()}}},ds=ls,cs=Object(m["a"])(ds,rs,ns,!1,null,null,null),hs=cs.exports,fs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},ps=[],us={template:"",name:"Guides",components:{},data:()=>({id:"guides",nodes:[],svg:void 0,gradients:{},positionDatasetMap:{}}),computed:{...Object(c["c"])({generalColors:"getGeneralColors",selectedMetric:"getSelectedMetric"})},methods:{init(t){this.nodes=t;for(let e of this.nodes){if("intermediate"==e.type)return;this.gradients[e.id]=e.attr_dict.gradients[this.selectedMetric];let t=e.attr_dict.gradients[this.selectedMetric]["dataset"]["position"];this.positionDatasetMap[e]={};for(let i in t){let s=t[i];void 0==this.positionDatasetMap[e][s]&&(this.positionDatasetMap[e][s]=[]),this.positionDatasetMap[e][s].push(i)}}},update(t){this.new_nodes=[];for(let e of this.new_nodes)this.process(e)},drawLines(t,e){let i=this.gradients[t.id]["hist"].b,s=t.height/i.length;for(let a=0;a<i.length;a+=1){let i=s*a;t.svg.append("line").attrs({class:"gradientGuides-"+e,id:"line-2-"+t.client_idx,x1:0,y1:i,x2:this.$parent.nodeWidth,y2:i,"stroke-width":1.5,opacity:.3,stroke:"#202020"})}},drawText(t,e){let i=this.gradients[t.id]["hist"].b,s=this.gradients[t.id]["hist"].h,a=t.height/i.length;for(let o=0;o<i.length;o+=1){let r=a*o,n=12;if(0!=s[o]){let l="summary",d="";if("detailed"==l){let i=this.positionDatasetMap[o][0];if(this.positionDatasetMap[o].length<3)for(let s=0;s<3;s+=1)d=this.positionDatasetMap[o][s],t.svg.append("text").attrs({class:"gradientGuidesText-"+e,id:"line-2-"+t["client_idx"],x:-60,y:r+n/2+a/2+n*s,fill:"black"}).style("z-index",100).style("font-size",n+"px").text(d);else{let s=this.positionDatasetMap[o].length-3;i=i+"+"+s,t.svg.append("text").attrs({class:"gradientGuidesText-"+e,id:"line-2-"+t["client_idx"],x:-60,y:r+n/2+a/2+n*o,fill:"black"}).style("z-index",100).style("font-size",n+"px").text(d)}}else"summary"==l&&(d=it(s[o]),t.svg.append("text").attrs({class:"gradientGuidesText-"+e,id:"line-2-"+t["client_idx"],x:-60,y:r+n/2+a/2,fill:"black"}).style("z-index",100).style("font-size",n+"px").text(d));if(0!=o&&o!=i.length-1){let s=et(i[o]);t.svg.append("text").attrs({class:"gradientGuidesText-"+e,id:"line-2-"+t["client_idx"],x:this.$parent.nodeWidth+10,y:r+n/2+a/2,fill:"black"}).style("z-index",100).style("font-size",n+"px").text(s)}}0==o?t.svg.append("text").attrs({class:"gradientGuidesText-"+e,id:"line-2-"+t.client_idx,x:this.$parent.nodeWidth+10,y:r,fill:"black"}).style("z-index",100).style("font-size",n+"px").text("Min. = "+et(i[o])):o==i.length-1&&t.svg.append("text").attrs({class:"gradientGuidesText-"+e,id:"line-2-"+t.client_idx,x:this.$parent.nodeWidth+10,y:r+a,fill:"black"}).style("z-index",100).style("font-size",n+"px").text("Max. = "+et(i[o]))}},visualize(t,e){J["z"](".ensemble-edge").style("opacity",.3),this.drawLines(t,e),this.drawText(t,e)},clear(t,e){t.svg.selectAll(".gradientGuides-"+e).remove(),t.svg.selectAll(".gradientGuidesText-"+e).remove()}}},ms=us,gs=Object(m["a"])(ms,fs,ps,!1,null,null,null),bs=gs.exports,xs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},ys=[],vs={name:"TargetLine",components:{},data:()=>({id:"target-line"}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",generalColors:"getGeneralColors",selectedMetric:"getSelectedMetric",selectedRunBinCount:"getRunBinCount",targetColor:"getTargetColor"})},methods:{init(t,e){this.nodes=t.filter(t=>!("intermediate"===t.type)),this.containerG=e,this.visualize()},visualize(){const t=this.containerG.selectAll(".callsite").data(this.nodes);t.append("line").attrs({class:"targetLines",id:t=>"line-2-"+this.selectedTargetRun+"-"+t.attr_dict.nid,x1:0,y1:t=>this.getTargetPos(t),x2:this.$parent.nodeWidth,y2:t=>this.getTargetPos(t),"stroke-width":5,stroke:this.targetColor})},getTargetPos(t){if("intermediate"==t.type)return;const e=t.attr_dict.gradients[this.selectedMetric],i=e["dataset"]["position"][this.selectedTargetRun],s=t.height/this.selectedRunBinCount;return(i+.5)*s},clear(){J["z"](".targetLines").remove()}}},Cs=vs,Ss=Object(m["a"])(Cs,xs,ys,!1,null,null,null),_s=Ss.exports,Ms=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:"tooltip"}})},ws=[],ks={template:"",name:"ToolTip",components:{},data:()=>({id:"supernode-tooltip",textCount:0,textxOffset:20,textyOffset:20,textPadding:15,margin:35,mousePosX:0,mousePosY:0,prevMousePosX:void 0,prevMousePosY:void 0}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric"})},methods:{init(t){this.id=t;const e=J["y"]("#"+this.id);this.toolTipG=e.append("g")},positionX(){let t=0;return this.mousePosX>=this.$store.viewWidth/2&&(t=this.mousePosX+this.textxOffset),t=this.mousePosX-this.textxOffset,t},positionY(){let t=0;return this.mousePosY>=this.$store.viewHeight/2&&(t=this.mousePosY+this.textyOffset),t=this.mousePosY-this.textyOffset,t},visualize(t,e){this.mousePos=J["o"](J["y"]("#"+this.id).node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.clear(),this.render(t,e),this.prevMousePosX=this.mousePosX,this.prevMousePosY=this.mousePosY},render(t,e){this.xOffset=this.positionX()+40,this.yOffset=this.positionY()+40,this.nodeHeight=e.height;const i=J["s"]().domain([2,11]).range([50,150]),s=3*33.3+33.3*e.attr_dict["entry_functions"].length;this.toolTipG.attr("height",i(10)+"px"),this.toolTipRect=this.toolTipG.append("rect").attrs({class:"tooltip-container",fill:"#fff",stroke:"black",rx:"10px","fill-opacity":1,width:"325",height:s}).attrs({x:this.xOffset,y:this.yOffset}),this.runtimeInformation(e),this.pathInformation(e)},addText(t){this.textCount+=1,this.toolTipText=this.toolTipG.append("text").style("font-family","sans-serif").style("font-size","").attrs({class:"tooltip-content",x:()=>this.xOffset+this.margin,y:()=>this.yOffset+this.textyOffset+this.textPadding*this.textCount+"px"}).text(t)},runtimeInformation(t){this.addText("Name: "+rt(t.id,40)),this.addText("Inclusive Time: "+et(t.attr_dict["time (inc)"])),this.addText("Exclusive Time: "+et(t.attr_dict["time"]))},pathInformation(t){let e=t.attr_dict.entry_functions,i=this,s=e.map((function(t){return[t.name,t[i.selectedMetric]]})),a=s.sort((function(t,e){return e[1]-t[1]}));this.rectWidth="10px",a.length>0&&(this.addText(""),this.addText("Entry call sites: "),this.entryFunctionInformation(t,a))},entryFunctionInformation(t,e){for(var i=0;i<Math.min(3,e.length);i++){this.textCount+=1;let s=this.$store.runtimeColor.getColorByValue(e[i][1]),a=this.$store.runtimeColor.getColorByValue(t),o=e[i][0],r=t.id,n=this.xOffset+this.margin,l=this.yOffset+this.textyOffset+this.textPadding*this.textCount;this.toolTipG.append("rect").attrs({width:this.rectWidth,height:this.rectWidth,x:n+"px",y:l-10+"px",class:"tooltip-content"}).style("fill",a),this.toolTipG.append("text").attrs({x:n+15+"px",y:l+"px",class:"tooltip-content"}).text(rt(r,10)),this.toolTipG.append("text").attrs({x:n+120+"px",y:l+"px",class:"tooltip-content"}).text("->"),this.toolTipG.append("rect").attrs({width:this.rectWidth,height:this.rectWidth,x:n+140+"px",y:l-10+"px",class:"tooltip-content"}).style("fill",s),this.toolTipG.append("text").attrs({x:n+155+"px",y:l+"px",class:"tooltip-content"}).text(rt(o,10))}let s=e.length-3;s>0&&this.addText("and "+s+" call sites more.")},clear(){this.textCount=0,J["z"](".tooltip-container").remove(),J["z"](".tooltip-content").remove()}}},Ts=ks,$s=Object(m["a"])(Ts,Ms,ws,!1,null,null,null),Ps=$s.exports,Rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},Os=[],Ds={name:"Mean",data:()=>({stroke_width:3,id:"mean"}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",generalColors:"getGeneralColors"})},methods:{init(t,e){this.nodes=t,this.containerG=e,this.visualize()},visualize(){this.containerG.selectAll(".callsite-rect").data(this.nodes).transition().duration(this.$parent.transitionDuration).attrs({opacity:t=>"intermediate"==t.type?0:1,height:t=>t.height,stroke:"#000","stroke-width":t=>"intermediate"==t.type?1:this.stroke_width,fill:t=>"intermediate"==t.type?this.generalColors.silver:this.$store.runtimeColor.getColor(t,this.selectedMetric)})},clear(){}}},Es=Ds,As=Object(m["a"])(Es,Rs,Os,!1,null,null,null),Hs=As.exports,Bs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},Is=[],Gs={name:"MeanDiff",components:{},data:()=>({strokeWidth:7,id:"mean-diff-gradients",meanDiff:{},animationDuration:1e3,renderZeroLine:{},rank_min:0,rank_max:0,mean_min:0,mean_max:0,mean_diff_min:0,mean_diff_max:0}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",data:"getCompareData",distributionColorMap:"getDistributionColorMap",selectedColorPoint:"getColorPoint"})},watch:{data:function(){this.process(),this.visualize()}},methods:{init(t,e){this.nodes=t,this.containerG=e,this.$store.dispatch("fetchCompare")},process(){for(let t=0;t<this.data.length;t+=1)this.rank_min=Math.min(this.rank_min,this.data[t]["hist"]["y_min"]),this.rank_max=Math.max(this.rank_max,this.data[t]["hist"]["y_max"]),this.mean_min=Math.min(this.mean_min,this.data[t]["hist"]["x_min"]),this.mean_max=Math.max(this.mean_max,this.data[t]["hist"]["x_max"]),this.mean_diff_min=Math.min(this.mean_diff_min,this.data[t]["mean_diff"]),this.mean_diff_max=Math.max(this.mean_diff_max,this.data[t]["mean_diff"]),this.meanDiff[this.data[t]["name"]]=this.data[t]["mean_diff"];this.$store.diffColor=new Pe("MeanDiff",this.mean_diff_min,this.mean_diff_max,this.distributionColorMap,this.selectedColorPoint)},visualize(){let t=this.containerG.selectAll("rect").data(this.nodes);t.transition().duration(this.animationDuration).attrs({opacity:1,height:t=>t.height,"stroke-width":3}).style("fill",(t,e)=>J["q"](this.$store.diffColor.getColorByValue(this.meanDiff[t.id])));let e=this.containerG.selectAll(".callsite-text").data(this.nodes);e.transition().duration(this.animationDuration).style("fill",t=>{let e=this.$store.diffColor.getColorByValue(this.meanDiff[t.id]);return this.$store.diffColor.setContrast(e)})},clear(){}}},zs=Gs,Ns=Object(m["a"])(zs,Bs,Is,!1,null,null,null),Ls=Ns.exports,js=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},Vs=[],Ws={name:"MeanGradients",components:{},data:()=>({strokeWidth:7,id:"rank-diff-gradients",renderZeroLine:{},animationDuration:1e3}),methods:{init(t,e,i){this.nodes=t,this.containerG=e,this.data=i,this.process(),this.colorScale(),this.gradients(),this.visualize()},process(){this.renderZeroLine={},this.rank_min=0,this.rank_max=0,this.mean_min=0,this.mean_max=0,this.mean_diff_min=0,this.mean_diff_max=0;for(let t=0;t<this.data.length;t+=1)("Inclusive"==this.$store.selectedMetric||"Exclusive"==this.$store.selectedMetric)&&(this.rank_min=Math.min(this.rank_min,this.data[t]["hist"]["y_min"]),this.rank_max=Math.max(this.rank_max,this.data[t]["hist"]["y_max"]),this.mean_min=Math.min(this.mean_min,this.data[t]["hist"]["x_min"]),this.mean_max=Math.max(this.mean_max,this.data[t]["hist"]["x_max"]),this.mean_diff_min=Math.min(this.mean_diff_min,this.data[t]["mean_diff"]),this.mean_diff_max=Math.max(this.mean_diff_max,this.data[t]["mean_diff"]))},colorScale(){this.$store.rankDiffColor.setColorScale(this.rank_min,this.rank_max,this.$store.selectedDistributionColorMap,this.$store.selectedColorPoint),this.$parent.$parent.$refs.EnsembleColorMap.update("rankDiff",this.data)},gradients(){let t="hist";for(let e=0;e<this.data.length;e+=1){let i=this.data[e],s=J["y"]("#"+this.id).append("defs");console.log(i),this.diffGradient=s.append("linearGradient").attrs({id:"diff-gradient-"+this.$parent.nidNameMap[i.name],class:"diff-gradient"}),this.diffGradient.attrs({x1:"0%",y1:"0%",x2:"0%",y2:"100%"});let a=i[t]["x"],o=i[t]["y"];for(let t=0;t<a.length;t+=1){let e=(t+t+1)/(2*a.length);if(a[t+1]>0){let e=(t+t+3)/(2*a.length);this.zeroLine(i["name"],e)}this.diffGradient.append("stop").attrs({offset:100*e+"%","stop-color":this.$store.rankDiffColor.getColorByValue(o[t])})}}},clearZeroLine(){J["z"](".zeroLine").remove(),J["z"](".zeroLineText").remove()},zeroLine(t,e){void 0==this.renderZeroLine[t]&&(J["y"]("#ensemble-callsite-"+t.client_idx).append("line").attrs(t=>({class:"zeroLine",x1:0,y1:e*t.height,x2:this.$parent.nodeWidth,y2:e*t.height})).style("opacity",t=>1).style("stroke","#000").style("stroke-width",t=>5),J["y"]("#ensemble-callsite-"+this.$parent.nidNameMap[t]).append("text").attrs({class:"zeroLineText",dy:"0",x:this.$parent.nodeWidth/2-10,y:t=>e*t.height-5}).style("opacity",1).style("font-size","20px").text(t=>0),this.renderZeroLine[t]=!0)},visualize(){let t=this.containerG.selectAll("rect").data(this.nodes);t.transition().duration(this.animationDuration).attrs({opacity:t=>"intermediate"==t.type?0:1}).style("stroke",t=>{let e="";return"intermediate"==t.type?e=this.$store.color.ensemble:"component-node"==t.type?e=void 0!=this.$store.data_cs[this.$store.selectedTargetDataset][t.id]?J["q"](this.$store.color.getColor(t)):this.$store.color.ensemble:"super-node"==t.type&&(e=void 0!=this.$store.data_mod[this.$store.selectedTargetDataset][t.id]?J["q"](this.$store.color.getColor(t)):this.$store.color.ensemble),e}).style("stroke-width",t=>"intermediate"==t.type?1:this.stroke_width).style("fill",(t,e)=>"url(#diff-gradient-"+t.client_idx+")")},clearGradients(){this.svg.selectAll(".diff-gradient").remove()},clear(){}}},Fs=Ws,qs=Object(m["a"])(Fs,js,Vs,!1,null,null,null),Ys=qs.exports,Xs={name:"Nodes",components:{Mean:Hs,ToolTip:Ps,MeanGradients:hs,Guides:bs,TargetLine:_s,MeanDiff:Ls,RankDiff:Ys},data:()=>({currentNodeLevel:{},nodeWidth:50,transitionDuration:500,nodeHeights:{},minHeightForText:15,textTruncForNode:25,id:"ensemble-nodes",graph:null,nidNameMap:{},intermediateColor:"#d9d9d9",drawGuidesMap:{},fontSize:14,prevEncoding:""}),computed:{...Object(c["c"])({encoding:"getEncoding",showTarget:"getShowTarget",selectedMode:"getSelectedMode",summary:"getSummary",selectedTargetRun:"getSelectedTargetRun",selectedMetric:"getSelectedMetric",selectedNode:"getSelectedNode",compareData:"getCompareData",isComparisonMode:"getComparisonMode"})},mounted(){let t=this;At.$on("update-node-encoding",(function(e){t.clearEncoding(),t.clearTargetLines(),At.$emit("update-ensemble-colors"),t.visualize()}))},methods:{init(t){this.graph=t,this.containerG=J["y"]("#"+this.id),this.drag=J["f"]().subject(t=>t).on("start",(function(){this.parentNode.appendChild(this)})).on("drag",t=>{J["y"]("node_"+t.id).attr("transform","translate("+(t.x=Math.max(0,Math.min(this.$parent.width-t.dx,J["g"].x)))+","+(t.y=Math.max(0,Math.min(this.$parent.height-t.dy,J["g"].y)))+")"),this.$parent.sankey.relayout()}),this.zoom=J["D"]().scaleExtent([.5,2]).on("zoom",()=>{let t=Math.min(0,Math.min(J["g"].transform.x,this.width*J["g"].transform.k)),e=Math.min(0,Math.min(J["g"].transform.y,this.height*J["g"].transform.k));this.sankeySVG.attr("transform","translate("+[t,e]+")scale("+J["g"].transform.k+")")}),this.visualize()},visualize(){this.rectangle(),this.postVis(),this.setEncoding(),this.ensemblePath(),this.text(),this.showTarget&&"ESG"===this.selectedMode&&!this.isComparisonMode&&(this.$refs.TargetLine.init(this.graph.nodes,this.containerG),this.$refs.Guides.init(this.graph.nodes,this.containerG),this.targetPath()),this.$refs.ToolTip.init(this.$parent.id)},postVis(){for(let t of this.graph.nodes)t.svg=this.containerG.select("#callsite-"+t.attr_dict.nid)},clearRectangle(){J["z"](".callsite").remove()},setEncoding(){"SG"==this.selectedMode?this.$store.commit("setEncoding","MEAN"):"ESG"==this.selectedMode&&(this.isComparisonMode?this.$store.commit("setEncoding","MEAN_DIFF"):this.$store.commit("setEncoding","MEAN_GRADIENTS")),this.prevEncoding=this.encoding,"MEAN"==this.encoding?this.$refs.Mean.init(this.graph.nodes,this.containerG):"MEAN_GRADIENTS"==this.encoding?this.$refs.MeanGradients.init(this.graph.nodes,this.containerG):"MEAN_DIFF"==this.encoding?this.$refs.MeanDiff.init(this.graph.nodes,this.containerG):"RANK_DIFF"==this.encoding&&this.$refs.RankDiff.init(this.graph.nodes,this.containerG)},rectangle(){this.nodesSVG=this.containerG.selectAll(".callsite").data(this.graph.nodes).enter().append("g").attrs({class:"callsite",id:t=>"callsite-"+t.attr_dict.nid,transform:t=>`translate(${t.x},${t.y+this.$parent.ySpacing})`,opacity:1}),this.nodesSVG.append("rect").attrs({id:t=>"callsite-rect"+t.attr_dict.nid,class:"callsite-rect",height:t=>t.height,width:this.nodeWidth,"fill-opacity":t=>"intermediate"==t.type?0:1}).style("shape-rendering","crispEdges").on("click",t=>this.click(t)).on("mouseover",t=>this.mouseover(t)).on("mouseout",t=>this.mouseout(t))},click(t){if(event.stopPropagation(),t.id!==this.selectedNode.name||t.type!==this.selectedNode.type){this.$store.commit("setSelectedNode",{name:t.id,type:t.type});const e=this.containerG.select("#callsite-"+t.id);"ESG"!=this.selectedMode||this.isComparisonMode?"SG"==this.selectedMode&&(At.$emit("reset-single-histogram"),At.$emit("reset-single-scatterplot"),At.$emit("reset-single-boxplots")):(this.drawGuidesMap[t.id]||(this.$refs.Guides.visualize(t,"permanent",e),this.drawGuidesMap[t.id]=!0),At.$emit("reset-ensemble-histogram"),At.$emit("reset-ensemble-scatterplot"),At.$emit("reset-ensemble-boxplots"),At.$emit("reset-module-hierarchy"),At.$emit("reset-ensemble-gradients"))}},mouseover(t){this.$refs.ToolTip.visualize(self.graph,t),"ESG"!==this.selectedMode||this.isComparisonMode||this.$refs.Guides.visualize(t,"temporary")},mouseout(t){this.$refs.ToolTip.clear(),"ESG"==this.selectedMode&&(this.$refs.Guides.clear(t,"temporary"),0==this.permanentGuides&&J["z"](".ensemble-edge").style("opacity",1))},targetPath(){this.nodesSVG.append("path").attrs({class:"path",d:t=>{if("intermediate"==t.type)return"m0 0h "+this.nodeWidth+"v "+1*t.targetHeight+"h "+-1*this.nodeWidth},fill:t=>{if("intermediate"==t.type)return this.$store.distributionColor.target},stroke:t=>{if("intermediate"==t.type)return this.intermediateColor}}).style("opacity",.6).style("fill-opacity",0).style("stroke-opacity",0),this.nodesSVG.selectAll(".target-path").data(this.graph.nodes).transition().duration(this.transitionDuration).delay(this.transitionDuration/3).style("fill-opacity",1)},ensemblePath(){this.nodesSVG.append("path").attrs({class:"path",d:t=>{if("intermediate"==t.type)return"m0 0h "+this.nodeWidth+"v "+1*t.height+"h "+-1*this.nodeWidth},fill:t=>{if("intermediate"==t.type)return this.intermediateColor}}).style("opacity",t=>this.$store.showTarget&&0==this.$store.compareAnalysisMode?.5:1).style("fill-opacity",0).style("stroke",(function(t){if("intermediate"==t.type)return this.intermediateColor})).style("stroke-opacity","0.0"),this.nodesSVG.selectAll(".path").data(this.graph.nodes).transition().duration(this.transitionDuration).delay(this.transitionDuration/3).style("fill-opacity",1)},text(){this.nodesSVG.append("text").data(this.graph.nodes).attrs({class:"callsite-text",dy:"0.35em",transform:"rotate(90)",x:"5",y:"-10"}).style("opacity",1).style("fill",t=>{if("MEAN_GRADIENTS"==this.encoding)return"#000";let e=this.$store.runtimeColor.getColor(t,this.selectedMetric),i=this.$store.runtimeColor.rgbArrayToHex(e);return this.$store.runtimeColor.setContrast(i)}).text(t=>{if("intermediate"!=t.type){if(t.height<this.minHeightForText)return"";var e=nt(this.$parent.id,t.id)["width"];if(e<t.height)return t.id;let i=t.height/this.fontSize;return rt(t.id,i)}})},clearTargetPath(){J["z"](".target-path").remove()},clearEncoding(){"MEAN_GRADIENTS"==this.prevEncoding?this.$refs.MeanGradients.clear(this.graph.nodes,this.containerG):"MEAN_DIFF"==this.prevEncoding?this.$refs.MeanDiff.clear(this.graph.nodes,this.containerG):"RANK_DIFF"==this.prevEncoding&&this.$refs.RankDiff.clear(this.graph.nodes,this.containerG)},clearTargetLines(){J["z"](".targetLines").remove()},clear(){J["z"](".callsite").remove(),J["z"](".callsite-text").remove(),J["z"](".path").remove(),this.clearTargetLines(),this.clearEncoding(this.encoding),this.clearTargetPath(),this.$refs.ToolTip.clear()},comparisonMode(t){console.log("[Comparison] Data:",t),this.clearEncoding("MEAN_GRADIENTS"),J["z"](".target-path").remove(),this.$store.showTarget&&this.$refs.TargetLine.clear(),J["z"](".histogram-bar-target").remove(),J["z"]("#ensemble-edge-target").remove(),J["z"](".legend").remove(),J["z"](".legend-text").remove(),J["z"](".colormap").remove(),this.setEncoding(this.$store.encoding,t)}}},Us=Xs,Qs=Object(m["a"])(Us,as,os,!1,null,null,null),Ks=Qs.exports,Zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}},[i("ToolTip",{ref:"ToolTip"})],1)},Js=[],ta={name:"Edges",components:{},props:[],data:()=>({transitionDuration:1e3,id:"",offset:4,precision:2}),computed:{...Object(c["c"])({selectedMode:"getSelectedMode",showTarget:"getShowTarget",comparisonMode:"getComparisonMode",generalColors:"getGeneralColors"})},mounted(){this.id="edges"},methods:{init(t){this.graph=t,this.edges=J["y"]("#"+this.id),"ESG"==this.selectedMode?(this.initEdges("ensemble"),this.drawEdges("ensemble"),this.showTarget&&(this.initEdges("target"),this.drawEdges("target"))):"SG"==this.selectedMode&&(this.initEdges("single"),this.drawEdges("single"))},initEdges(t){this.edges.selectAll("#edge-"+t).data(this.graph.links).enter().append("path").attrs({class:"edge",id:"edge-"+t}).style("fill",e=>"ensemble"==t?this.generalColors.ensemble:this.generalColors.intermediate).style("opacity",.5).on("mouseover",(function(t){J["y"](this).style("stroke-opacity","1.0")})).sort((function(t,e){return e.dy-t.dy}))},drawPath(t,e,i=0,s=0){const a=(t.source_data.x+t.source_data.dx+i).toFixed(this.precision),o=(t.target_data.x-s).toFixed(this.precision),r=J["k"](a,o),n=r(.4).toFixed(this.precision),l=r(.6).toFixed(this.precision),d=(t.source_data.y+this.$parent.ySpacing+t.sy).toFixed(this.precision),c=(t.target_data.y+this.$parent.ySpacing+t.ty).toFixed(this.precision),h=(t.source_data.x+t.source_data.dx+i).toFixed(this.precision),f=(t.target_data.x-s).toFixed(this.precision),p=J["k"](h,f),u=p(.4).toFixed(this.precision),m=p(.6).toFixed(this.precision);let g=(t.source_data.y+this.$parent.ySpacing+t.sy+e).toFixed(this.precision),b=(t.target_data.y+this.$parent.ySpacing+t.ty+e).toFixed(this.precision);const x=(b-c).toFixed(this.precision);return`M${a},${d}C${n},${d} ${l},${c} ${o},${c}  v ${x}C${m},${b} ${u},${g} ${h},${g}`},drawMiddlePath(t,e,i,s,a){let o=t.source_data.x+t.source_data.dx+i,r=t.target_data.x-s,n=J["k"](o,r),l=n(.4),d=n(.6),c=t.source_data.y+this.$parent.ySpacing+t.sy+.5*(t.source_data.height-e),h=t.target_data.y+this.$parent.ySpacing+t.ty+.5*(t.target_data.height-e),f=t.source_data.x+t.source_data.dx+i,p=t.target_data.x-s,u=J["k"](f,p),m=u(.4),g=u(.6),b=0,x=0;b=t.source_data.y+this.$parent.ySpacing+t.sy+e,x=t.target_data.y+this.$parent.ySpacing+t.ty+e;let y=x-h;return`M${o},${c}C${l},${c} ${d},${h} ${r},${h}  v ${y}C${g},${x} ${m},${b} ${f},${b}`},drawEdges(t){this.edges.selectAll("#edge-"+t).data(this.graph.links).attrs({d:e=>{let i=0;return"ensemble"==t||"single"==t?i=e.height:"target"==t&&(i=e.targetHeight),this.drawPath(e,i,0,0,t)},fill:e=>"ensemble"==t?this.generalColors.ensemble:"target"==t?this.generalColors.target:"single"==t?this.generalColors.intermediate:void 0,stroke:this.generalColors.darkGrey}).on("mouseover",t=>{}).on("mouseout",t=>{})},fadeUnConnected(t){let e=this.graph.links.selectAll(".link");e.filter((function(e){return e.source!==t&&e.target!==t})).transition().duration(500).style("opacity",.05)},clear(){this.edges.selectAll(".edge").remove(),this.edges.selectAll(".edgelabel").remove(),this.edges.selectAll(".edgelabelText").remove()}}},ea=ta,ia=Object(m["a"])(ea,Zs,Js,!1,null,null,null),sa=ia.exports,aa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:t.id}})},oa=[],ra={name:"MiniHistograms",components:{},props:[],data:()=>({padding:{top:0,left:0,right:0,bottom:10},nodeScale:.99,id:"minihistogram-overview",offset:7,bandWidth:0,selectedScale:"Linear"}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",generalColors:"getGeneralColors",selectedMode:"getSelectedMode",showTarget:"getShowTarget",comparisonMode:"getComparisonMode",targetColor:"getTargetColor"})},methods:{init(t){for(const e of t.nodes)if("intermediate"!==e.type){let t=e.attr_dict.hists[this.selectedMetric]["rank"];"ESG"==this.selectedMode?(this.histogram(t,e,"ensemble"),this.showTarget&&0==this.comparisonMode&&this.histogram(t,e,"target")):"SG"==this.selectedMode&&this.histogram(t,e,"ensemble")}},array_unique(t){return t.filter((function(t,e,i){return i.indexOf(t)===e}))},clear(){this.bandWidth=0,J["z"]("#histobars").remove()},histogram(t,e,i){let s="",a=[],o=[];"ensemble"==i?(s=this.generalColors.ensemble,a=t.x,o=t.y):"target"!=i&&"single"!=i||("target"==i?s=this.targetColor:"single"==i&&(s=this.generalColors.intermediate),a=t.x,o=t.y),"Linear"==this.selectedScale?this.minimapYScale=J["s"]().domain([0,J["m"](o)]).range([this.$parent.ySpacing-10,0]):"Log"==this.selectedScale&&(this.minimapYScale=J["t"]().domain([.1,J["m"](o)]).range([this.$parent.ySpacing,0])),this.minimapXScale=J["r"]().domain(a).rangeRound([0,this.$parent.nodeWidth]),this.bandWidth=this.minimapXScale.bandwidth();for(let r=0;r<o.length;r+=1)J["y"]("#"+this.id).append("rect").attrs({id:"histobars",class:"histogram-bar-"+i,width:()=>this.bandWidth,height:t=>this.$parent.nodeWidth-this.minimapYScale(o[r]),x:t=>e.x+this.minimapXScale(a[r]),y:t=>e.y+this.minimapYScale(o[r])+this.offset,"stroke-width":"0.2px",stroke:"black",fill:s})},render(t,e,i){let s=e.nodes[e.nodeMap[i.id]];"Ensemble"==this.$store.selectedMode?(this.histogram(t,s,"ensemble"),this.$store.showTarget&&0==this.$store.comparisonMode&&this.histogram(t,s,"target")):"Single"==this.$store.selectedMode&&this.histogram(t,s,"single")}}},na=ra,la=Object(m["a"])(na,aa,oa,!1,null,null,null),da=la.exports,ca={name:"Sankey",components:{Nodes:Ks,Edges:sa,MiniHistograms:da,ColorMap:ie,InfoChip:Vt},data:()=>({graph:null,id:"ensemble-supergraph-overview",nodeWidth:50,nodeScale:1,ySpacing:60,levelSpacing:50,margin:{top:10,right:10,bottom:20,left:10},width:null,height:null,treeHeight:null,sankeyWidth:0,sankeyHeight:0,existingIntermediateNodes:{},title:"Super Graph View",firstRender:!0,message:"",info:"",infoSummary:"Super Graphs provides an overview of the application's control during execution using a Sankey Diagram. The Sankey diagram incorporates a flow-based metaphor to the call graph by show the resource flow from left to right. Each node's performance is mapped based on the runtime colormap. The mini-histograms (on top of the node) provides an overview of each node's runtime distribution across processes"}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric",sg_data:"getSG",esg_data:"getESG",selectedTargetRun:"getSelectedTargetRun",selectedMode:"getSelectedMode",comparisonMode:"getComparisonMode",runBinCount:"getRunBinCount",selectedColorPoint:"getColorPoint",summary:"getSummary",targetColor:"getTargetColor",runtimeColorMap:"getRuntimeColorMap",distributionColorMap:"getDistributionColorMap",targetColorMap:"getTargetColorMap",isComparisonMode:"getComparisonMode"})},watch:{sg_data:function(t){this.data=t,this.singleColors(),this.visualize(),this.firstRender=!1},esg_data:function(t){this.data=t,this.singleColors(),this.ensembleColors(),this.visualize(),this.firstRender=!1},compare_data:function(t){}},mounted(){let t=this;At.$on("clear_summary_view",(function(){console.log("Clearing Summary view"),t.clear()})),At.$on("reveal-callsite",(function(){t.clear()})),At.$on("show_target_auxiliary",e=>{t.$refs.Nodes.$refs.TargetLine.clear(),t.$refs.MiniHistograms.clear()}),At.$on("update-ensemble-colors",()=>{t.$refs.ColorMap.clear(),t.isComparisonMode||(t.singleColors(),t.ensembleColors()),this.initColorMaps()})},methods:{init(){"SG"==this.selectedMode?this.$store.dispatch("fetchSG",{dataset:this.selectedTargetRun}):"ESG"==this.selectedMode&&this.$store.dispatch("fetchESG",{dataset:this.selectedTargetRun,nbins:this.runBinCount})},visualize(){this.width=this.$store.viewWidth,this.height=this.$store.viewHeight-2*this.margin.top-this.margin.bottom,this.sankeySVG=J["y"]("#"+this.id).attrs({width:this.width,height:this.height,top:this.toolbarHeight});let t=this.sankeySVG.select("#container");var e=J["D"]().on("zoom",(function(){t.attrs({transform:J["g"].transform,scale:J["g"].scale})}));this.sankeySVG.call(e),this.render()},singleColors(){const t=this.summary[this.selectedTargetRun][this.selectedMetric],[e,i]=ft(t);if(this.firstRender){let t="";"SG"===this.selectedMode?t="OrRd":"ESG"===this.selectedMode&&(t="Blues"),this.$store.commit("setRuntimeColorMap",t)}this.$store.runtimeColor=new Pe(this.selectedMetric,e,i,this.runtimeColorMap,this.selectedColorPoint)},ensembleColors(){const t=this.data.nodes.map(t=>t.attr_dict.gradients[this.selectedMetric]["hist"]["h"]),[e,i]=pt(t);this.$store.commit("setDistributionColorMap","Reds"),this.$store.distributionColor=new Pe("MeanGradients",e,i,this.distributionColorMap,this.selectedColorPoint)},clear(){this.$refs.Nodes.clear(),this.$refs.Edges.clear(),this.$refs.MiniHistograms.clear(),this.$refs.ColorMap.clear()},render(){this.sankeyWidth=.7*this.$store.viewWidth,this.sankeyHeight=.8*this.$store.viewHeight-this.margin.top-this.margin.bottom,this._init_sankey(this.data);let t=this._add_intermediate(this.data.nodes,this.data.links);this.data.nodes=t["nodes"],this.data.links=t["links"],this._init_sankey(),this.$refs.Nodes.init(this.data),this.$refs.Edges.init(this.data),this.$refs.MiniHistograms.init(this.data),this.initColorMaps()},initColorMaps(){"SG"==this.selectedMode?this.$refs.ColorMap.init(this.$store.runtimeColor):"ESG"==this.selectedMode&&(this.isComparisonMode?this.$refs.ColorMap.init(this.$store.diffColor):(this.$refs.ColorMap.init(this.$store.runtimeColor),this.$refs.ColorMap.init(this.$store.distributionColor)))},_init_sankey(){this.sankey=ss().nodeWidth(this.nodeWidth).nodePadding(this.ySpacing).size([this.sankeyWidth,this.sankeyHeight]).levelSpacing(this.levelSpacing).setMinNodeScale(this.nodeScale),this.sankey.link(),this.sankey.nodes(this.data.nodes).links(this.data.links).layout(32)},_add_intermediate(t,e){this.existingIntermediateNodes={};t.slice();const i=e.slice();let s=[],a={};for(let o=0;o<i.length;o++){const r=i[o].source,n=i[o].target;let l=i[o].source_data,d=i[o].target_data;const c=l.attr_dict.level,h=d.attr_dict.level,f=h-c;let p=!0;for(let u=f;u>1;u--){const c=t.length;let h={},m=l["max_flow"];void 0==this.existingIntermediateNodes[d.id]?(h={attr_dict:{...d.attr_dict,nid:-1,level:u},level:u,id:"i"+d.id,value:i[o].attr_dict.weight,targetValue:i[o].attr_dict.targetWeight,height:i[o].height,targetHeight:i[o].targetHeight,type:"intermediate",count:1},p&&(t.push(h),p=!1),this.existingIntermediateNodes[d.id]=h):(void 0==a[i[o].source]?(a[i[o].source]=0,this.existingIntermediateNodes[d.id].value+=i[o].weight):a[i[o].source]+=1,h=this.existingIntermediateNodes[d.id]);const g={attr_dict:i[o].attr_dict,type:"source_intermediate",source:l.id,target:h.id,weight:i[o].attr_dict.weight-100,targetWeight:i[o].attr_dict.targetWeight,max_flow:m};e.push(g),u==f&&(e[o].original_target=n);const b={attr_dict:i[o].attr_dict,type:"target_intermediate",source:h.id,target:d.id,weight:i[o].attr_dict.weight,targetWeight:i[o].attr_dict.targetWeight,max_flow:m};e.push(b),u==f&&(e[o].original_target=n),e[o].target_data=t[c],s.push({source:r,target:n})}}for(let o=0;o<s.length;o+=1){let t=s[o];console.debug("[SuperGraph] Removing edge: "+t);for(let i=0;i<e.length;i+=1){let s=e[i];t.source==s.source&&t.target==s.target&&e.splice(i,1)}}return{nodes:t,links:e}},activateCompareMode(t){this.$refs.Nodes.comparisonMode(t)}}},ha=ca,fa=(i("34a2"),Object(m["a"])(ha,Ji,ts,!1,null,"0789b25f",null)),pa=fa.exports;b()(fa,{VCol:G["a"],VLayout:ti["a"],VRow:L["a"]});var ua={name:"SuperGraph",components:{Splitpanes:$t.a,Toolbar:Me,Sankey:pa,SingleScatterplot:ii,SingleHistogram:ci,CallsiteInformation:Zi,Settings:Be},data:()=>({isSettingsOpen:!1,info:""}),computed:{...Object(c["c"])({summary:"getSummary",metricTimeMap:"getMetricTimeMap"})},beforeCreate(){this.$store.dispatch("fetchSummary")},mounted(){let t=this;At.$on("reset-sg",()=>{t.reset()})},watch:{isSettingsOpen:function(t){this.$emit("update:isSettingsOpen",t)},summary:function(t){this.isDataReady=!0,this.init()},selectedMode:function(t){this.selectedMode=t}},methods:{init(){this.$store.commit("setSelectedMode","SG"),this.currentComponents=this.setComponentMap(),this.initComponents(this.currentComponents)},setComponentMap(){return[this.$refs.SingleHistogram,this.$refs.SingleScatterplot,this.$refs.Sankey,this.$refs.CallsiteInformation,this.$refs.Settings]},clear(){this.clearComponents(this.currentComponents)},initComponents(t){for(let e=0;e<t.length;e++)t[e].init()},clearComponents(t){for(let e=0;e<t.length;e++)t[e].clear()},reset(){this.clear(),this.init()},closeSettings(){this.isSettingsOpen=!this.isSettingsOpen}}},ma=ua,ga=Object(m["a"])(ma,je,Ve,!1,null,null,null),ba=ga.exports;b()(ga,{VBtn:k["a"],VCard:B["a"],VCol:G["a"],VIcon:Nt["a"],VNavigationDrawer:ze["a"],VRow:L["a"]});var xa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"inspire"}},[Object.keys(t.metricTimeMap).length>0?i("Toolbar",{ref:"ToolBar",attrs:{isSettingsOpen:t.isSettingsOpen},on:{"update:isSettingsOpen":function(e){t.isSettingsOpen=e},"update:is-settings-open":function(e){t.isSettingsOpen=e}}}):t._e(),i("v-navigation-drawer",{attrs:{temporary:"",fixed:""},model:{value:t.isSettingsOpen,callback:function(e){t.isSettingsOpen=e},expression:"isSettingsOpen"}},[i("v-card",{attrs:{"fill-height":""}},[i("v-col",[i("v-row",[i("v-icon",{attrs:{color:"teal"}},[t._v("settings")]),i("v-col",{staticClass:"center teal--text",attrs:{cols:"9"}},[t._v("SETTINGS")]),i("v-btn",{attrs:{icon:""}},[i("v-icon",{on:{click:function(e){return t.closeSettings()}}},[t._v("close")])],1)],1),i("v-row",{attrs:{align:"center",justify:"space-around"}},[i("v-btn",{staticClass:"mx-0",attrs:{icon:""}},[t._v(" Reload "),i("v-icon",{on:{click:function(e){return t.reset()}}},[t._v("refresh")])],1)],1)],1)],1),i("Settings",{ref:"Settings"})],1),i("v-main",{staticClass:"pa-0 ma-0"},[i("splitpanes",{staticClass:"default-theme",attrs:{id:"callgraph-dashboard-2"}},[i("splitpanes",{attrs:{horizontal:"","splitpanes-size":"25"}},[i("ModuleHierarchy",{ref:"ModuleHierarchy"}),i("EnsembleScatterplot",{ref:"EnsembleScatterplot"}),i("EnsembleHistogram",{ref:"EnsembleHistogram"})],1),i("splitpanes",{attrs:{horizontal:"","splitpanes-size":"55"}},[i("Sankey",{ref:"Sankey"})],1),i("splitpanes",{attrs:{horizontal:"","splitpanes-size":"20","push-other-panes":!0}},[i("GradientView",{ref:"GradientView"}),i("CallsiteCorrespondence",{ref:"CallsiteCorrespondence"}),i("ParameterProjection",{ref:"ParameterProjection"})],1)],1)],1)],1)},ya=[],va=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{row:"",wrap:"",id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary}}),i("v-layout",{staticClass:"pl-8 pb-3",attrs:{row:"",wrap:""}},[i("v-btn",{staticClass:"reveal-button",class:t.isEntryFunctionSelected,attrs:{small:"",tile:"",outlined:""},on:{click:t.revealCallsite}},[t._v(" Reveal ")]),i("v-btn",{staticClass:"reveal-button",class:t.isEntryFunctionSelected,attrs:{small:"",tile:"",outlined:""},on:{click:t.showEntryFunctions}},[t._v(" Split caller ")]),i("v-btn",{staticClass:"reveal-button",class:t.isCalleeSelected,attrs:{small:"",tile:"",outlined:""},on:{click:t.showExitFunctions}},[t._v(" Split callee ")])],1),i("v-row",{staticClass:"ml-4"},[i("v-col",[i("p",{staticClass:"subtitle-2"},[t._v(" Matched "+t._s(t.numberOfIntersectionCallsites)+" callsites. ")])]),i("v-col",[i("p",{staticClass:"subtitle-2"},[t._v(" Unmatched "+t._s(t.numberOfDifferenceCallsites)+" callsites. ")])])],1),t._v("v "),t._l(t.differenceCallsites,(function(e){return i("v-container",{key:t.getID(e.nid),staticClass:"ml-4 cc-node",attrs:{"v-if":t.numberOfDifferenceCallsites>0}},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[i("v-row",t._g({staticClass:"pl-2 subtitle-2 font-weight-black"},a),[t._v(" "+t._s(t.formatName(e.name))+" ")])]}}],null,!0)},[i("span",[t._v(t._s(e.name))])])],1)],1),i("v-row",{staticClass:"pa-2",attrs:{wrap:""}},[i("Statistics",{attrs:{bData:t.intersectionCallsites[e.name]["bStats"]}})],1),i("v-row",{staticClass:"pa-2"},[i("BoxPlot",{ref:e.id,refInFor:!0,attrs:{bData:t.intersectionCallsites[e.name]["bBoxplot"],showTarget:"false"}})],1)],1)})),t._l(t.intersectionCallsites,(function(e){return i("v-container",{key:t.getID(e.name),staticClass:"ml-4 cc-node"},[i("v-row",[i("v-col",{attrs:{cols:"1"}},[i("v-card",{staticClass:"ma-2 ml-4",attrs:{tile:"",outlined:""}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[i("v-row",t._g({staticClass:"pl-2",class:t.selectClassName[e.name],attrs:{id:e.name,"text-xs-center":""}},a),[t._v(" "+t._s(t.formatNumberOfHops(t.cpath[e.name]))+" ")])]}}],null,!0)},[i("span",[t._v(" Callsite path:"+t._s(t.formatPath(t.cpath[e.name][0]))+" ")])])],1)],1),i("v-col",{attrs:{cols:"11"}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[i("v-row",t._g({staticClass:"mt-0 ml-2 pl-2 subtitle-2 font-weight-black"},a),[t._v(" "+t._s(t.formatName(e.name))+" ")])]}}],null,!0)},[i("span",[t._v(t._s(e.name))])])],1)],1),i("Statistics",{ref:"cc-Statistics",refInFor:!0,attrs:{tData:t.intersectionCallsites[e.name]["tStats"],bData:t.intersectionCallsites[e.name]["bStats"]}}),i("BoxPlot",{attrs:{bData:t.intersectionCallsites[e.name]["bBoxplot"],tData:t.intersectionCallsites[e.name]["tBoxplot"],showTarget:"false"}})],1)}))],2)},Ca=[],Sa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{id:t.id,width:t.containerWidth,height:t.containerHeight}},[t.dataReady?i("Box",{ref:"Box",attrs:{nid:t.nid,tq:t.tq,bq:t.bq,xScale:t.xScale,idPrefix:t.idPrefix,tColor:t.tColor,bColor:t.bColor}}):t._e(),t.dataReady?i("Markers",{ref:"Markers",attrs:{nid:t.nid,tq:t.tq,bq:t.bq,xScale:t.xScale,idPrefix:t.idPrefix,tColor:"tColor",bColor:t.bColor}}):t._e(),t.dataReady?i("Outliers",{ref:"Outliers",attrs:{nid:t.nid,tOutliers:t.tOutliers,bOutliers:t.bOutliers,xScale:t.xScale,idPrefix:t.idPrefix,tColor:"tColor",bColor:t.bColor}}):t._e(),i("ToolTip",{ref:"ToolTip"})],1)},_a=[],Ma={name:"BoxPlot",props:["tData","bData","width","height","showTarget"],data:()=>({id:"cc-boxplot",boxContainerID:"",markerContainerID:"",outlierContainerID:"",padding:{top:10,bottom:10,left:10,right:10},targetBoxWidth:0,targetBoxHeight:0,targetBoxFill:"",targetBoxX:0,targetBoxY:0,containerHeight:150,containerWidth:0,parentID:"",informationHeight:70,outlierHeight:20,rectHeight:0,centerLinePosition:0,boxHeight:0,boxWidth:0,dataReady:!1,idPrefix:"ensemble-boxplot-"}),computed:{...Object(c["c"])({generalColors:"getGeneralColors",targetColor:"getTargetColor"})},components:{Box:vi,Outliers:Di,Markers:ki,ToolTip:Gi},mounted(){this.init();let t=this;At.$on("ensemble-refresh-boxplot",e=>{t.clear(),t.init()})},methods:{init(){this.containerHeight=150,this.containerWidth=this.$parent.boxplotWidth-2*this.padding.right-1*this.padding.left,this.boxHeight=this.containerHeight-this.informationHeight,this.boxWidth=this.containerWidth,this.boxPosition=this.informationHeight/2+this.outlierHeight/2,this.centerLinePosition=(this.boxHeight-this.informationHeight/4)/2,this.rectHeight=this.boxHeight-this.informationHeight/4-this.outlierHeight/4,this.bq=this.qFormat(this.bData.q),this.tq=this.qFormat(this.tData.q),this.tOutliers=this.tData["outliers"],this.bOutliers=this.bData["outliers"],this.tColor=this.targetColor,this.bColor=this.generalColors.ensemble,this.nid=this.tData["nid"],this.id=this.idPrefix+this.nid,this.svg=J["y"]("#"+this.idPrefix+this.bData.nid).attrs({width:this.containerWidth,height:this.containerHeight});let t=Math.min(this.bq.min,this.tq.min),e=Math.max(this.bq.max,this.tq.max);this.xScale=J["s"]().domain([t,e]).range([.05*this.containerWidth,this.containerWidth-.05*this.containerWidth]),this.dataReady=!0},qFormat(t){let e={min:t[0],q1:t[1],q2:t[2],q3:t[3],max:t[4]};return e},clear(){this.$refs.Box.clear(),this.$refs.Markers.clear(),this.$refs.Outliers.clear()}}},wa=Ma,ka=Object(m["a"])(wa,Sa,_a,!1,null,null,null),Ta=ka.exports,$a={name:"CallsiteCorrespondence",components:{BoxPlot:Ta,InfoChip:Vt,Statistics:Xi},data:()=>({id:"cc-overview",title:"Call Site Correspondence",infoSummary:"Call site Correspondence view provides an insight into the runtime distribution among its MPI ranks. Boxplots are calculated to represent the range of the distribution and outliers (dots) correspond to the ranks which are beyond the 1.5*IQR. Additionally, several statistical measures are also provided. The (green) boxplots and dots belong to the target run's statistics. Both matched (callsites in both target and ensemble) and unmatched (callsites not in target but in ensemble) are shown in separate lists",callsites:[],numberOfIntersectionCallsites:0,numberOfDifferenceCallsites:0,padding:{top:0,right:10,bottom:0,left:10},boxplotHeight:340,boxplotWidth:0,revealCallsites:[],differenceCallsites:{},intersectionCallsites:{},isModuleSelected:!1,isCallsiteSelected:!1,isEntryFunctionSelected:"unselect-callsite",isCalleeSelected:"unselect-callsite",showSplitButton:"true",showKNCCallsite:{},tStats:{},bStats:{},tBoxplot:{},bBoxplot:{},cpath:{},selectClassName:{}}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",selectedNode:"getSelectedNode",selectedMetric:"getSelectedMetric",data:"getEnsembleBoxplots",summary:"getSummary",generalColors:"getGeneralColors",runtimeSortBy:"getRuntimeSortBy",iqrFactor:"getIQRFactor"})},watch:{data:function(){this.visualize()}},mounted(){let t=this;At.$on("highlight-dataset",e=>{let i=e["dataset"];t.showTarget&&t.highlightCallsitesByDataset(i)}),At.$on("highlight-datasets",e=>{console.log("[Interaction] Highlighting the datasets :",e),t.highlight(e)}),At.$on("callsite-correspondence-sort",e=>{t.clear(),t.visualize()}),At.$on("reset-ensemble-boxplots",()=>{t.clear(),t.init(),t.visualize()})},methods:{init(){const t=this.summary[this.selectedTargetRun];let e=[];if("module"==this.selectedNode["type"]){const i=this.selectedNode["name"],s=t["invmodules"][i];e=t["m2c"][s].map(e=>t["callsites"][e])}else"callsite"==this.selectedNode["type"]&&(e=[this.selectedNode["name"]]);this.$store.dispatch("fetchEnsembleBoxplots",{dataset:this.selectedTargetRun,metric:this.selectedMetric,callsites:e,ntype:"callsite",iqr:this.iqrFactor}),this.width=document.getElementById(this.id).clientWidth,this.boxplotWidth=this.width-this.padding.left-this.padding.right,this.height=.5*this.$store.viewHeight,document.getElementById(this.id).style.maxHeight=this.height+"px"},visualize(){this.tCallsites=this.sortByAttribute(this.data,this.selectedMetric,this.runtimeSortBy,"tgt"),this.bCallsites=this.sortByAttribute(this.data,this.selectedMetric,this.runtimeSortBy,"bkg"),this.knc=this.KNC(this.tCallsites,this.bCallsites),this.numberOfIntersectionCallsites=this.knc["intersection"].length,this.numberOfDifferenceCallsites=this.knc["difference"].length,this.ensembleColor=J["q"](this.generalColors.ensemble).darker(1),this.targetColor=J["q"](this.generalColors.target).darker(1),this.boxplotByMetric()},sortByAttribute(t,e,i,s){let a=Object.keys(t).map((function(e){return[e,t[e][s]]}));return a=a.sort((t,s)=>s[1][e][i]-t[1][e][i]),t=a.reduce((function(t,i){return t[i[0]]=i[1][e],t}),{}),t},boxplotByMetric(){for(let t of this.knc["intersection"]){let e=this.tCallsites[t],i=this.bCallsites[t];this.intersectionCallsites[t]={nid:e.nid,name:e.name,tStats:this.getStatistics(e),bStats:this.getStatistics(i),tBoxplot:this.getBoxplot(e),bBoxplot:this.getBoxplot(i)},this.cpath[t]=e["cpath"],this.selectClassName[t]="unselect-callsite"}for(let t of this.knc["difference"]){let e=this.bCallsites[t];this.differenceCallsites[t]={nid:e.nid,bStats:this.getStatistics(e),bBoxplot:this.getBoxplot(e)},this.cpath[t]=e["cpath"],this.selectClassName[t]="unselect-callsite"}},getStatistics(t){return{min:st(t["min"]),max:st(t["max"]),mean:st(t["mean"]),var:st(t["var"]),imb:st(t["imb"]),kurt:st(t["kurt"]),skew:st(t["skew"])}},getBoxplot(t){return{q:t["q"],outliers:t["outliers"],nid:t["nid"]}},borderColorByMetric(){for(let t in this.intersectionCallsites){let e=this.intersectionCallsites[t],i=e[this.selectedMetric]["mean"],s="callsite-information-"+e.id;document.getElementById(s).style.borderColor=this.$store.color.getColorByValue(i)}},getID(t){return"cc-node-"+t},formatModule(t){const e=t["name"];return e.length<10?e:this.trunc(e,10)},formatName(t){if(t.length<25)return t;let e=rt(t,25);return e},formatNumberOfHops(t){return t[0].length},formatRuntime(t){let e=J["i"](".2"),i=e(t)+" Î¼s";return i},formatPath(t){const e=this.summary[this.selectedTargetRun]["callsites"];let i=[];for(let s of t)i.push(e[s]);return i},KNC(t,e){let i=new Set(Object.keys(e)),s=new Set(Object.keys(t)),a=new Set([...i].filter(t=>!s.has(t))),o=new Set([...i].filter(t=>s.has(t)));return{difference:Array.from(a),intersection:Array.from(o)}},showAllCallsites(t){for(let e=0;e<t.length;e++)t[e].reveal=!0},hideAllCallsites(t){for(let e in t)t[e].reveal=!1;return t},showIntersectionBoxPlot(t){event.stopPropagation();let e=event.currentTarget.id;console.log("Toggling",e),this.intersectionCallsites[e].reveal=!0,At.$emit("show-boxplot",this.intersectionCallsites[e])},closeIntersectionBoxPlot(t){event.stopPropagation();let e=event.currentTarget.id;At.$emit("hide-boxplot",this.intersectionCallsites[e])},clear(){J["z"](".cc-node").remove(),At.$emit("clear-boxplot")},dataset(t){return this.labels[t]},revealCallsite(t){t.stopPropagation();t.currentTarget.id;this.$socket.emit("reveal_callsite",{mode:this.$store.selectedMode,reveal_callsites:this.revealCallsites,datasets:this.$store.selectedDatasets}),At.$emit("reveal-callsite")},showEntryFunctions(t){t.stopPropagation(),"unselect-callsite"==this.isEntryFunctionSelected?(this.isEntryFunctionSelected="select-callsite",this.isCalleeSelected="unselect-callsite"):this.isEntryFunctionSelected="unselect-callsite",this.showSplitButton="true"},showExitFunctions(t){t.stopPropagation(),"unselect-callsite"==this.isCalleeSelected?(this.isCalleeSelected="select-callsite",this.isEntryFunctionSelected="unselect-callsite"):this.isCalleeSelected="unselect-callsite",this.showSplitButton="true"},trunc(t,e){return t=t.replace(/<unknown procedure>/g,"proc "),t.length>e?t.substr(0,e-1)+"...":t},selectModule(t){let e=this.$store.moduleCallsiteMap["ensemble"][t];this.differenceCallsites={},this.knc["difference"].forEach(t=>{e.indexOf(t)>-1&&(this.differenceCallsites[t]=this.$store.data_cs["ensemble"][t])}),this.numberOfDifferenceCallsites=Object.keys(this.differenceCallsites).length,this.intersectionCallsites={},this.knc["intersection"].forEach(t=>{e.indexOf(t)>-1&&(this.intersectionCallsites[t]=this.$store.data_cs["ensemble"][t])}),this.numberOfIntersectionCallsites=Object.keys(this.intersectionCallsites).length},selectCallsitesByModule(t){this.selectedModule=t,this.selectedCallsite="";let e=Object.keys(this.$store.data_cs[this.$store.selectedTargetDataset]),i=this.$store.data_cs["ensemble"];for(let a in e)i.hasOwnProperty(a)&&(document.getElementById(i[a].id).style.opacity=.2,document.getElementById(i[a].id).style.borderStyle="solid");let s=this.$store.moduleCallsiteMap[t];for(let a in s)i.hasOwnProperty(a)&&(document.getElementById(i[a].id).style.opacity=1,document.getElementById(i[a].id).style.borderStyle="dotted")},getSelectedOutlierDatasets(t){return this.selectedOutlierDatasets[t]},getSelectedOutlierRanks(t){return this.selectedOutlierRanks[t]},split(){"select-callsite"==this.isEntryFunctionSelected?(this.$socket.emit("split_by_entry_callsites",{mode:this.$store.selectedMode,selectedModule:this.$store.selectedModule,datasets:this.$store.selectedDatasets}),At.$emit("reveal-callsite")):"select-callsite"==this.isCalleeSelected&&(this.$socket.emit("split_by_callees",{mode:this.$store.selectedMode,selectedModule:this.$store.selectedModule,datasets:this.$store.selectedDatasets}),At.$emit("reveal-callsite"))}}},Pa=$a,Ra=(i("f75b"),Object(m["a"])(Pa,va,Ca,!1,null,null,null)),Oa=Ra.exports;b()(Ra,{VBtn:k["a"],VCard:B["a"],VCol:G["a"],VContainer:z["a"],VLayout:ti["a"],VRow:L["a"],VTooltip:Lt["a"]});var Da=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}}),i("svg",{attrs:{id:t.svgID}}),i("ToolTip",{ref:"ToolTip"})],1)},Ea=[],Aa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:"tooltip-ensemble-histogram"}})},Ha=[],Ba={name:"ToolTip",components:{},data:()=>({id:"",textCount:0,textxOffset:20,textyOffset:20,textPadding:18,offset:10,fontSize:12}),sockets:{tooltip(t){this.render(t)}},methods:{init(t){this.id=t,this.toolTipDiv=J["y"]("#"+this.id),this.height=80,this.halfWidth=document.getElementById(this.id).clientWidth/2,this.halfHeight=document.getElementById(this.id).clientHeight/2},addText(t){this.toolTipText=this.toolTipDiv.append("text").style("font-family","sans-serif").style("font-size","").attrs({class:"toolTipContent",x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.id).clientWidth?this.mousePosX-this.width+this.textxOffset+"px":this.mousePosX+this.textxOffset+"px",y:()=>this.mousePosY+this.halfHeight>document.getElementById(this.id).clientHeight?this.mousePosY+this.textyOffset+this.textPadding*this.textCount-this.height+"px":this.mousePosY+this.textyOffset+this.textPadding*this.textCount+"px"}).text(t),this.textCount+=1},info(){this.addText("Count: "+this.data)},render(t){this.clear(),this.data=t,this.width=10*this.fontSize;J["s"]().domain([2,11]).range([50,150]);this.mousePos=J["o"](J["y"]("#"+this.id).node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.toolTipRect=this.toolTipDiv.append("rect").attrs({class:"toolTipContent",fill:"white",stroke:"black",rx:"10px","fill-opacity":1,width:this.width,height:"50",x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.id).clientWidth?this.mousePosX-this.width+"px":this.mousePosX+"px",y:()=>this.mousePosY+this.halfHeight>document.getElementById(this.id).clientHeight?this.mousePosY-this.height+"px":this.mousePosY+"px"}),this.info()},trunc(t,e){return t=t.replace(/<unknown procedure>/g,"proc "),t.length>e?t.substr(0,e-1)+"...":t},clear(){this.textCount=0,J["z"](".toolTipContent").remove()}}},Ia=Ba,Ga=Object(m["a"])(Ia,Aa,Ha,!1,null,null,null),za=Ga.exports,Na={name:"EnsembleHistogram",components:{ToolTip:za,InfoChip:Vt},data:()=>({width:null,height:null,padding:{top:10,right:10,bottom:10,left:15},dataset_index:[],id:"ensemble-histogram-view",svgID:"ensemble-histogram-view-svg",firstRender:!0,xVals:[],freq:[],selectedColorBy:"Inclusive",MPIcount:0,title:"Runtime Distribution",infoSummary:"MPI runtime distribution view shows the sampled distribution of the process-based metrics for a selected node. To connect the processes (e.g., MPI ranks) to the physical domain, we use shadow lines to visualize the rank-to-bin mapping. Shadow lines map the bins in the histogram to the process/rank id laid out on an ordered line at the bottom of the histogram.",info:"",paddingFactor:3.5,thisNode:"",selectedPropLabel:"",selectedPropSum:0,x_max_exponent:0,superscript:"â°Â¹Â²Â³â´âµâ¶â·â¸â¹",selectedScale:"Linear"}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",selectedNode:"getSelectedNode",summary:"getSummary",selectedMetric:"getSelectedMetric",data:"getEnsembleHistogram",showTarget:"getShowTarget",generalColors:"getGeneralColors",selectedProp:"getProp",selectedRunBinCount:"getRunBinCount",targetColor:"getTargetColor"})},watch:{data:function(){this.visualize()}},mounted(){let t=this;At.$on("reset-ensemble-histogram",(function(){t.clear(),t.init()}))},methods:{init(){this.$store.dispatch("fetchEnsembleHistogram",{dataset:this.selectedTargetRun,node:this.selectedNode["name"],ntype:this.selectedNode["type"],nbins:this.selectedRunBinCount}),this.width=.25*window.innerWidth,this.height=.3*this.$store.viewHeight,this.boxWidth=this.width-1*(this.padding.right+this.padding.left),this.boxHeight=this.height-2*(this.padding.top+this.padding.bottom),this.xAxisHeight=this.boxWidth-(this.paddingFactor+1)*this.padding.left,this.yAxisHeight=this.boxHeight-(this.paddingFactor+1)*this.padding.left,this.svg=J["y"]("#"+this.svgID).attrs({width:this.boxWidth,height:this.boxHeight,transform:"translate("+this.padding.left+","+this.padding.top+")"})},visualize(){this.info=this.selectedNode["name"]+" ("+this.selectedNode["type"][0].toUpperCase()+")",this.setupScale(),this.ensembleBars(),this.xAxis(),this.yAxis(),this.setTitle(),this.showTarget&&this.targetBars(),this.$refs.ToolTip.init(this.svgID)},setupScale(){this.hist_data=this.data[this.selectedMetric][this.selectedProp],this.rankCount=parseInt(this.summary["ensemble"].nranks),this.leftPadding=this.paddingFactor*this.padding.left,this.xScale=J["r"]().domain(this.hist_data["x"]).rangeRound([0,this.xAxisHeight]),"Linear"==this.selectedScale?(this.yScale=J["s"]().domain([0,this.hist_data["rel_y_max"]]).range([this.yAxisHeight,this.padding.top]),this.logScaleBool=!1):"Log"==this.selectedScale&&(this.yScale=J["t"]().domain([.1,this.hist_data["rel_y_max"]]).range([this.yAxisHeight,this.padding.top]),this.logScaleBool=!0)},setTitle(){"rank"==this.selectedProp?this.selectedPropLabel="Ranks":"name"==this.selectedProp?this.selectedPropLabel="Callsites":"dataset"==this.selectedProp&&(this.selectedPropLabel="Runs"),this.selectedPropSum=this.hist_data["y"].reduce((t,e)=>t+e),this.info="Number of "+this.selectedPropLabel+"= "+this.selectedPropSum},clear(){J["z"](".dist-histogram-bar").remove(),J["z"](".dist-histogram-target").remove(),J["z"](".dist-histogram-others").remove(),J["y"](".x-axis").remove(),J["y"](".y-axis").remove(),J["z"](".binRank").remove(),J["z"](".lineRank").remove(),J["z"](".target_lineRank").remove(),J["z"](".tick").remove(),J["z"](".histogram-axis-label").remove()},targetBars(){let t=this;this.svg.selectAll(".dist-target").data(this.hist_data["y"]).enter().append("rect").attr("class","dist-histogram-bar dist-target").attrs({x:(t,e)=>this.xScale(this.hist_data["x"][e]),y:(t,e)=>this.yScale(t),width:this.xScale.bandwidth(),height:t=>Math.abs(this.yAxisHeight-this.yScale(t)),fill:this.targetColor,opacity:1,"stroke-width":"0.2px",stroke:"#202020",transform:"translate("+this.leftPadding+",0)"}).on("mouseover",(function(e,i){t.$refs.ToolTip.render(e)})).on("mouseout",(function(e,i){t.$refs.ToolTip.clear()}))},ensembleBars(){let t=this;this.svg.selectAll(".dist-ensemble").data(this.hist_data["rel_y"]).enter().append("rect").attr("class","dist-histogram-bar dist-ensemble").attrs({x:(t,e)=>this.xScale(this.hist_data["x"][e]),y:(t,e)=>this.yScale(t),width:this.xScale.bandwidth(),height:t=>Math.abs(this.yAxisHeight-this.yScale(t)),fill:this.generalColors.intermediate,opacity:1,"stroke-width":"0.2px",stroke:"#202020",transform:"translate("+this.leftPadding+",0)"}).on("mouseover",(function(e,i){t.$refs.ToolTip.render(e)})).on("mouseout",(function(e,i){t.$refs.ToolTip.clear()}))},addxAxisLabel(){let t=this.xScale.domain()[1];this.x_max_exponent=ot(t);this.superscript[this.x_max_exponent];let e="(e+"+this.x_max_exponent+") "+this.selectedMetric+" Runtime (Î¼s)";this.svg.append("text").attrs({class:"histogram-axis-label",x:this.boxWidth-this.padding.left,y:this.yAxisHeight+3*this.padding.top}).style("font-size","12px").style("text-anchor","end").text(e)},xAxis(){let t=this;this.addxAxisLabel();const e=J["c"](this.xScale).ticks(5).tickFormat((e,i)=>{if(i%3==0){let i=at(e,t.x_max_exponent);return""+i[0]}}),i=this.svg.append("g").attrs({class:"x-axis",transform:"translate("+this.paddingFactor*this.padding.left+","+this.yAxisHeight+")"}).call(e);i.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),i.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.5),i.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")},yAxis(){const t=J["d"](this.yScale).ticks(10).tickFormat((t,e)=>{if("rank"==this.selectedProp){if(1==t)return t;if(t%10==0)return t}else if("dataset"==this.selectedProp){if(t%1==0)return t}else if("name"==this.selectedProp&&t%1==0)return t});let e="";"name"==this.selectedProp?e="Number of Callsites":"dataset"==this.selectedProp?e="Number of Runs":"rank"==this.selectedProp?e="Number of Ranks":"all_ranks"==this.selectedProp&&(e="Number of Processes"),this.svg.append("text").attrs({transform:"rotate(-90)",class:"histogram-axis-label",x:-this.padding.top,y:this.padding.left}).style("font-size","12px").style("text-anchor","end").text(e);const i=this.svg.append("g").attrs({class:"y-axis",transform:"translate("+this.paddingFactor*this.padding.left+", 0)"}).call(t);i.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),i.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.2),i.selectAll("text").style("font-size","12px").style("font-family","sans-serif").style("font-weight","lighter")}}},La=Na,ja=Object(m["a"])(La,Da,Ea,!1,null,null,null),Va=ja.exports,Wa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{row:"",wrap:"",id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}}),i("ToolTip",{ref:"ToolTip"})],1)},Fa=[],qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"tooltip"})},Ya=[],Xa={name:"ToolTip",components:{},data:()=>({id:"",textCount:0,textxOffset:20,textyOffset:20,textPadding:18,offset:10,fontSize:12}),sockets:{tooltip(t){this.render(t)}},methods:{init(t){this.id=t,this.toolTipDiv=J["y"]("#"+this.id),this.height=80,this.halfWidth=document.getElementById(this.id).clientWidth/2,this.halfHeight=document.getElementById(this.id).clientHeight/2},addText(t){this.toolTipText=this.toolTipDiv.append("text").style("font-family","sans-serif").style("font-size","").attrs({class:"toolTipContent",x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.id).clientWidth?this.mousePosX-this.width+this.textxOffset+"px":this.mousePosX+this.textxOffset+"px",y:()=>this.mousePosY+this.halfHeight>document.getElementById(this.id).clientHeight?this.mousePosY+this.textyOffset+this.textPadding*this.textCount-this.height+"px":this.mousePosY+this.textyOffset+this.textPadding*this.textCount+"px"}).text(t),this.textCount+=1},info(){this.addText("Name: "+rt(this.data.data.id,40)),this.addText("time (inc): "+et(this.data.data.attr_dict["time (inc)"])),this.addText("time: "+et(this.data.data.attr_dict["time"]))},render(t){this.clear(),this.data=t,this.width=26*this.fontSize;J["s"]().domain([2,11]).range([50,150]);this.mousePos=J["o"](J["y"]("#"+this.id).node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.toolTipRect=this.toolTipDiv.append("rect").attrs({class:"toolTipContent",fill:"white",stroke:"black",rx:"10px","fill-opacity":1,width:this.width,height:75,x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.id).clientWidth?this.mousePosX-this.width+"px":this.mousePosX+"px",y:()=>this.mousePosY+this.halfHeight>document.getElementById(this.id).clientHeight?this.mousePosY-this.height+"px":this.mousePosY+"px"}),this.info()},clear(){this.textCount=0,J["z"](".toolTipContent").remove()}}},Ua=Xa,Qa=Object(m["a"])(Ua,qa,Ya,!1,null,null,null),Ka=Qa.exports;class Za{constructor(t,e=null){this.value=t,this.next=e}toString(t){return t?t(this.value):""+this.value}}class Ja{constructor(t){this.compare=t||Ja.defaultCompareFunction}static defaultCompareFunction(t,e){return t===e?0:t<e?-1:1}equal(t,e){return 0===this.compare(t,e)}lessThan(t,e){return this.compare(t,e)<0}greaterThan(t,e){return this.compare(t,e)>0}lessThanOrEqual(t,e){return this.lessThan(t,e)||this.equal(t,e)}greaterThanOrEqual(t,e){return this.greaterThan(t,e)||this.equal(t,e)}reverse(){const t=this.compare;this.compare=(e,i)=>t(i,e)}}class to{constructor(t){this.head=null,this.tail=null,this.compare=new Ja(t)}prepend(t){const e=new Za(t,this.head);return this.head=e,this.tail||(this.tail=e),this}append(t){const e=new Za(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)}delete(t){if(!this.head)return null;let e=null;while(this.head&&this.compare.equal(this.head.value,t))e=this.head,this.head=this.head.next;let i=this.head;if(null!==i)while(i.next)this.compare.equal(i.next.value,t)?(e=i.next,i.next=i.next.next):i=i.next;return this.compare.equal(this.tail.value,t)&&(this.tail=i),e}find({value:t,callback:e}){if(!this.head)return null;let i=this.head;while(i){if(e&&e(i.value))return i;if(void 0!==t&&this.compare.equal(i.value,t))return i;i=i.next}return null}deleteTail(){const t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;let e=this.head;while(e.next)e.next.next?e=e.next:e.next=null;return this.tail=e,t}deleteHead(){if(!this.head)return null;const t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t}fromArray(t){return t.forEach(t=>this.append(t)),this}toArray(){const t=[];let e=this.head;while(e)t.push(e),e=e.next;return t}toString(t){return this.toArray().map(e=>e.toString(t)).toString()}reverse(){let t=this.head,e=null,i=null;while(t)i=t.next,t.next=e,e=t,t=i;return this.tail=this.head,this.head=e,this}}class eo{constructor(){this.linkedList=new to}isEmpty(){return!this.linkedList.head}peek(){return this.linkedList.head?this.linkedList.head.value:null}enqueue(t){this.linkedList.append(t)}dequeue(){const t=this.linkedList.deleteHead();return t?t.value:null}toString(t){return this.linkedList.toString(t)}}var io={name:"ModuleHierarchy",components:{ToolTip:Ka,InfoChip:Vt},props:[],data:()=>({margin:{top:5,right:5,bottom:5,left:5},level:[0,0],colorByAttr:"Inclusive",direction:["LR","TD"],selectedDirection:"TD",textTruncForNode:15,color:null,width:null,height:null,totalSize:0,b:{w:150,h:30,s:3,t:10},maxLevel:0,path_hierarchy:[],id:"module-hierarchy-overview",padding:0,offset:4,stroke_width:4,metric:"",selectedModule:"",svgID:"module-hierarchy-svg",title:"Super node Hierarchy",infoSummary:"",info:"",selectedHierarchyMode:"Uniform",firstRender:!0}),computed:{...Object(c["c"])({selectedNode:"getSelectedNode",data:"getHierarchy",runs:"getRuns",showTarget:"getShowTarget",generalColors:"getGeneralColors",selectedTargetRun:"getSelectedTargetRun",runBinCount:"getRunBinCount",selectedMetric:"getSelectedMetric",runtimeColorMap:"getRuntimeColorMap",distributionColorMap:"getDistributionColorMap",targetColorMap:"getTargetColorMap",summary:"getSummary",selectedMode:"getSelectedMode"})},watch:{level:{handler:function(t,e){this.update_level()},deep:!0},data:function(){this.visualize()}},mounted(){let t=this;At.$on("reset-module-hierarchy",(function(){t.clear(),t.init()})),At.$on("update-node-encoding",(function(){t.clear(),t.init()})),this.infoSummary="Module: "+this.selectedNode["name"]},methods:{init(){"module"==this.selectedNode.type&&this.$store.dispatch("fetchHierarchy",{node:this.selectedNode["name"],ntype:this.selectedNode["type"],dataset:this.selectedTargetRun,nbins:this.runBinCount}),this.width=document.getElementById(this.id).clientWidth,this.height=.3*this.$store.viewHeight,this.icicleWidth=this.width-this.margin.right-this.margin.left,this.icicleHeight=this.height-this.margin.top-this.margin.bottom,this.hierarchySVG=J["y"]("#"+this.id).append("svg").attrs({id:this.svgID,width:this.icicleWidth+this.margin.right+this.margin.left+10,height:this.icicleHeight+this.margin.top+this.margin.bottom}),this.$refs.ToolTip.init(this.svgID)},visualize(){const t=this.bfs(this.data);this.drawIcicles(t),this.firstRender=!1},formatModule(t){return t.length<10?t:this.trunc(t,10)},update_maxlevels(t){let e=t["level"];for(const[i,s]of Object.entries(e))this.maxLevel<s&&(this.maxLevel=s,this.level=[0,s])},update_level(){this.clear();let t=[];if(this.minLevel=this.level[0],this.maxLevel=this.level[1],this.minLevel>this.maxLevel)return void console.error("Cannot generate icicle plot, min_level > max_level");for(let i=0;i<this.path_hierarchy.length;i+=1){let e=this.path_hierarchy[i][0].length;1==e||e>=this.minLevel||e<this.maxLevel?t.push(this.path_hierarchy[i]):console.log("TODO: ")}this.path_hierarchy=t;const e=this.buildHierarchy(this.path_hierarchy);this.drawIcicles(e)},bfs(t){const e=new eo;let i=t,s=null;e.enqueue(i);while(!e.isEmpty()){const t=e.dequeue();t.count=e.length,t.hasOwnProperty("children")&&t["children"].forEach(t=>{e.enqueue(t)}),s=t}return t},trunc(t,e){return t=t.replace(/<unknown procedure>/g,"proc "),t.length>e?t.substr(0,e-1)+"...":t},clear(){J["y"]("#module-hierarchy-svg").remove()},clearEncoding(){J["y"](".hierarchy-gradient").remove()},descendents(t){let e=[],i=[];i.push(t),e.push(t);while(0!=i.length)t=i.pop(),void 0!=t.children&&t.children.forEach((function(t){e.push(t),i.push(t)}));return e},partition(t){var e=this.width,i=this.height,s=0,a=!1,o=t.height+1;return t.x0=t.y0=s,t.x1=e,t.y1=i/o,t.eachBefore(this.positionNode(i,o)),a&&t.eachBefore(this.roundNode),t},positionNode(t,e){let i=this;return function(s){s.children&&("Exclusive"==i.selectedHierarchyMode?i.diceByValue(s,s.x0,t*(s.depth+1)/e,s.x1,t*(s.depth+2)/e):"Uniform"==i.selectedHierarchyMode&&i.dice(s,s.x0,t*(s.depth+1)/e,s.x1,t*(s.depth+2)/e));var a=s.x0,o=s.y0,r=s.x1-i.padding,n=s.y1-i.padding;r<a&&(a=r=(a+r)/2),n<o&&(o=n=(o+n)/2),s.x0=a,s.y0=o,s.x1=r,s.y1=n}},roundNode(t){return t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1),t},dice(t,e,i,s,a){var o,r=t.children,n=-1,l=r.length;let d=0;while(++n<l)o=r[n],o.y0=i,o.y1=a,o.x0=t.x0+d,d+=(t.x1-t.x0)/l,o.x1=t.x0+d},diceByValue(t,e,i,s,a){let o=1;o=null==t.parent?this.$store.data_mod["ensemble"][t.data.id]["max_time"]:this.$store.data_cs["ensemble"][t.data.id][this.metric];var r,n=t.children,l=-1,d=n.length,c=o&&(t.x1-t.x0)/o;while(++l<d)r=n[l],r.y0=i,r.y1=a,r.x0=e,r.x1=e+=r.data.data[this.metric]*c},drawIcicles(t){this.hierarchy=this.hierarchySVG.attrs({id:this.svgID}),J["y"]("#togglelegend").on("click",this.toggleLegend),this.hierarchy.append("svg:rect").attr("width",()=>"LR"==this.selectedDirection?this.icicleHeight:this.width).attr("height",()=>"LR"==this.selectedDirection?this.width-50:this.height-50).style("opacity",0);let e=J["j"](t),i=this.partition(e);this.nodes=this.descendents(i),this.singleColors(),this.ensembleColors(),this.addNodes(),this.addText(),this.showTarget,J["y"]("#container").on("mouseleave",this.mouseleave),this.totalSize=e.value},singleColors(){const t=this.summary[this.selectedTargetRun][this.selectedMetric],[e,i]=ft(t);let s=this.runtimeColorMap;this.firstRender&&("SG"===this.selectedMode?s="OrRd":"ESG"===this.selectedMode&&(s="Blues"),this.$store.commit("setRuntimeColorMap",s)),this.runtimeColor=new Pe(this.selectedMetric,e,i,s,this.selectedColorPoint)},ensembleColors(){const t=this.nodes.map(t=>t.data.attr_dict.grad[this.selectedMetric]["hist"]["h"]),[e,i]=pt(t);this.$store.commit("setDistributionColorMap","Reds"),this.distributionColor=new Pe("MeanGradients",e,i,this.distributionColorMap,this.selectedColorPoint)},fill_with_gradients(t,e,i){if(void 0==t.attr_dict.grad)return"#000";let s=t.attr_dict.id;const a=J["y"]("#module-hierarchy-svg").append("defs"),o=a.append("linearGradient").attr("id","hierarchy-gradient"+s).attr("class","hierarchy-gradient");o.attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");const r=t.attr_dict.grad[e]["hist"]["b"],n=t.attr_dict.grad[e]["hist"]["h"];for(let l=0;l<r.length;l+=1){let t=(l+l+1)/(2*r.length);o.append("stop").attr("offset",100*t+"%").attr("stop-color",i.getColorByValue(n[l]))}return"url(#hierarchy-gradient"+s+")"},drawTargetLine(){let t=this.$store.selectedTargetDataset;for(let e=0;e<this.nodes.length;e++){let i=this.nodes[e].data,s=0,a=[],o=void 0;if(0==this.nodes[e].depth&&void 0!=this.$store.data_mod["ensemble"][i.id]){let e=this.$store.data_mod["ensemble"][i.id][this.$store.selectedMetric]["gradients"];s=e["dataset"]["mean"][t],a=e["hist"],o=e["dataset"]["position"][t]+1}else if(void 0!=this.$store.data_cs["ensemble"][i.id]){let e=this.$store.data_cs["ensemble"][i.id][this.$store.selectedMetric]["gradients"];s=e["dataset"]["mean"][t],a=e["hist"],o=e["dataset"]["position"][t]+1}a.x,a.y;let r=(this.nodes[e].x1-this.nodes[e].x0)/this.$store.selectedRunBinCount,n=this.nodes[e].x0+r*o-r/2;this.hierarchySVG.append("line").attrs({class:"hierarchy-targetLines",x1:n,y1:(this.nodes[e].y1-this.nodes[e].y0)*this.nodes[e].depth+this.offset,x2:n,y2:(this.nodes[e].y1-this.nodes[e].y0)*(this.nodes[e].depth+1)-this.offset,"stroke-width":5,stroke:this.$store.distributionColor.target})}},clearGuides(t){J["z"](".hierarchy-guideLines").remove()},drawGuides(t){let e=this.$store.selectedTargetDataset,i=(this.$store.data_mod,t.data),s=0,a=[];0==t.depth?(s=this.$store.data_mod[e][i.id]["gradients"][this.$store.selectedMetric]["dataset"][e],a=this.$store.data_mod["ensemble"][i.id]["gradients"][this.$store.selectedMetric]["hist"]):(s=this.$store.data_cs[e][i.id]["gradients"][this.$store.selectedMetric]["dataset"][e],a=this.$store.data_cs["ensemble"][i.id]["gradients"][this.$store.selectedMetric]["hist"]);let o=a.x,r=(a.y,(t.x1-t.x0)/this.$store.selectedRunBinCount);for(let n=0;n<o.length;n+=1){let e=r*n;this.hierarchySVG.append("line").attrs({class:"hierarchy-guideLines",x1:e,y1:(t.y1-t.y0)*t.depth,x2:e,y2:(t.y1-t.y0)*(t.depth+1),"stroke-width":3,stroke:"#202020"})}},addNodes(){this.hierarchy.selectAll(".icicleNode").data(this.nodes).enter().append("rect").attr("class","icicleNode").attr("id",t=>t.data.attr_dict.id).attr("x",t=>"LR"==this.selectedDirection?(Number.isNaN(t.y0),t.data.count*this.width/t.data.length):t.x0).attr("y",t=>"LR"==this.selectedDirection?t.x0+this.offset+this.stroke_width:t.y0+this.offset).attr("width",t=>"LR"==this.selectedDirection?Number.isNaN(t.y1-t.y0)?this.width/t.data.length-this.offset-this.stroke_width:t.y1-t.y0-this.offset-this.stroke_width:t.x1-t.x0-this.offset-this.stroke_width).attr("height",t=>"LR"==this.selectedDirection?t.x1-t.x0-this.offset:t.y1-t.y0-this.offset-this.stroke_width).style("fill",(t,e)=>this.fill_with_gradients(t.data,this.selectedMetric,this.distributionColor)).style("stroke",t=>{let e=t.data.attr_dict[this.selectedMetric];return J["q"](this.runtimeColor.getColorByValue(e))}).style("stroke-width",this.stroke_width).style("opacity",t=>t.exit?.5:1).on("click",this.click).on("mouseover",t=>{const e=(100*t.value/this.totalSize).toPrecision(3);this.percentageString=e+"%",e<.1&&(this.percentageString="< 0.1%");const i=this.getAncestors(t);J["z"](".icicleNode").style("opacity",.1),this.hierarchy.selectAll(".icicleNode").filter(t=>i.indexOf(t)>=0).style("opacity",1),this.$refs.ToolTip.render(t)}).on("mouseout",t=>{J["z"](".icicleNode").style("opacity",1)})},addText(){this.hierarchy.selectAll(".icicleText").data(this.nodes).enter().append("text").attr("class","icicleText").attr("transform",t=>"LR"==this.selectedDirection?"rotate(90)":"rotate(0)").attr("x",t=>"LR"==this.selectedDirection?(Number.isNaN(t.y0),t.data.count*this.width/t.data.length):t.x0+2*this.offset).attr("y",t=>"LR"==this.selectedDirection?t.x0:t.y0+2.5*(this.stroke_width+this.offset)).attr("width",t=>"LR"==this.selectedDirection?(Number.isNaN(t.y1-t.y0),this.width/t.data.length):this.width).style("fill",t=>{let e=this.runtimeColor.setContrast(this.runtimeColor.getColor(t));return e}).style("font-size","14px").text(t=>{if(t.y1-t.y0<10||t.x1-t.x0<50)return"";let e=t.data.id,i=(nt(this.id,e)["width"],14),s=Math.floor((t.x1-t.x0)/i);return e=rt(e,s),e})},click(t){let e=this.selectedSplitOption.name;J["z"](".icicleNode").style("opacity",.3);let i=this.getAncestors(t);this.hierarchy.selectAll(".icicleNode").filter(t=>i.indexOf(t)>=0).style("opacity",1),this.$socket.emit(e,{})},mouseleave(){J["y"]("#trail").style("visibility","hidden"),J["z"](".icicleNode").on("mouseover",null),J["z"](".icicleNode").transition().duration(1e3).style("opacity",1).each("end",(function(){}))},mouseover(t){this.$refs.ToolTip.render(t)},mouseout(t){this.$refs.ToolTip.clear()},getAncestors(t){const e=[];let i=t;while(i.parent)e.unshift(i),i=i.parent;return e.unshift(i),e},initializeBreadcrumbTrail(){document.getElementById(this.svgID).clientWidth;const t=J["y"]("#sequence").append("svg:svg").attr("width",this.icicleWidth).attr("height",50).attr("id","trail");t.append("svg:text").attr("id","endlabel").style("fill","#000")},breadcrumbPoints(t){const e=[];return e.push("0,0"),e.push(this.b.w+",0"),e.push(`${this.b.w+this.b.t},${this.b.h/2}`),e.push(`${this.b.w},${this.b.h}`),e.push("0,"+this.b.h),t>0&&e.push(`${this.b.t},${this.b.h/2}`),e.join(" ")},updateBreadcrumbs(t,e){const i=J["y"]("#trail").selectAll("g").data(t,t=>t.name+t.depth),s=i.enter().append("svg:g");s.append("svg:polygon").attr("points",this.breadcrumbPoints).style("fill",()=>"#f1f1f1"),s.append("svg:text").attr("x",(this.b.w+this.b.t)/2).attr("y",this.b.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(t=>t.name),i.attr("transform",(t,e)=>`translate(${e*(this.b.w+this.b.s)}, 0)`),i.exit().remove(),J["y"]("#trail").select("#endlabel").attr("x",(t.length+.5)*(this.b.w+this.b.s)).attr("y",this.b.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(e),J["y"]("#trail").style("visibility","")},toggleLegend(){const t=J["y"]("#legend");"hidden"==t.style("visibility")?t.style("visibility",""):t.style("visibility","hidden")}}},so=io,ao=Object(m["a"])(so,Wa,Fa,!1,null,null,null),oo=ao.exports;b()(ao,{VLayout:ti["a"]});var ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary}}),i("svg",{attrs:{id:t.svgID}}),i("ToolTip",{ref:"ToolTip"})],1)},no=[],lo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{id:"tooltip_scatterplot"}})},co=[],ho={name:"ToolTip",data:()=>({id:"",textCount:0,textxOffset:20,textyOffset:20,textPadding:18,offset:10,fontSize:12}),computed:{...Object(c["c"])({selectedMetric:"getSelectedMetric"})},methods:{init(t){this.id=t,this.toolTipDiv=J["y"]("#"+this.id).append("svg").attr("class","toolTipSVG"),this.toolTipG=this.toolTipDiv.append("g"),this.height=50,this.halfWidth=document.getElementById(this.id).clientWidth/2,this.halfHeight=document.getElementById(this.id).clientHeight/2},addText(t){this.toolTipText=this.toolTipG.append("text").style("font-family","sans-serif").style("font-size","").attrs({class:"toolTipContent",x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.id).clientWidth?this.mousePosX-this.width+this.textxOffset+"px":this.mousePosX+this.textxOffset+"px",y:()=>this.mousePosY+this.halfHeight>document.getElementById(this.id).clientHeight?this.mousePosY+this.textyOffset+this.textPadding*this.textCount-this.height+"px":this.mousePosY+this.textyOffset+this.textPadding*this.textCount+"px"}).text(t),this.textCount+=1},trunc(t,e){return t=t.replace(/<unknown procedure>/g,"proc "),t.length>e?t.substr(0,e-1)+"...":t},info(){this.addText(this.data.orientation[0]+" : "+et(this.data.x)),this.addText(this.data.orientation[1]+" : "+et(this.data.y))},render(t){this.clear(),this.width=19*this.fontSize;var e=J["s"]().domain([2,11]).range([50,150]);this.mousePos=J["o"](J["y"]("#"+this.id).node()),this.mousePosX=this.mousePos[0],this.mousePosY=this.mousePos[1],this.toolTipG.attr("height",e(10)+"px"),this.toolTipRect=this.toolTipG.append("rect").attrs({class:"toolTipContent",fill:"white",stroke:"black",rx:"10px","fill-opacity":1,width:this.width,height:this.height,x:()=>this.mousePosX+this.halfWidth>document.getElementById(this.id).clientWidth?this.mousePosX-this.width+"px":this.mousePosX+"px",y:()=>this.mousePosY+this.halfHeight>document.getElementById(this.id).clientHeight?this.mousePosY-this.height+"px":this.mousePosY+"px"}),this.data=t,this.info()},clear(){this.textCount=0,J["z"](".toolTipContent").remove()}}},fo=ho,po=Object(m["a"])(fo,lo,co,!1,null,null,null),uo=po.exports,mo={name:"EnsembleScatterplot",components:{ToolTip:uo,InfoChip:Vt},data:()=>({padding:{top:10,right:10,bottom:15,left:15},xMin:0,xMax:0,yMin:0,yMax:0,firstRender:!0,xData:[],yData:[],nameData:[],id:"ensemble-scatterplot-view",svgID:"ensemble-scatterplot-view-svg",title:"Metric Correlation",info:"",message:"",boxOffset:20,settings:[{title:"Show Difference plot"},{title:"aaa"}],moduleUnDesirability:1,x_max_exponent:0,y_max_exponent:0,superscript:"â°Â¹Â²Â³â´âµâ¶â·â¸â¹",includesTarget:!0,undesirability:{},maxUndesirability:0,maxVarianceCallsite:"",infoSummary:"MPI Runtime Scatterplot view correlates between the inclusive and exclusive runtime metrics across the ensemble. Each dot or point in the view represents a process.",svg:void 0}),computed:{...Object(c["c"])({selectedTargetRun:"getSelectedTargetRun",selectedNode:"getSelectedNode",data:"getEnsembleScatterplot",summary:"getSummary",showTarget:"getShowTarget",generalColors:"getGeneralColors",targetColor:"getTargetColor"})},watch:{data:function(){this.visualize()}},mounted(){let t=this;At.$on("reset-ensemble-scatterplot",(function(){t.clear(),t.init()}))},methods:{init(){this.orientation=["time","time (inc)"],this.$store.dispatch("fetchEnsembleScatterplot",{dataset:this.selectedTargetRun,node:this.selectedNode["name"],ntype:this.selectedNode["type"],orientation:["time","time (inc)"]}),this.width=.25*window.innerWidth,this.height=.3*this.$store.viewHeight,this.boxWidth=this.width-this.padding.right-this.padding.left,this.boxHeight=this.height-this.padding.top-this.padding.bottom,this.svg=J["y"]("#"+this.svgID).attr("width",this.boxWidth).attr("height",this.boxHeight-this.padding.top).attr("transform","translate("+this.padding.left+","+this.padding.top+")")},preprocess(t,e){for(let i in t["mean"])this.yData.push(t["mean"][i]);for(let i in t["diff"])this.xData.push(t["diff"][i]),this.nameData.push(i)},visualize(){this.firstRender=!1,this.maxVarianceCallsite="",this.maxUndesirability=0,this.xMin=this.data["bkg"]["xMin"],this.yMin=this.data["bkg"]["yMin"],this.xMax=this.data["bkg"]["xMax"],this.yMax=this.data["bkg"]["yMax"],this.xArray=this.data["bkg"]["x"],this.yArray=this.data["bkg"]["y"],this.xtargetMin=this.data["tgt"]["xMin"],this.ytargetMin=this.data["tgt"]["yMin"],this.xtargetMax=this.data["tgt"]["xMax"],this.ytargetMax=this.data["tgt"]["yMax"],this.xtargetArray=this.data["tgt"]["x"],this.ytargetArray=this.data["tgt"]["y"],this.xAxisHeight=this.boxWidth-4*this.padding.left,this.yAxisHeight=this.boxHeight-4*this.padding.left;let t=Math.max(this.xMax,this.xtargetMax),e=Math.min(this.xMin,this.xtargetMin),i=Math.max(this.yMax,this.ytargetMax),s=Math.min(this.yMin,this.ytargetMin);this.xScale=J["s"]().domain([e,t]).nice(5).range([this.padding.left,this.xAxisHeight]),this.yScale=J["s"]().domain([s,i]).nice(5).range([this.yAxisHeight,this.padding.top]),this.drawXAxis(),this.drawYAxis(),this.ensembleDots(),this.trendline(this.xArray,this.yArray,"red","bkg"),this.showTarget&&(this.trendline(this.xtargetArray,this.ytargetArray,"blue","tgt"),this.targetDots()),this.setTitle(),this.$refs.ToolTip.init(this.svgID)},setTitle(){this.moduleUnDesirability=this.maxUndesirability},addxAxisLabel(){let t=this.xScale.domain()[1];this.x_max_exponent=ot(t);this.superscript[this.x_max_exponent];let e="(e+"+this.x_max_exponent+") Exclusive Runtime (Î¼s)";this.svg.append("text").attr("class","scatterplot-axis-label").attr("x",this.boxWidth-1*this.padding.right).attr("y",this.yAxisHeight+3*this.padding.top).style("font-size","12px").style("text-anchor","end").text(e)},drawXAxis(){this.addxAxisLabel();const t=J["c"](this.xScale).ticks(10).tickFormat((t,e)=>{if(e%3==0){let e=at(t,this.x_max_exponent);return""+e[0]}});var e=this.svg.append("g").attr("class","axis").attr("id","xAxis").attr("transform","translate("+3*this.padding.left+","+this.yAxisHeight+")").call(t);e.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),e.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px"),e.selectAll("text").style("font-size","14px").style("font-family","sans-serif").style("font-weight","lighter")},addyAxisLabel(){let t=this.yScale.domain()[1];this.y_max_exponent=ot(t);this.superscript[this.y_max_exponent];let e="(e+"+this.y_max_exponent+") Inclusive Runtime (Î¼s)";this.svg.append("text").attr("class","scatterplot-axis-label").attr("transform","rotate(-90)").attr("x",-this.padding.top).attr("y",this.padding.left).style("text-anchor","end").style("font-size","12px").text(e)},drawYAxis(){let t=10;this.addyAxisLabel();let e=J["d"](this.yScale).ticks(t).tickFormat((e,i)=>{if(i%3==0||i==t-1){let t=at(e,this.y_max_exponent);return""+t[0]}});var i=this.svg.append("g").attr("id","yAxis").attr("class","axis").attr("transform","translate("+4*this.padding.left+", 0)").call(e);i.selectAll("path").style("fill","none").style("stroke","black").style("stroke-width","1px"),i.selectAll("line").style("fill","none").style("stroke","#000").style("stroke-width","1px").style("opacity",.5),i.selectAll("text").style("font-size","14px").style("font-family","sans-serif").style("font-weight","lighter")},trendline(t,e,i,s){const a=ht(t,e);this.info="Correlation : "+Math.round(1e3*a[2])/1e3;var o=this.xMin,r=a[0]*this.xMin+a[1],n=this.xMax,l=a[0]*this.xMax+a[1],d=[[o,r,n,l]],c=this.svg.selectAll("#trendline"+s).data(d);c.enter().append("line").attr("class","trendline").attr("id","trendline"+s).attr("x1",t=>this.xScale(t[0])).attr("y1",t=>this.yScale(t[1])).attr("x2",t=>this.xScale(t[2])).attr("y2",t=>this.yScale(t[3])).attr("stroke",i).attr("stroke-width",1).attr("transform","translate("+3*this.padding.left+","+this.padding.top+")")},calculateQDC(t,e){let i=this.$store.data_cs[e][t][this.$store.selectedMetric]["q"];0==i[3]&&0==i[1]?this.undesirability[t]=1:this.undesirability[t]=(i[3]-i[1])/(i[3]+i[1])*100,this.maxUndesirability<this.undesirability[t]&&(this.maxVarianceCallsite=rt(t,10)),this.maxUndesirability=Math.max(this.undesirability[t],this.maxUndesirability).toFixed(3);let s=this.undesirability[t]/this.maxUndesirability;return s},ensembleDots(){let t=this;for(let e=0;e<this.xArray.length;e+=1){let i=this.xArray[e]["callsite"],s=(this.xArray[e]["run"],1);this.svg.append("circle").attrs({class:"ensemble-dot",r:5,opacity:s,cx:()=>this.xScale(t.xArray[e])+3*t.padding.left,cy:()=>this.yScale(t.yArray[e])}).style("stroke","#202020").style("stroke-width",.5).style("fill",this.generalColors.intermediate).on("mouseover",()=>{let a={callsite:i,QCD:s,x:t.xArray[e],y:t.yArray[e],run:t.xArray[e].run,orientation:t.orientation};t.$refs.ToolTip.render(a)}).on("mouseout",()=>{t.$refs.ToolTip.clear()})}},targetDots(){let t=this;for(let e=0;e<this.xtargetArray.length;e++){let i=this.xtargetArray[e]["callsite"],s=this.xArray[e]["run"],a=1;this.svg.append("circle").attrs({class:"target-dot",r:5,opacity:a,cx:()=>this.xScale(this.xtargetArray[e])+3*this.padding.left,cy:(e,i)=>this.yScale(t.ytargetArray[i])}).style("fill",this.targetColor).style("opacity",.5).style("stroke",this.generalColors.darkGrey).style("stroke-width",.5).on("mouseover",()=>{let o={callsite:i,QCD:a,x:t.xtargetArray[e],y:t.ytargetArray[e],orientation:t.orientation,run:s};t.$refs.ToolTip.render(o)}).on("mouseout",()=>{t.$refs.ToolTip.clear()})}},correlationText(){let t=this,e=J["i"]("0.2f");this.svg.append("g").append("text").attr("class","text").text("corr-coef: "+e(this.corre_coef)).attr("x",(function(e){return t.boxWidth-t.width/3})).attr("y",(function(t){return 20}))},clear(){J["z"](".ensemble-dot").remove(),J["z"](".target-dot").remove(),J["z"](".axis").remove(),J["z"](".trend-line").remove(),J["z"](".scatterplot-axis-label").remove(),J["z"](".text").remove(),J["z"](".trendline").remove()}}},go=mo,bo=Object(m["a"])(go,ro,no,!1,null,null,null),xo=bo.exports,yo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{attrs:{id:t.id}},[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary}}),i("svg",{attrs:{id:t.svgId}})],1)},vo=[],Co=i("705b"),So=i.n(Co);function _o(){var t,e=[],i=75,s=!0,a=!1,o=!0,r="lasso",n={start:function(){},draw:function(){},end:function(){}};function l(l){var d,c,h,f,p=l.append("g").attr("class",r),u=p.append("path").attr("class","drawn"),m=p.append("path").attr("class","loop_close"),g=p.append("circle").attr("class","origin"),b=J["f"]().on("start",x).on("drag",y).on("end",v);function x(){f=[],d="",u.attr("d",null),m.attr("d",null),e.nodes().forEach((function(t){t.__lasso.possible=!1,t.__lasso.selected=!1,t.__lasso.hoverSelect=!1,t.__lasso.loopSelect=!1;var e=t.getBoundingClientRect();t.__lasso.lassoPoint=[Math.round(e.left+e.width/2),Math.round(e.top+e.height/2)]})),o&&e.on("mouseover.lasso",(function(){this.__lasso.hoverSelect=!0})),n.start()}function y(){var t,o;"touchmove"===J["g"].sourceEvent.type?(t=J["g"].sourceEvent.touches[0].clientX,o=J["g"].sourceEvent.touches[0].clientY):(t=J["g"].sourceEvent.clientX,o=J["g"].sourceEvent.clientY);var r=J["o"](this)[0],l=J["o"](this)[1];""===d?(d=d+"M "+r+" "+l,c=[t,o],h=[r,l],g.attr("cx",r).attr("cy",l).attr("r",7).attr("display",null)):d=d+" L "+r+" "+l,f.push([t,o]);var p=Math.sqrt(Math.pow(t-c[0],2)+Math.pow(o-c[1],2)),b="M "+r+" "+l+" L "+h[0]+" "+h[1];u.attr("d",d),m.attr("d",b),a=p<=i,a&&s?m.attr("display",null):m.attr("display","none"),e.nodes().forEach((function(t){t.__lasso.loopSelect=!(!a||!s)&&So()(f,t.__lasso.lassoPoint)<1,t.__lasso.possible=t.__lasso.hoverSelect||t.__lasso.loopSelect})),n.draw()}function v(){e.on("mouseover.lasso",null),e.nodes().forEach((function(t){t.__lasso.selected=t.__lasso.possible,t.__lasso.possible=!1})),u.attr("d",null),m.attr("d",null),g.attr("display","none"),n.end()}t.call(b)}return l.items=function(t){if(!arguments.length)return e;e=t;var i=e.nodes();return i.forEach((function(t){t.__lasso={possible:!1,selected:!1}})),l},l.className=function(t){return r=t,l},l.possibleItems=function(){return e.filter((function(){return this.__lasso.possible}))},l.selectedItems=function(){return e.filter((function(){return this.__lasso.selected}))},l.notPossibleItems=function(){return e.filter((function(){return!this.__lasso.possible}))},l.notSelectedItems=function(){return e.filter((function(){return!this.__lasso.selected}))},l.closePathDistance=function(t){return arguments.length?(i=t,l):i},l.closePathSelect=function(t){return arguments.length?(s=!0===t,l):s},l.isPathClosed=function(t){return arguments.length?(a=!0===t,l):a},l.hoverSelect=function(t){return arguments.length?(o=!0===t,l):o},l.on=function(t,e){if(!arguments.length)return n;if(1===arguments.length)return n[t];var i=["start","draw","end"];return i.indexOf(t)>-1&&(n[t]=e),l},l.targetArea=function(e){return arguments.length?(t=e,l):t},l}var Mo={name:"ParameterProjection",components:{InfoChip:Vt},props:[],data:()=>({id:"parameter-projection-view",svgId:"parameter-projection-view-svg",zoomed:!1,xMin:0,xMax:0,yMin:0,yMax:0,title:"Projection View",colorset:["#FF7F00","#16BECF","#984EA3","#8C564B","#E377C2","#7F7F7F","#BCBD21","#4daf4a","#D62728"],infoSummary:""}),computed:{...Object(c["c"])({data:"getParameterProjection",runs:"getRuns",nclusters:"getNumOfClusters",summary:"getSummary",selectedTargetRun:"getSelectedTargetRun",generalColors:"getGeneralColors",targetColor:"getTargetColor"})},watch:{data:function(t){this.visualize(t)}},mounted(){let t=this;At.$on("highlight_dataset",e=>{console.log("[Projection] Highlighting the dataset :",e),t.highlight(e)}),At.$on("update_number_of_clusters",e=>{t.clear(),this.$store.dispatch("fetchParameterProjection",{selected_runs:this.runs,n_cluster:this.selectedNumOfClusters})})},methods:{init(){this.$store.dispatch("fetchParameterProjection",{selected_runs:this.runs,n_cluster:this.selectedNumOfClusters});let t=document.getElementById(this.id);this.width=t.clientWidth,this.tooltipHeight=110,this.height=.33*this.$store.viewHeight-this.tooltipHeight,this.padding={left:50,top:0,right:50,bottom:30},this.x=J["s"]().range([0,this.width]),this.y=J["s"]().range([this.height,0])},axis(){this.xAxis=J["c"](this.x).tickFormat((t,e)=>""),this.yAxis=J["d"](this.y).tickFormat((t,e)=>""),this.yDom=[0,0],this.xAxisSVG=this.svg.append("g").attrs({transform:`translate(${this.padding.left}, ${this.height-this.padding.bottom})`,class:"x-axis",color:"transparent"}).call(this.xAxis),this.yAxisSVG=this.svg.append("g").attrs({transform:`translate(${this.padding.left}, ${this.padding.top})`,class:"y-axis",color:"transparent"}).call(this.yAxis),this.lineLength=75,this.svg.append("svg:defs").append("svg:marker").attr("id","triangle").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 -5 10 10").style("stroke","black"),this.svg.append("line").attr("x1",this.padding.bottom).attr("y1",this.height-this.padding.bottom/2).attr("x2",this.lineLength).attr("y2",this.height-this.padding.bottom/2).attr("stroke-width",3).attr("stroke","black").style("opacity",.5),this.svg.append("line").attr("x1",this.padding.bottom).attr("y1",this.height-this.padding.bottom/2).attr("x2",this.padding.bottom).attr("y2",this.height-.75*this.lineLength).attr("stroke-width",3).attr("stroke","black").style("opacity",.5),this.svg.append("text").attrs({class:"projection-axis-label",x:this.lineLength,y:this.height}).style("text-anchor","end").style("font-size","10px").style("fill","none").style("font-size","10px").style("stroke","black").style("stroke-width","1px").style("opacity",.5).text("PC1"),this.svg.append("text").attrs({class:"projection-axis-label",x:-this.height+.75*this.lineLength,y:.75*this.padding.bottom,transform:"rotate(-90)"}).style("text-anchor","end").style("fill","none").style("font-size","10px").style("stroke","black").style("stroke-width","1px").style("opacity",.5).text("PC2")},preprocess(t){let e=[];this.numberOfPoints=Object.entries(t["x"]).length;for(let i=0;i<this.numberOfPoints;i+=1){let s=t["dataset"][i];e[i]=[],e[i].push(t["x"][i]),e[i].push(t["y"][i]),e[i].push(t["dataset"][i]),e[i].push(i),e[i].push(t["label"][i]),e[i].push(this.summary[s]["time (inc)"][1]),e[i].push(this.summary[s]["time"][1]);let a=t["x"][i],o=t["y"][i];a<this.xMin&&(this.xMin=a),a>this.xMax&&(this.xMax=a),o<this.yMin&&(this.yMin=o),o>this.yMax&&(this.yMax=o)}return e},setup(){this.svg=J["y"]("#"+this.svgId).attrs({width:this.width,height:this.height,transform:"translate(0, 0)"}).style("stroke-width",1).style("stroke",this.$store.ensemble).style("background-color",this.$store.ensemble),this.t=this.svg.transition().duration(750),this.axis()},addTooltipTextBlock(){this.tooltip=J["y"]("#"+this.id).append("div").attrs({class:"tooltip",id:"parameter-projection-tooltip"}).style("opacity",1)},drawInnerCircle(){let t=this;this.circles=this.svg.selectAll("circle").data(this.$store.projection).enter().append("circle").attrs({class:t=>"dot",id:t=>"dot-"+t[2],r:6,fill:e=>{let i="";return i=(e[2]==t.$store.selectedTargetDataset&&t.$store.showTarget,this.colorset[e[4]]),i},cx:(e,i)=>t.x(e[0]),cy:e=>t.y(e[1])})},drawOuterDisc(){this.outerCircles=this.svg.selectAll(".outer-circle").data(this.$store.projection).enter().append("circle").attrs({class:t=>"outer-circle",id:t=>"outer-circle-"+t[2],r:6,"stroke-width":3,stroke:t=>t[2]==self.$store.selectedTargetDataset&&self.$store.showTarget?this.colorset[t[4]]:J["q"](self.generalColors.intermediate),"fill-opacity":0,cx:(t,e)=>self.x(t[0]),cy:t=>self.y(t[1])}).on("mouseover",t=>{this.mouseover(t)}).on("click",t=>{}).on("dblclick",t=>{})},addLassoFeature(){this.lasso=_o().className("lasso"+this.id).closePathSelect(!0).closePathDistance(100).items(this.circles).targetArea(this.svg).on("start",this.lassoStart).on("draw",this.lassoDraw).on("end",this.lassoEnd),this.svg.call(this.lasso)},visualize(t){this.setup(),this.$store.projection=this.preprocess(t),this.x.domain([2*this.xMin,2*this.xMax]),this.y.domain([2*this.yMin,2*this.yMax]),this.xAxisSVG.call(this.xAxis),this.yAxisSVG.call(this.yAxis),this.drawInnerCircle(),this.addTooltipTextBlock(),this.addLassoFeature(),this.highlight(this.selectedTargetRun),this.showDetails(this.selectedTargetRun)},showDetails(t){this.tooltip.html("Run: "+t+"<br/>[PC1] Inc. time (max): "+et(this.summary[t]["time (inc)"][1])+"<br/>[PC2] Exc. time (max): "+et(this.summary[t]["time"][1]))},mouseover(t){let e=t[2];J["z"](".dot").style("opacity",.5),this.tooltip.transition().duration(200).style("opacity",1).style("left",10),this.showDetails(e)},click(t){let e=this;this.selectedRun=t[2],J["z"](".dot").attr("stroke",e.generalColors.intermediate).attr("stroke-width",3),J["y"]("#dot-"+this.selectedRun).attr("stroke",e.generalColors.compare).attr("stroke-width",3),J["y"]("#outer-dot"+this.selectedRun).attr("stroke",this.targetColor).attr("stroke-width",3),this.compareDataset=t[2],this.$store.selectedCompareDataset=this.compareDataset,this.$emit("compare"),this.$socket.emit("compare",{targetDataset:e.$store.selectedTargetDataset,compareDataset:this.compareDataset,selectedMetric:this.selectedMetric})},dblclick(t){let e=t[2];this.$socket.emit("dist_group_highlight",{datasets:[e],groupBy:this.$store.selectedGroupBy}),this.$socket.emit("dist_auxiliary",{datasets:[e],sortBy:this.$store.auxiliarySortBy,module:"all"}),this.$store.selectedTargetDataset=e,At.$emit("highlight-datasets",this.$store.selectedTargetDataset)},lassoStart(){J["z"](".dot").attrs({opacity:1}),this.lasso.items().attr("r",t=>4.5).classed("not_possible",!0).classed("selected",!1)},lassoDraw(){this.lasso.possibleItems().classed("not_possible",!1).classed("possible",!0),this.lasso.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},lassoEnd(){J["z"](".dot").attrs({opacity:.5}),this.selectedDatasets=[],this.lasso.items().classed("not_possible",!1).classed("possible",!1),this.lasso.selectedItems().classed("selected",!0).attr("r",t=>4.5).attr("id",t=>{this.selectedDatasets.push(t[2])}).attr("opacity",1),this.lasso.notSelectedItems().attr("r",4.5).attr("opacity",.3),this.$store.commit("runs",this.selectedDatasets),At.$emit("lasso-selection",this.runs)},zoom(){this.zoomed=!0;let t=this;this.svg.selectAll(".circle"+this.id).transition(this.t).attr("cx",(function(e){return t.x(e["PC0"][0])})).attr("cy",(function(e){return t.y(e["PC1"][0])})),this.svg.selectAll(".selection").attrs({x:0,y:0,width:0,height:0})},unzoom(){this.zoomed=!1,this.x.domain([2*this.xMin,2*this.xMax]),this.y.domain([2*this.yMin,2*this.yMax]);let t=this;this.svg.selectAll(".circle"+this.id).transition(this.t).attr("cx",(function(e){return t.x(e["PC0"][0])})).attr("cy",(function(e){return t.y(e["PC1"][0])}))},brushended(){let t=350,e=J["g"].selection;if(e){let t=e.map(this.x.invert),i=e.map(this.y.invert);if(this.selectedIds=this.findIdsInRegion(t[0],t[1],i[0],i[1]),this.x.domain([e[0][0],e[1][0]].map(this.x.invert,this.x)),this.y.domain([e[1][1],e[0][1]].map(this.y.invert,this.y)),!J["g"].sourceEvent)return;J["y"](".brush").call(this.brush.move,null)}else{if(!this.idleTimeout)return this.idleTimeout=setTimeout(this.idled,t);this.x.domain([2*this.xMin,2*this.xMax]),this.y.domain([2*this.yMin,2*this.yMax])}this.zoom(),this.select()},idled(){this.idleTimeout=null},highlight(t){let e=this.selectedTargetRun;this.svg.selectAll(".dot").attrs({opacity:1,"stroke-width":0}),this.svg.selectAll("#dot-"+e).attrs({"stroke-width":3,stroke:this.generalColors.target})},clear(){J["z"]("#parameter-projection-tooltip").remove(),this.svg.selectAll(".dot").attrs({stroke:"#fff"}),J["z"](".outer-circle").remove(),this.svg.selectAll(".lasso").remove(),this.svg.selectAll(".projection-axis-label").remove()}}},wo=Mo,ko=Object(m["a"])(wo,yo,vo,!1,null,null,null),To=ko.exports;b()(ko,{VCard:B["a"]});var $o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("InfoChip",{ref:"InfoChip",attrs:{title:t.title,summary:t.infoSummary,info:t.info}}),i("svg",{attrs:{id:t.id}})],1)},Po=[],Ro={name:"GradientView",components:{InfoChip:Vt},computed:{...Object(c["c"])({summary:"getSummary",selectedNode:"getSelectedNode",gradients:"getGradients",selectedTargetRun:"getSelectedTargetRun",selectedMetric:"getSelectedMetric",runBinCount:"getRunBinCount",colorPoint:"getColorPoint",runtimeColorMap:"getRuntimeColorMap",distributionColorMap:"getDistributionColorMap"})},data:()=>({id:"gradient-view",info:"",infoSummary:"Gradient view visualizes the ",title:"Encoding",padding:{top:10,right:10,bottom:10,left:15},defaultStrokeWidth:10,runtimeColor:null,distributionColor:null}),watch:{gradients:function(t){this.data=t,this.visualize()}},mounted(){let t=this;At.$on("reset-ensemble-gradients",(function(){t.clear(),t.init()}))},methods:{init(){this.$store.dispatch("fetchGradients",{dataset:this.selectedTargetRun,node:this.selectedNode["name"],ntype:this.selectedNode["type"],nbins:this.runBinCount})},visualize(){this.width=.2*this.$store.viewWidth,this.height=150,this.boxWidth=this.width-1*(this.padding.right+this.padding.left),this.boxHeight=this.height-2*(this.padding.top+this.padding.bottom),this.xAxisHeight=this.boxWidth-(this.paddingFactor+1)*this.padding.left,this.yAxisHeight=this.boxHeight-(this.paddingFactor+1)*this.padding.left,this.svg=J["y"]("#"+this.id).attrs({width:this.boxWidth,height:this.boxHeight,transform:"translate("+this.padding.left+","+this.padding.top+")"}),this.setupColors(),this.svg.append("rect").attrs({width:this.boxWidth,height:this.boxHeight,id:"ensemble-gradient-rect"}).style("stroke",this.stroke_by_metric(this.data,this.selectedMetric)).style("stroke-width",this.defaultStrokeWidth).style("fill",this.fill_with_gradients(this.data,this.selectedMetric,this.distributionColor)),this.svg.append("text").attrs({x:20,y:30,id:"ensemble-gradient-text"}).style("fill",t=>{const e=this.data[this.selectedMetric].dataset.mean[this.selectedTargetRun],i=this.runtimeColor.getColor(e);return this.runtimeColor.setContrast(i)}).style("font-size","16px").text(this.selectedNode["name"])},singleColors(){const t=this.summary[this.selectedTargetRun][this.selectedMetric];this.runtimeColor=new Pe(this.selectedMetric,t[0],t[1],this.runtimeColorMap,this.colorPoint)},ensembleColors(){const t=this.data[this.selectedMetric]["hist"]["h"],[e,i]=ft(t);this.distributionColor=new Pe("MeanGradients",e,i,this.distributionColorMap,this.colorPoint)},setupColors(){this.singleColors(),this.ensembleColors()},fill_with_gradients(t,e,i){const s=J["y"]("#"+this.id).append("defs"),a=s.append("linearGradient").attr("class","ensemble-gradient-defs").attr("id","ensemble-gradient-defs-"+this.selectedNode["name"]);a.attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");const o=t[e]["hist"]["b"],r=t[e]["hist"]["h"];for(let n=0;n<o.length;n+=1){let t=(n+n+1)/(2*o.length);a.append("stop").attr("offset",100*t+"%").attr("stop-color",i.getColorByValue(r[n]))}return"url(#ensemble-gradient-defs-"+this.selectedNode["name"]+")"},stroke_by_metric(t,e){const i=t[e].dataset.mean[this.selectedTargetRun],s=this.runtimeColor.getColorByValue(i);return J["q"](s)},clear(){J["z"](".ensemble-gradient-rect").remove(),J["z"](".ensemble-gradient-text").remove(),J["z"](".ensemble-gradient-defs").remove()}}},Oo=Ro,Do=Object(m["a"])(Oo,$o,Po,!1,null,null,null),Eo=Do.exports,Ao={name:"EnsembleSuperGraph",components:{Splitpanes:$t.a,Toolbar:Me,Sankey:pa,EnsembleScatterplot:xo,EnsembleHistogram:Va,ModuleHierarchy:oo,ParameterProjection:To,CallsiteCorrespondence:Oa,Settings:Be,GradientView:Eo},props:{aux_data:Object},data:()=>({summaryChip:"Ensemble Super Graph",info:"",isSettingsOpen:!1}),computed:{...Object(c["c"])({runs:"getRuns",summary:"getSummary",selectedTargetRun:"getSelectedTargetRun",selectedCompareRun:"getSelectedCompareRun",selectedMetric:"getSelectedMetric",metricTimeMap:"getMetricTimeMap",targetColorMap:"getTargetColorMap"})},beforeCreate(){this.$store.dispatch("fetchSummary")},watch:{showTarget:function(t){At.$emit("show-target-auxiliary")},isSettingsOpen:function(t){this.$emit("update:isSettingsOpen",t)},summary:function(t){this.isDataReady=!0,this.init()}},mounted(){let t=this;At.$on("lasso-selection",t=>{this.$store.resetTargetDataset=!0,this.$store.selectedDatasets=t,At.$emit("aux-data",{datasets:this.$store.selectedDatasets,rankBinCount:this.$store.selectedMPIBinCount,runBinCount:this.$store.selectedRunBinCount,reProcess:!0}),this.reset()}),At.$on("reset-esg",()=>{t.reset()})},methods:{init(){this.$store.commit("setSelectedMode","ESG"),this.$store.commit("setEncoding","MEAN_GRADIENTS"),console.log("[ESG] Selected Run: ",this.selectedTargetRun),console.log("[ESG] Selected Metric: ",this.selectedMetric),this.currentComponents=this.setComponentMap(),this.initComponents(this.currentComponents)},setComponentMap(){return[this.$refs.Sankey,this.$refs.EnsembleHistogram,this.$refs.EnsembleScatterplot,this.$refs.CallsiteCorrespondence,this.$refs.ParameterProjection,this.$refs.ModuleHierarchy,this.$refs.Settings,this.$refs.GradientView]},clear(){this.clearComponents(this.currentComponents)},initComponents(t){for(let e=0;e<t.length;e++)t[e].init()},clearComponents(t){for(let e=0;e<t.length;e++)t[e].clear()},reset(){this.clear(),this.init()},closeSettings(){this.isSettingsOpen=!this.isSettingsOpen}}},Ho=Ao,Bo=Object(m["a"])(Ho,xa,ya,!1,null,null,null),Io=Bo.exports;b()(Bo,{VBtn:k["a"],VCard:B["a"],VCol:G["a"],VIcon:Nt["a"],VMain:T["a"],VNavigationDrawer:ze["a"],VRow:L["a"]});var Go=i("f309");function zo(t,e){return Object.keys(t).filter(t=>!e.includes(t)).map(e=>({run:e,...t[e]}))}function No(t,e,i){return Object.keys(t).filter(t=>!i.includes(t)).reduce((i,s)=>({...i,[s]:t[s][e]}),{})}function Lo(t){return Object.keys(t).reduce((e,i)=>t[e]>t[i]?e:i)}s["default"].use(c["a"]);var jo=new c["a"].Store({state:{config:{},summary:{},profiles:[],metricTimeMap:{},selectedTargetRun:"",selectedNode:"",runs:[],targetColorMap:{Green:"#4DAF4A",Blue:"#3366CC",Brown:"#AF9B90",Red:"#A90400",Vermillion:"#dc3912",Yellow:"#ff9900",Majenta:"#990099",Pink:"#dd4477"},generalColors:{silver:"#c0c0c0",darkGrey:"#3a3a3a",lightGrey:"#888888",blue:"#043060",target:"#4DAF4A",intermediate:"#d9d9d9",ensemble:"#d9d9d9",text:"#888888"},runtimeColorMap:"OrRd",distributionColorMap:"Reds",targetColor:"Green",colorPoint:9,selectedMetric:"time (inc)",selectedMode:"",SG:{},rankBinCount:20,singleHistogram:{},singleScatterplot:{},singleBoxplots:[],ESG:{},runBinCount:20,ensembleHistogram:{},ensembleScatterplot:{},ensembleBoxplots:{},showTarget:!0,ensembleGradients:{},timeline:{},CCT:{},parameterProjection:{},numOfClusters:3,runtimeSortBy:"mean",hierarchy:{},prop:"rank",comparisonMode:!1,selectedCompareRun:"",compareData:{},encoding:"MEAN",IQRFactor:1.5,gradients:{}},mutations:{setConfig(t,e){t.config=e},setRuns(t,e){t.runs=e},setSummary(t,e){t.summary=e},setProfiles(t,e){t.profiles=e},setMetricTimeMap(t,e){t.metricTimeMap=e},setSelectedTargetRun(t,e){t.selectedTargetRun=e},setSelectedNode(t,e){t.selectedNode=e},setTimeline(t,e){t.timeline=e},setCCT(t,e){t.CCT=e},setSelectedMode(t,e){console.log("Payload for selectedMode: ",e),t.selectedMode=e},setSG(t,e){t.SG=e},setESG(t,e){t.ESG=e},setSingleHistogram(t,e){t.singleHistogram=e},setSingleScatterplot(t,e){t.singleScatterplot=e},setSingleBoxplots(t,e){t.singleBoxplots=e},setEnsembleHistogram(t,e){t.ensembleHistogram=e},setEnsembleScatterplot(t,e){t.ensembleScatterplot=e},setEnsembleBoxplots(t,e){t.ensembleBoxplots=e},setEncoding(t,e){t.encoding=e},setShowTarget(t,e){t.showTarget=e},setParameterProjection(t,e){t.parameterProjection=e},setNumOfClusters(t,e){t.numOfClusters=e},setSelectedColorPoint(t,e){t.colorPoint=e},setHierarchy(t,e){t.hierarchy=e},setSelectedProp(t,e){t.prop=e},setComparisonMode(t,e){console.log("Setting comparison mode to :",e),t.comparisonMode=e},setSelectedCompareRun(t,e){console.log("Setting comparison run to :",e),t.selectedCompareRun=e},setCompareData(t,e){t.compareData=e},setIQRFactor(t,e){t.IQRFactor=e},setTargetColor(t,e){t.targetColor=e},setGradients(t,e){t.gradients=e},setRuntimeColorMap(t,e){t.runtimeColorMap=e},setDistributionColorMap(t,e){t.distributionColorMap=e}},actions:{async fetchConfig({commit:t}){const e=await ri.GETRequest("config");console.log("[Data] Config :",e),t("setConfig",e)},async fetchSummary({commit:t,state:e},i){const s=await ri.POSTRequest("summary");console.log("[Data] Summary :",s),t("setSummary",s),t("setProfiles",zo(s,["ensemble"]));const a=No(s,"meantime",["ensemble"]);t("setMetricTimeMap",a);const o=Lo(a);t("setSelectedTargetRun",o),t("setSelectedNode",{name:s[o]["maxmodule"],type:"module"});const r=Object.keys(s).filter(t=>"ensemble"!==t);t("setRuns",r)},async fetchTimeline({commit:t},e){const i=await ri.POSTRequest("timeline",e);t("setTimeline",i)},async fetchSingleHistogram({commit:t},e){const i=await ri.POSTRequest("single_histogram",e);console.log("[Data] Single Histogram: ",i),t("setSingleHistogram",i)},async fetchSingleScatterplot({commit:t},e){const i=await ri.POSTRequest("single_scatterplot",e);console.log("[Data] Single Scatterplot: ",i),t("setSingleScatterplot",i["tgt"])},async fetchSingleBoxplots({commit:t},e){const i=await ri.POSTRequest("single_boxplots",e);console.log("[Data] Single boxplots: ",i),t("setSingleBoxplots",i)},async fetchCCT({commit:t},e){const i=await ri.POSTRequest("cct",e);console.log("[Data] CCT for",e.dataset,"is :",i),t("setCCT",i)},async fetchSG({commit:t},e){const i=await ri.POSTRequest("single_supergraph",e);console.log("[Data] SG: ",i),t("setSG",i)},async fetchESG({commit:t},e){const i=await ri.POSTRequest("ensemble_supergraph",e);console.log("[Data] ESG: ",i),t("setESG",i)},async fetchEnsembleHistogram({commit:t},e){const i=await ri.POSTRequest("ensemble_histogram",e);console.log("[Data] ESG Histogram: ",i),t("setEnsembleHistogram",i)},async fetchEnsembleScatterplot({commit:t},e){const i=await ri.POSTRequest("ensemble_scatterplot",e);console.log("[Data] ESG Scatterplot: ",i),t("setEnsembleScatterplot",i)},async fetchEnsembleBoxplots({commit:t},e){const i=await ri.POSTRequest("ensemble_boxplots",e);console.log("[Data] ESG Boxplots: ",i),t("setEnsembleBoxplots",i)},async fetchParameterProjection({commit:t},e){const i=await ri.POSTRequest("projection",e);console.log("[Data] ESG Projection: ",JSON.parse(i)),t("setParameterProjection",JSON.parse(i))},async fetchGradients({commit:t},e){const i=await ri.POSTRequest("gradients",e);console.log("[Data] ESG Gradients: ",i),t("setGradients",i)},async fetchHierarchy({commit:t},e){const i=await ri.POSTRequest("module_hierarchy",e);console.log("[Data] ESG Hierarchy: ",i),t("setHierarchy",i)},async fetchCompare({commit:t,state:e},i){const s=await ri.POSTRequest("compare",{targetRun:e.selectedTargetRun,compareRun:e.selectedCompareRun,selectedMetric:e.selectedMetric});console.log("[Data] ESG Comparison: ",s),t("setCompareData",s)},updateSelectedMetric({state:t,dispatch:e},i){t.selectedMetric=i,e("reset")},updateRuntimeColorMap({state:t,dispatch:e},i){t.runtimeColorMap=i,e("reset")},updateDistributionColorMap({state:t},e){t.distributionColorMap=e,At.$emit("update-node-encoding")},updateSelectedColorPoint({state:t,dispatch:e},i){t.colorPoint=i,e("reset")},updateRankBinCount({state:t},e){t.rankBinCount=e,At.$emit("reset-single-histogram")},updateRunBinCount({state:t,dispatch:e},i){t.runBinCount=i,e("reset")},updateRuntimeSortBy({state:t,dispatch:e},i){t.runtimeSortBy=i,"SG"===t.selectedMode?At.$emit("callsite-information-sort"):"ESG"===t.selectedMode&&At.$emit("callsite-correspondence-sort")},updateCompareRun({commit:t},e){t("setCompareRun",e),t("setComparisonMode",e),At.$emit("update-ensemble-colors")},updateNodeEncoding(){At.$emit("update-node-encoding")},updateIQRFactor({state:t,commit:e},i){e("setIQRFactor",i),console.log("[Interaction] Updating IQR Factor: ",i),"SG"==t.selectedMode?At.$emit("reset-single-boxplots"):"ESG"==t.selectedMode&&At.$emit("reset-ensemble-boxplots")},updateTargetColor({commit:t,dispatch:e},i){console.log("[Interaction] Updating Target color: ",i),t("setTargetColor",i),e("reset")},reset({state:t}){"CCT"==t.selectedMode?At.$emit("reset-cct"):"SG"==t.selectedMode?At.$emit("reset-sg"):"ESG"==t.selectedMode&&At.$emit("reset-esg")}},modules:{},getters:{getConfig:t=>t.config,getRuns:t=>t.runs,getSummary:t=>t.summary,getProfiles:t=>t.profiles,getMetricTimeMap:t=>t.metricTimeMap,getSelectedTargetRun:t=>t.selectedTargetRun,getSelectedNode:t=>t.selectedNode,getTimeline:t=>t.timeline,getCCT:t=>t.CCT,getRankBinCount:t=>t.rankBinCount,getRunBinCount:t=>t.runBinCount,getSelectedCompareRun:t=>t.selectedCompareRun,getSelectedMetric:t=>t.selectedMetric,getSelectedMode:t=>t.selectedMode,getComparisonMode:t=>t.comparisonMode,getSG:t=>t.SG,getSingleHistogram:t=>t.singleHistogram,getSingleScatterplot:t=>t.singleScatterplot,getSingleBoxplots:t=>t.singleBoxplots,getRuntimeColorMap:t=>t.runtimeColorMap,getESG:t=>t.ESG,getDSG:t=>t.DSG,getEnsembleHistogram:t=>t.ensembleHistogram,getEnsembleScatterplot:t=>t.ensembleScatterplot,getEnsembleBoxplots:t=>t.ensembleBoxplots,getShowTarget:t=>t.showTarget,getTargetColorMap:t=>t.targetColorMap,getDistributionColorMap:t=>t.distributionColorMap,getTargetColor:t=>t.targetColor,getParameterProjection:t=>t.parameterProjection,getNumOfClusters:t=>t.numOfClusters,getGeneralColors:t=>t.generalColors,getEncoding:t=>t.encoding,getColorPoint:t=>t.colorPoint,getRuntimeSortBy:t=>t.runtimeSortBy,getIQRFactor:t=>t.IQRFactor,getHierarchy:t=>t.hierarchy,getProp:t=>t.prop,getCompareData:t=>t.compareData,getGradients:t=>t.gradients}});s["default"].use(Go["a"]);const Vo=new Go["a"]({icons:{iconfont:"mdiSvg"}}),Wo=new a["a"]({routes:[{path:"/",name:"Summary",component:Mt,props:!0},{path:"/cct",name:"CCT",component:Le,props:!0},{path:"/super_graph",name:"SuperGraph",component:ba,props:!0},{path:"/ensemble_super_graph",name:"EnsembleSuperGraph",component:Io,props:!0}]});s["default"].config.productionTip=!1,s["default"].use(o["a"]),s["default"].use(a["a"]),s["default"].use(Go["a"]),s["default"].use(n.a),new s["default"]({store:jo,render:t=>t(P),el:"#app",router:Wo,components:{App:P},vuetify:Vo,template:"<App/>"}),s["default"].config.devtools=!0;e["default"]=Wo},5919:function(t,e,i){"use strict";var s=i("a087"),a=i.n(s);a.a},"5f51":function(t,e,i){},6083:function(t,e,i){},"6d60":function(t,e,i){},"7dad":function(t,e,i){},8646:function(t,e,i){},"86a6":function(t,e,i){},9993:function(t,e,i){"use strict";var s=i("7dad"),a=i.n(s);a.a},a087:function(t,e,i){},f75b:function(t,e,i){"use strict";var s=i("6d60"),a=i.n(s);a.a},fca0:function(t,e,i){"use strict";var s=i("5f51"),a=i.n(s);a.a},fe18:function(t,e,i){"use strict";var s=i("86a6"),a=i.n(s);a.a}});
//# sourceMappingURL=app.js.map